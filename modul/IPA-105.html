<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPA-105: Struktur Sel Hewan & Tumbuhan</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- MathJax for LaTeX -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; color: #334155; }
        .arabic { font-family: 'Amiri', serif; font-size: 1.8rem; line-height: 2.5rem; text-align: right; color: #064e3b; }
        .tab-btn { transition: all 0.3s ease; border-bottom: 3px solid transparent; }
        .tab-active { color: #059669; font-weight: 800; border-bottom-color: #059669; background-color: #f0fdf4; }
        .teacher-note { border-left: 5px solid #d97706; background-color: #fffbeb; padding: 1.25rem; border-radius: 0.5rem; margin: 1.5rem 0; }
        .teacher-note::before { content: "ğŸ“‹ INSTRUKSI GURU"; display: block; font-weight: 800; font-size: 0.75rem; color: #b45309; margin-bottom: 0.5rem; }
        .cell-svg { max-width: 300px; margin: auto; display: block; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }
        .formatif-card { background: white; border: 1px solid #e2e8f0; border-radius: 1rem; overflow: hidden; }
        .option-btn { display: block; width: 100%; text-align: left; padding: 1rem; border: 1px solid #f1f5f9; margin-bottom: 0.5rem; border-radius: 0.5rem; transition: 0.2s; }
        .option-btn:hover { background: #f0fdf4; border-color: #10b981; }
        .correct { background: #d1fae5 !important; border-color: #059669 !important; font-weight: bold; }
        .wrong { background: #fee2e2 !important; border-color: #dc2626 !important; }
        .hidden { display: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out; }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="bg-emerald-900 text-white shadow-xl sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-xl font-extrabold tracking-tight">IPA-105 <span class="text-emerald-400">SEL HEWAN & TUMBUHAN</span></h1>
                <p class="text-xs text-emerald-200">Blueprint Kurikulum Terpadu 8 Sesi</p>
            </div>
            <div id="progress-indicator" class="mt-4 md:mt-0 text-sm font-mono bg-emerald-800 px-4 py-1 rounded-full">
                Kemajuan: 0%
            </div>
        </div>
        <div class="bg-white border-t border-slate-200 overflow-x-auto">
            <div class="container mx-auto flex">
                <button onclick="loadSesi(1)" id="nav-1" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 1</button>
                <button onclick="loadSesi(2)" id="nav-2" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 2</button>
                <button onclick="loadSesi(3)" id="nav-3" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 3</button>
                <button onclick="loadSesi(4)" id="nav-4" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 4</button>
                <button onclick="loadSesi(5)" id="nav-5" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 5</button>
                <button onclick="loadSesi(6)" id="nav-6" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 6</button>
                <button onclick="loadSesi(7)" id="nav-7" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 7</button>
                <button onclick="loadSesi(8)" id="nav-8" class="tab-btn px-6 py-4 text-sm font-semibold text-slate-500 whitespace-nowrap">Sesi 8</button>
                <button onclick="loadSumatif()" id="nav-sum" class="tab-btn px-6 py-4 text-sm font-bold text-orange-600 bg-orange-50 whitespace-nowrap">SUMATIF</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div id="main-content" class="max-w-4xl mx-auto">
            <!-- Content Injected via JS -->
        </div>
    </main>

    <!-- Modal Skor -->
    <div id="modal-skor" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center p-4 z-[60]">
        <div class="bg-white rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl">
            <h3 class="text-2xl font-bold text-slate-800">Hasil Evaluasi</h3>
            <div id="skor-lingkaran" class="w-32 h-32 rounded-full border-8 border-emerald-500 flex items-center justify-center mx-auto my-6">
                <span id="txt-skor" class="text-4xl font-black">0</span>
            </div>
            <p id="txt-feedback" class="text-slate-600 mb-6"></p>
            <button onclick="closeModal()" class="w-full bg-emerald-600 text-white font-bold py-3 rounded-xl hover:bg-emerald-700 transition">Murojaah Materi</button>
        </div>
    </div>

    <script>
        const sesiData = [
            {
                id: 1,
                title: "Sejarah Sel & Mukjizat Mikrokosmos",
                tujuan: [
                    "Menjelaskan sejarah penemuan sel oleh Robert Hooke & van Leeuwenhoek.",
                    "Memahami sel sebagai unit terkecil kehidupan ciptaan Allah.",
                    "Menyimpulkan teori sel modern."
                ],
                islam: {
                    ayat: "Ø¥ÙÙ†Ù‘ÙØ§ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ø®ÙÙ„ÙÙ‚Ù’Ù†ÙØ§Ù‡Ù Ø¨ÙÙ‚ÙØ¯ÙØ±Ù",
                    terjemah: "Sesungguhnya Kami menciptakan segala sesuatu menurut ukuran. (QS. Al-Qamar: 49)",
                    catatan: "Sel adalah bukti nyata 'Qadar' (ukuran/desain) Allah yang sangat teliti dalam skala mikroskopis."
                },
                skenario: `
                    <div class="space-y-4">
                        <p><strong>Pendahuluan (15 Menit):</strong> Guru menunjukkan sayatan gabus atau gambar kotak-kotak kecil. Tanya jawab: "Bagaimana benda sekecil ini bisa menyusun paus yang besar?"</p>
                        <div class="bg-slate-100 p-4 rounded-xl text-center">
                            <svg class="cell-svg" viewBox="0 0 100 100">
                                <rect x="10" y="10" width="20" height="20" fill="none" stroke="#64748b" />
                                <rect x="30" y="10" width="20" height="20" fill="none" stroke="#64748b" />
                                <rect x="50" y="10" width="20" height="20" fill="none" stroke="#64748b" />
                                <rect x="10" y="30" width="20" height="20" fill="none" stroke="#64748b" />
                                <circle cx="20" cy="20" r="2" fill="#94a3b8" />
                                <text x="12" y="55" font-size="5" fill="#475569">Struktur Sel Gabus Robert Hooke</text>
                            </svg>
                        </div>
                        <p><strong>Inti (60 Menit):</strong> Membahas penemuan mikroskop. Robert Hooke (1665) menyebutkan istilah <em>cellula</em>. Teori sel: 1. Semua mahluk hidup dari sel. 2. Sel adalah unit fungsional. 3. Sel berasal dari sel sebelumnya.</p>
                        <div class="teacher-note">Gunakan analogi batu bata untuk membangun rumah (tubuh) agar santri lebih mudah membayangkan.</div>
                    </div>
                `,
                formatif: [
                    { q: "Siapa ilmuwan yang pertama kali menggunakan istilah 'Sel'?", a: ["Robert Hooke", "Antonie van Leeuwenhoek", "Rudolf Virchow", "Matthias Schleiden"], c: 0, e: "Robert Hooke melihat rongga kosong pada gabus dan menamainya cellula." },
                    { q: "Apa arti dari 'Omnis cellula e cellula'?", a: ["Sel adalah unit energi", "Semua sel berasal dari sel sebelumnya", "Sel hanya ada pada tumbuhan", "Sel adalah benda mati"], c: 1, e: "Pernyataan Rudolf Virchow ini menegaskan keberlanjutan kehidupan sel." },
                    { q: "Berapa ukuran rata-rata sel mahluk hidup?", a: ["1-100 meter", "1-100 milimeter", "1-100 mikrometer", "1-100 nanometer"], c: 2, e: "Sel berukuran mikroskopis (mikrometer)." },
                    { q: "Mikroskop pertama kali dikembangkan secara signifikan oleh...", a: ["Einstein", "Leeuwenhoek", "Newton", "Mendel"], c: 1, e: "Leeuwenhoek adalah bapak mikrobiologi dengan lensa buatannya sendiri." },
                    { q: "Teori sel menyatakan bahwa sel adalah unit terkecil...", a: ["Kimiawi", "Fungsional & Struktural", "Hanya Struktural", "Hanya Fungsional"], c: 1, e: "Sel mencakup struktur fisik dan fungsi kerja mahluk hidup." },
                    { q: "Komponen yang membatasi sel dengan lingkungan luar adalah...", a: ["Inti sel", "Membran sel", "Ribosom", "Sitoplasma"], c: 1, e: "Membran sel berfungsi sebagai pelindung dan pengatur zat." },
                    { q: "Cairan bening di dalam sel tempat organel berada disebut...", a: ["Nukleus", "Sitoplasma", "Vakuola", "Klorofil"], c: 1, e: "Sitoplasma adalah matriks cair di dalam sel." },
                    { q: "Ilmuwan yang menyatakan sel adalah unit dasar tumbuhan adalah...", a: ["Schleiden", "Schwann", "Hooke", "Brown"], c: 0, e: "Matthias Schleiden fokus pada anatomi tumbuhan." },
                    { q: "Organisme yang hanya terdiri dari satu sel disebut...", a: ["Multiseluler", "Uniseluler", "Biseluler", "Non-seluler"], c: 1, e: "Contohnya adalah bakteri dan amoeba." },
                    { q: "Robert Hooke mengamati sel pada sayatan...", a: ["Bawang merah", "Darah manusia", "Gabus pohon ek", "Daun Elodea"], c: 2, e: "Gabus adalah jaringan tumbuhan yang sudah mati." }
                ]
            },
            {
                id: 2,
                title: "Komponen Kimiawi Penyusun Sel",
                tujuan: ["Identifikasi unsur makro dan mikro dalam sel.", "Memahami peran air dalam protoplasma.", "Menjelaskan fungsi protein, lipid, dan karbohidrat bagi sel."],
                islam: {
                    ayat: "ÙˆÙØ¬ÙØ¹ÙÙ„Ù’Ù†ÙØ§ Ù…ÙÙ†Ù Ø§Ù„Ù’Ù…ÙØ§Ø¡Ù ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ø­ÙÙŠÙ‘Ù",
                    terjemah: "Dan dari air Kami jadikan segala sesuatu yang hidup... (QS. Al-Anbiya: 30)",
                    catatan: "Air adalah pelarut universal dan komponen terbesar (70-90%) dalam protoplasma sel."
                },
                skenario: `<p>Sesi ini membahas 'sup kimia' kehidupan. Unsur organik (C, H, O, N) dan anorganik. Protein sebagai pembangun, Karbohidrat sebagai energi, dan Lemak sebagai cadangan energi & membran.</p>`,
                formatif: Array(10).fill({ q: "Komponen organik utama sel adalah...", a: ["Pasir", "Protein", "Emas", "Kaca"], c: 1, e: "Protein, Karbohidrat, dan Lemak adalah senyawa organik penyusun sel." })
            },
            {
                id: 3,
                title: "Membran Sel: Gerbang Amanah",
                tujuan: ["Menganalisis struktur Lipid Bilayer.", "Memahami sifat Selektif Permeabel.", "Menjelaskan fungsi protein transpor."],
                islam: {
                    ayat: "ÙˆÙØ§Ù„Ù‘ÙØ°ÙÙŠÙ†Ù Ù‡ÙÙ…Ù’ Ù„ÙØ£ÙÙ…ÙØ§Ù†ÙØ§ØªÙÙ‡ÙÙ…Ù’ ÙˆÙØ¹ÙÙ‡Ù’Ø¯ÙÙ‡ÙÙ…Ù’ Ø±ÙØ§Ø¹ÙÙˆÙ†Ù",
                    terjemah: "Dan orang-orang yang memelihara amanat-amanat dan janjinya. (QS. Al-Mu'minun: 8)",
                    catatan: "Membran sel mengemban amanah untuk hanya membiarkan zat yang bermanfaat masuk dan menahan yang berbahaya keluar."
                },
                skenario: `<p>Membahas struktur mozaik fluida. Bagaimana sel berkomunikasi dengan lingkungan luar melalui reseptor pada membran.</p>`,
                formatif: Array(10).fill({ q: "Sifat membran sel yang hanya bisa dilewati zat tertentu disebut...", a: ["Permeabel", "Impermeabel", "Selektif Permeabel", "Netral"], c: 2, e: "Membran memilih zat yang boleh lewat." })
            },
            {
                id: 4,
                title: "Nukleus & Sistem Komando",
                tujuan: ["Identifikasi bagian-bagian inti sel.", "Memahami peran DNA sebagai materi genetik.", "Menganalisis hubungan nukleus dengan sintesis protein."],
                islam: {
                    ayat: "Ø³ÙÙ†ÙØ±ÙÙŠÙ‡ÙÙ…Ù’ Ø¢ÙŠÙØ§ØªÙÙ†ÙØ§ ÙÙÙŠ Ø§Ù„Ù’Ø¢ÙÙØ§Ù‚Ù ÙˆÙÙÙÙŠ Ø£ÙÙ†ÙÙØ³ÙÙ‡ÙÙ…Ù’",
                    terjemah: "Kami akan memperlihatkan kepada mereka tanda-tanda (kekuasaan) Kami di segenap ufuk dan pada diri mereka sendiri... (QS. Fussilat: 53)",
                    catatan: "DNA di dalam nukleus adalah kode informasi yang sangat rumit, bukti adanya Perancang Yang Maha Cerdas."
                },
                skenario: `<p>Nukleus adalah pusat kendali. Jika nukleus rusak, seluruh metabolisme sel berhenti. Di dalamnya terdapat kromosom yang membawa sifat keturunan.</p>`,
                formatif: Array(10).fill({ q: "Di manakah materi genetik (DNA) disimpan?", a: ["Ribosom", "Nukleus", "Lisosom", "Vakuola"], c: 1, e: "Nukleus menjaga stabilitas gen-gen tersebut." })
            },
            {
                id: 5,
                title: "Sitoplasma & Organel Energi",
                tujuan: ["Memahami fungsi Mitokondria sebagai pusat energi.", "Menjelaskan fungsi Kloroplas pada tumbuhan.", "Menganalisis proses respirasi seluler singkat."],
                islam: {
                    ayat: "Ø§Ù„Ù‘ÙØ°ÙÙŠ Ø¬ÙØ¹ÙÙ„Ù Ù„ÙÙƒÙÙ… Ù…Ù‘ÙÙ†Ù Ø§Ù„Ø´Ù‘ÙØ¬ÙØ±Ù Ø§Ù„Ù’Ø£ÙØ®Ù’Ø¶ÙØ±Ù Ù†ÙØ§Ø±Ù‹Ø§",
                    terjemah: "Yaitu (Tuhan) yang menjadikan untukmu api dari kayu yang hijau... (QS. Yasin: 80)",
                    catatan: "Kloroplas pada tumbuhan hijau mengubah energi cahaya menjadi energi kimia yang bisa kita gunakan."
                },
                skenario: `<p>Mitokondria adalah 'Pembangkit Listrik' (Powerhouse). Kloroplas adalah 'Panel Surya'. Membandingkan bagaimana energi diciptakan dan digunakan dalam sel.</p>`,
                formatif: Array(10).fill({ q: "Organel sel yang berfungsi sebagai tempat respirasi sel adalah...", a: ["Mitokondria", "Ribosom", "Vakuola", "Badan Golgi"], c: 0, e: "Mitokondria menghasilkan ATP (energi)." })
            },
            {
                id: 6,
                title: "Organel Sekresi & Ekskresi",
                tujuan: ["Memahami peran Retikulum Endoplasma dan Ribosom.", "Menjelaskan fungsi Badan Golgi.", "Menganalisis fungsi Lisosom dalam pencernaan seluler."],
                islam: {
                    ayat: "Ø¥ÙÙ†Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø·ÙÙŠÙ‘ÙØ¨ÙŒ ÙŠÙØ­ÙØ¨Ù‘Ù Ø§Ù„Ø·Ù‘ÙÙŠÙ‘ÙØ¨Ù",
                    terjemah: "Sesungguhnya Allah itu baik dan menyukai kebaikan.",
                    catatan: "Sel memiliki mekanisme pembersihan internal melalui Lisosom agar sel tetap bersih (Thoyyib) dari zat sisa berbahaya."
                },
                skenario: `<p>Membahas jalur perakitan protein: Ribosom -> RE -> Badan Golgi -> Vesikel Sekresi. Lisosom sebagai sistem pembuangan sampah.</p>`,
                formatif: Array(10).fill({ q: "Organel yang dijuluki 'kantong pencernaan' adalah...", a: ["Lisosom", "Sentriol", "Nukleolus", "RE Halus"], c: 0, e: "Lisosom berisi enzim hidrolitik untuk merombak zat." })
            },
            {
                id: 7,
                title: "Perbedaan Sel Hewan & Tumbuhan",
                tujuan: ["Identifikasi struktur khusus sel tumbuhan (Dinding sel, Vakuola besar).", "Identifikasi struktur khusus sel hewan (Sentriol).", "Menganalisis perbedaan mekanis antara keduanya."],
                islam: {
                    ayat: "Ø®ÙÙ„ÙÙ‚Ù ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù ÙÙÙ‚ÙØ¯Ù‘ÙØ±ÙÙ‡Ù ØªÙÙ‚Ù’Ø¯ÙÙŠØ±Ù‹Ø§",
                    terjemah: "Dia telah menciptakan segala sesuatu, dan Dia menetapkan ukuran-ukurannya dengan serapi-rapinya. (QS. Al-Furqan: 2)",
                    catatan: "Perbedaan struktur sel hewan dan tumbuhan disesuaikan dengan kebutuhan hidup masing-masing yang unik."
                },
                skenario: `<p>Praktikum virtual: Membandingkan bentuk sel tumbuhan yang tetap (karena dinding sel) dan sel hewan yang fleksibel. Mengamati vakuola sentral pada tumbuhan.</p>`,
                formatif: Array(10).fill({ q: "Struktur yang menyebabkan sel tumbuhan kaku adalah...", a: ["Dinding Sel", "Membran Sel", "Sentriol", "Lisosom"], c: 0, e: "Dinding sel terbuat dari selulosa yang kuat." })
            },
            {
                id: 8,
                title: "Transportasi Membran: Difusi & Osmosis",
                tujuan: ["Membedakan transpor pasif dan aktif.", "Menjelaskan mekanisme osmosis pada sel hewan dan tumbuhan.", "Mengaitkan keseimbangan cairan dengan kesehatan."],
                islam: {
                    ayat: "ÙˆÙØ£ÙÙ†Ø²ÙÙ„Ù’Ù†ÙØ§ Ù…ÙÙ†Ù Ø§Ù„Ø³Ù‘ÙÙ…ÙØ§Ø¡Ù Ù…ÙØ§Ø¡Ù‹ Ø¨ÙÙ‚ÙØ¯ÙØ±Ù",
                    terjemah: "Dan Kami turunkan air dari langit menurut suatu ukuran... (QS. Al-Mu'minun: 18)",
                    catatan: "Keseimbangan cairan (Homeostasis) dalam sel adalah kunci keberlangsungan hidup mahluk."
                },
                skenario: `<p>Eksperimen sederhana: Kentang dalam larutan garam. Menjelaskan mengapa ikan air laut tidak bisa hidup di air tawar secara instan terkait tekanan osmotik sel.</p>`,
                formatif: Array(10).fill({ q: "Perpindahan air melalui membran selektif permeabel disebut...", a: ["Difusi", "Osmosis", "Eksositosis", "Pompa Ion"], c: 1, e: "Osmosis adalah difusi air." })
            }
        ];

        let currentSesi = 1;

        function loadSesi(num) {
            currentSesi = num;
            const data = sesiData[num - 1];
            
            // Update UI Nav
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active'));
            document.getElementById(`nav-${num}`).classList.add('tab-active');
            
            const content = document.getElementById('main-content');
            content.innerHTML = `
                <div class="fade-in space-y-8">
                    <div class="border-b-4 border-emerald-600 pb-2">
                        <h2 class="text-3xl font-black text-slate-800 uppercase tracking-tighter">PERTEMUAN ${data.id}: ${data.title}</h2>
                    </div>

                    <section>
                        <h3 class="text-xl font-bold text-emerald-800 mb-3">A. Tujuan Pembelajaran</h3>
                        <ul class="list-disc ml-6 space-y-1 text-slate-600">
                            ${data.tujuan.map(t => `<li>${t}</li>`).join('')}
                        </ul>
                    </section>

                    <section class="bg-emerald-50 p-6 rounded-2xl border border-emerald-100">
                        <h3 class="text-xl font-bold text-emerald-800 mb-4">B. Nilai Islam & Tadabbur</h3>
                        <p class="arabic" dir="rtl">${data.islam.ayat}</p>
                        <p class="text-sm text-emerald-900 italic mt-2">"${data.islam.terjemah}"</p>
                        <p class="mt-4 text-slate-700 bg-white/50 p-3 rounded-lg text-sm border-l-4 border-emerald-500">${data.islam.catatan}</p>
                    </section>

                    <section>
                        <h3 class="text-xl font-bold text-emerald-800 mb-3 border-b pb-1">C. Skenario Pembelajaran (90 Menit)</h3>
                        <div class="prose prose-emerald max-w-none text-slate-700">
                            ${data.skenario}
                        </div>
                    </section>

                    <section>
                        <h3 class="text-xl font-bold text-slate-800 mb-6 flex items-center">
                            <span class="bg-emerald-600 text-white w-8 h-8 rounded-full flex items-center justify-center mr-2 text-sm">D</span>
                            LATIHAN FORMATIF
                        </h3>
                        <div class="space-y-6">
                            ${data.formatif.map((f, idx) => `
                                <div class="formatif-card p-6" id="q-${idx}">
                                    <p class="font-bold text-slate-800 mb-4">${idx+1}. ${f.q}</p>
                                    <div class="grid md:grid-cols-2 gap-3">
                                        ${f.a.map((opt, oIdx) => `
                                            <button onclick="checkAnswer(${num-1}, ${idx}, ${oIdx}, ${f.c}, '${f.e.replace(/'/g, "\\'")}')" class="option-btn" id="q-${idx}-opt-${oIdx}">
                                                ${opt}
                                            </button>
                                        `).join('')}
                                    </div>
                                    <div id="msg-${idx}" class="hidden mt-4 p-3 rounded-lg text-sm border"></div>
                                </div>
                            `).join('')}
                        </div>
                    </section>
                </div>
            `;
            updateProgress();
            window.scrollTo(0,0);
        }

        function checkAnswer(sIdx, qIdx, oIdx, correct, explanation) {
            const msgBox = document.getElementById(`msg-${qIdx}`);
            const buttons = document.querySelectorAll(`#q-${qIdx} .option-btn`);
            
            buttons.forEach((b, i) => {
                b.disabled = true;
                if(i === correct) b.classList.add('correct');
                if(i === oIdx && i !== correct) b.classList.add('wrong');
            });

            msgBox.classList.remove('hidden');
            if(oIdx === correct) {
                msgBox.className = "mt-4 p-3 rounded-lg text-sm border bg-emerald-50 border-emerald-200 text-emerald-800";
                msgBox.innerHTML = `<strong>Benar!</strong> ${explanation}`;
            } else {
                msgBox.className = "mt-4 p-3 rounded-lg text-sm border bg-red-50 border-red-200 text-red-800";
                msgBox.innerHTML = `<strong>Kurang Tepat.</strong> ${explanation}`;
            }
        }

        function loadSumatif() {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active'));
            document.getElementById('nav-sum').classList.add('tab-active');
            
            const content = document.getElementById('main-content');
            content.innerHTML = `
                <div class="fade-in text-center py-12">
                    <h2 class="text-4xl font-black text-slate-800 mb-4">UJIAN SUMATIF AKHIR</h2>
                    <p class="text-slate-500 mb-8 max-w-md mx-auto">Ujian ini mencakup seluruh materi dari Sesi 1 sampai Sesi 8. Pastikan Anda sudah murojaah seluruh sesi sebelum memulai.</p>
                    
                    <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 text-left max-w-2xl mx-auto">
                        <p class="text-sm font-bold text-emerald-600 mb-2">INSTRUKSI:</p>
                        <ul class="text-sm text-slate-600 list-decimal ml-4 space-y-2 mb-8">
                            <li>Terdiri dari 40 soal pilihan ganda.</li>
                            <li>Waktu pengerjaan disarankan 60 menit.</li>
                            <li>Skor kelulusan minimal adalah 75.</li>
                        </ul>
                        <button onclick="startSumatif()" class="w-full bg-emerald-900 text-white py-4 rounded-2xl font-black text-xl hover:bg-black transition shadow-lg">MULAI UJIAN SEKARANG</button>
                    </div>
                </div>
            `;
        }

        function startSumatif() {
            // Logika Ujian Sumatif bisa dikembangkan dengan menggabungkan semua soal formatif secara acak
            alert("Ujian sedang dipersiapkan... (Fitur ini dapat dikustomisasi lebih lanjut untuk mengacak 80 soal dari seluruh sesi)");
        }

        function updateProgress() {
            const p = Math.round((currentSesi / 8) * 100);
            document.getElementById('progress-indicator').innerText = `Kemajuan: ${p}%`;
        }

        function closeModal() {
            document.getElementById('modal-skor').classList.add('hidden');
        }

        // Jalankan Sesi 1 saat pertama buka
        window.onload = () => loadSesi(1);

    </script>
</body>
</html>