<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul AGB-204: Agribisnis Hidroponik & Akuaponik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background-color: #15803d; /* green-700 */
            color: white;
            border-color: #15803d;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }
        .quiz-option {
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            background-color: #f1f5f9; /* slate-100 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .teacher-note {
            background-color: #fefce8; /* yellow-50 */
            border-left: 4px solid #eab308; /* yellow-500 */
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }
    </style>
</head>
<body class="text-slate-800 text-base">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-green-700">Modul Pembelajaran Interaktif</h1>
            <p class="text-xl text-slate-600 mt-2">AGB-204: Agribisnis Hidroponik & Akuaponik</p>
        </header>

        <nav class="mb-8 flex flex-wrap justify-center gap-2 md:gap-4">
            <button class="tab-btn active w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan1">Pertemuan 1: Manajemen Nutrisi</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan2">Pertemuan 2: Hama & Skala Bisnis</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan3">Pertemuan 3: Pengantar Akuaponik</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan4">Pertemuan 4: Manajemen Akuaponik</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="sumatif">Tes Sumatif</button>
        </nav>

        <main>
            <section id="pertemuan1" class="content-section active">
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-1">Pertemuan 1 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Manajemen Nutrisi Hidroponik Lanjutan</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan pentingnya pH dan PPM (EC/TDS) dalam larutan nutrisi hidroponik.</li>
                                <li>Menggunakan alat ukur pH meter dan TDS/EC meter.</li>
                                <li>Menjelaskan cara menaikkan dan menurunkan pH dan PPM larutan nutrisi.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini adalah wujud dari sifat <strong>`Itqan`</strong> (teliti, presisi, profesional). Setelah belajar membuat nutrisi AB Mix, kini kita belajar menakarnya dengan presisi. Memberikan "makanan" yang tepat dan seimbang untuk tanaman adalah bentuk ikhtiar terbaik kita dalam merawat ciptaan Allah ï·», sebagai wujud rasa syukur atas ilmu yang telah diberikan-Nya.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                            <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <div class="space-y-4">
                                    <p><strong>Langkah 1: Setelah AB Mix, Lalu Apa? (15 Menit)</strong></p>
                                    <p>Bismillah. Pada modul sebelumnya, kita sudah bisa membuat "resep masakan" untuk tanaman, yaitu nutrisi AB Mix. Tapi, sama seperti manusia, setiap tanaman punya selera yang berbeda dan kebutuhan yang berbeda di setiap fase hidupnya. Memberi nutrisi bukan sekadar mencampur, tapi juga menakar dengan tepat. Hari ini kita akan belajar menjadi "ahli gizi" bagi tanaman kita dengan dua alat ukur penting: <strong>pH Meter</strong> dan <strong>TDS/EC Meter (PPM Meter)</strong>.</p>
                                    
                                    <p class="mt-4"><strong>Langkah 2: Memahami PPM & pH (25 Menit)</strong></p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <h4 class="font-bold">PPM: Kepekatan Nutrisi</h4>
                                            <p class="mb-2">PPM (Part per Million) atau EC (Electrical Conductivity) mengukur seberapa pekat larutan nutrisi kita. Analogi sederhana: seberapa manis teh yang kita buat. Sayuran daun seperti selada suka "teh" yang tidak terlalu manis (PPM rendah, sekitar 800-1200 PPM). Tanaman buah seperti tomat suka "teh" yang lebih manis (PPM tinggi, sekitar 1500-2500 PPM).</p>
                                            <img src="https://placehold.co/400x200/dcfce7/15803d?text=TDS/EC+Meter" alt="TDS/EC Meter" class="rounded-lg w-full">
                                        </div>
                                        <div>
                                            <h4 class="font-bold">pH: Kunci Pintu Penyerapan</h4>
                                            <p class="mb-2">pH mengukur tingkat keasaman larutan. Ini sangat krusial! Walaupun nutrisi sudah pekat (PPM tinggi), jika pH-nya tidak tepat, tanaman tidak bisa "memakannya". pH adalah "kunci" yang membuka "pintu" akar agar nutrisi bisa diserap. Untuk sebagian besar tanaman hidroponik, pH idealnya adalah antara <strong>5.5 - 6.5</strong> (sedikit asam).</p>
                                            <img src="https://placehold.co/400x200/e0f2fe/0ea5e9?text=pH+Meter" alt="pH Meter" class="rounded-lg w-full">
                                        </div>
                                    </div>

                                    <p class="mt-4"><strong>Langkah 3: Menjadi "Dokter" Tanaman (20 Menit)</strong></p>
                                    <p>Apa yang dilakukan jika hasil ukur tidak sesuai?</p>
                                    <ul class="list-disc list-inside space-y-2">
                                        <li><strong>PPM terlalu rendah:</strong> Tambahkan larutan pekat AB Mix sedikit demi sedikit, aduk, lalu ukur lagi.</li>
                                        <li><strong>PPM terlalu tinggi:</strong> Tambahkan air baku (air sumur) untuk mengencerkannya.</li>
                                        <li><strong>pH terlalu tinggi (basa):</strong> Tambahkan larutan penurun pH (`pH Down`, biasanya asam fosfat).</li>
                                        <li><strong>pH terlalu rendah (asam):</strong> Tambahkan larutan penaik pH (`pH Up`, biasanya kalium hidroksida).</li>
                                    </ul>
                                    <div class="teacher-note"><p class="font-semibold">Aktivitas Praktik:</p><p>Jika memungkinkan, demonstrasikan secara langsung cara menggunakan TDS meter dan pH meter pada larutan nutrisi. Tunjukkan juga cara menambahkan pH Down/Up dan dampaknya pada angka di alat ukur.</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Ahli Gizi Tanaman</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                            <div>
                                <h4 class="font-bold text-center mb-2">Kondisi Saat Ini</h4>
                                <p class="text-center">Tanaman: <strong class="text-green-700">Selada (Fase Tumbuh)</strong></p>
                                <p class="text-center">Ideal: <strong>pH 6.0 | PPM 1000</strong></p>
                                <p class="text-center mt-4">pH Terukur: <strong id="current-ph" class="text-lg">7.5</strong></p>
                                <p class="text-center">PPM Terukur: <strong id="current-ppm" class="text-lg">600</strong></p>
                            </div>
                            <div>
                                <h4 class="font-bold text-center mb-2">Tindakan Kamu?</h4>
                                <div class="space-y-2" id="nutrition-actions">
                                    <button data-action="ph_down" class="w-full p-2 border rounded-lg hover:bg-slate-100">Tambahkan pH Down</button>
                                    <button data-action="ph_up" class="w-full p-2 border rounded-lg hover:bg-slate-100">Tambahkan pH Up</button>
                                    <button data-action="add_ab" class="w-full p-2 border rounded-lg hover:bg-slate-100">Tambahkan Pekatan AB Mix</button>
                                    <button data-action="add_water" class="w-full p-2 border rounded-lg hover:bg-slate-100">Tambahkan Air Baku</button>
                                </div>
                            </div>
                        </div>
                        <p id="nutrition-feedback" class="mt-4 text-center font-semibold h-8"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Latihan Formatif 1</h2>
                    <div id="quiz1"></div>
                </div>
            </section>
            
            <section id="pertemuan2" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-1">Pertemuan 2 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Pengendalian Hama & Skala Bisnis Hidroponik</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Mengidentifikasi hama umum pada tanaman hidroponik (kutu daun, ulat).</li>
                                <li>Menjelaskan cara membuat pestisida nabati sederhana.</li>
                                <li>Menganalisis potensi bisnis dari hidroponik skala kecil.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini mengajarkan tentang <strong>Ikhtiar dan Tawakkal</strong>. Mengendalikan hama adalah bentuk ikhtiar kita menjaga tanaman. Kita juga belajar tentang <strong>Muamalah</strong> yang baik, yaitu bagaimana hasil panen bisa menjadi sumber rezeki yang halal dan thayyib dengan cara dijual, serta menumbuhkan jiwa wirausaha yang jujur.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                            <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <div class="space-y-4">
                                    <p><strong>Langkah 1: Mengenal "Musuh" Tanaman (20 Menit)</strong></p>
                                    <p>Tanaman hidroponik memang lebih bersih, tapi bukan berarti bebas dari "musuh" atau hama. Hama adalah ujian dalam ikhtiar kita. Mengenali mereka adalah langkah pertama untuk mengatasinya.</p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                        <div>
                                            <h4 class="font-bold">Kutu Daun (Aphids)</h4>
                                            <p class="mb-2 text-sm">Serangga kecil berwarna hijau, hitam, atau putih yang bergerombol di bawah daun dan pucuk. Mereka menghisap cairan tanaman, membuat daun keriting dan layu.</p>
                                            <img src="https://placehold.co/400x200/fecaca/7f1d1d?text=Kutu+Daun+(Aphids)" alt="Kutu Daun" class="rounded-lg w-full">
                                        </div>
                                        <div>
                                            <h4 class="font-bold">Ulat</h4>
                                            <p class="mb-2 text-sm">Biasanya merupakan larva dari kupu-kupu atau ngengat. Sangat rakus memakan daun hingga bolong-bolong. Jika tidak dikendalikan, bisa menghabiskan seluruh tanaman.</p>
                                            <img src="https://placehold.co/400x200/fef08a/854d0e?text=Ulat+Daun" alt="Ulat Daun" class="rounded-lg w-full">
                                        </div>
                                    </div>

                                    <p class="mt-4"><strong>Langkah 2: Senjata Alami - Pestisida Nabati (20 Menit)</strong></p>
                                    <p>Sebagai muslim, kita dianjurkan untuk tidak merusak alam. Maka, kita utamakan menggunakan pestisida alami (nabati) yang ramah lingkungan. Cara membuatnya sangat mudah:</p>
                                    <ol class="list-decimal list-inside space-y-1 ml-4">
                                        <li>Haluskan beberapa siung bawang putih dan beberapa buah cabai rawit.</li>
                                        <li>Campurkan dengan 1 liter air dan sedikit sabun cuci piring (sebagai perekat).</li>
                                        <li>Aduk rata, diamkan semalam, lalu saring.</li>
                                        <li>Masukkan ke dalam botol semprot dan semprotkan ke bagian tanaman yang terkena hama.</li>
                                    </ol>
                                    
                                    <p class="mt-4"><strong>Langkah 3: Dari Hobi Menjadi Berkah - Skala Bisnis (20 Menit)</strong></p>
                                    <p>Hasil panen hidroponik yang melimpah bisa menjadi sumber pemasukan. Ini adalah bagian dari muamalah. Menjual sayuran segar dan sehat ke warga pesantren atau masyarakat sekitar adalah bentuk wirausaha yang mendatangkan berkah.</p>
                                    <p class="font-semibold">Analisis Sederhana (Contoh Selada):</p>
                                    <ul class="list-disc list-inside space-y-1 ml-4 text-sm">
                                        <li>Modal Awal: Rak NFT 100 lubang (misal: Rp 1.500.000)</li>
                                        <li>Biaya per Siklus (30 hari): Bibit, rockwool, nutrisi, listrik (misal: Rp 150.000)</li>
                                        <li>Potensi Panen: 100 tanaman @ 150 gram = 15 kg selada.</li>
                                        <li>Potensi Pendapatan: 15 kg x Rp 20.000/kg = Rp 300.000</li>
                                        <li><strong>Keuntungan per Siklus: Rp 300.000 - Rp 150.000 = Rp 150.000</strong></li>
                                    </ul>
                                    <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Selain dijual langsung, apalagi yang bisa kita lakukan dengan hasil panen hidroponik agar nilainya bertambah?" (Jawaban: dibuat salad, jus, keripik sayur, dll.)</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Hitung Potensi Bisnis</h3>
                     <div class="p-4 border rounded-lg bg-slate-50">
                        <h4 class="font-semibold text-lg mb-2 text-center">Kalkulator Agribisnis Selada</h4>
                        <div>
                            <label for="plant-count-biz" class="block font-medium mb-2">Jumlah Lubang Tanam: <span id="plant-count-biz-val" class="font-bold">100</span></label>
                            <input type="range" id="plant-count-biz" min="20" max="500" value="100" step="10" class="w-full">
                        </div>
                        <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                            <div class="p-2 bg-white rounded"><p class="text-sm">Biaya Produksi</p><strong id="cost-biz" class="text-red-600">Rp 150.000</strong></div>
                            <div class="p-2 bg-white rounded"><p class="text-sm">Potensi Pendapatan</p><strong id="revenue-biz" class="text-blue-600">Rp 300.000</strong></div>
                            <div class="p-2 bg-white rounded"><p class="text-sm">Potensi Keuntungan</p><strong id="profit-biz" class="text-green-600">Rp 150.000</strong></div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Latihan Formatif 2</h2>
                    <div id="quiz2"></div>
                </div>
            </section>
            
            <section id="pertemuan3" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-1">Pertemuan 3 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Pengantar Akuaponik & Komponennya</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">A. Tujuan Pembelajaran (Gabungan)</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan definisi akuaponik sebagai sistem simbiosis mutualisme.</li>
                                <li>Mengidentifikasi 3 komponen biologis utama dalam akuaponik: ikan, bakteri, dan tanaman.</li>
                                <li>Menjelaskan proses Siklus Nitrogen sebagai jantung dari sistem akuaponik.</li>
                                <li>Mengidentifikasi komponen fisik utama dalam sistem akuaponik (kolam, pompa, grow bed, media tanam).</li>
                                <li>Menjelaskan fungsi dari setiap komponen fisik tersebut.</li>
                                <li>Membedakan tiga tipe sistem akuaponik dasar: Media Based, Raft System (Rakit Apung), dan NFT.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">B. Keterkaitan Nilai Islam (Gabungan)</h3>
                            <p>Materi ini adalah bentuk nyata dari <strong>Tadabbur Alam</strong>. Kita diajak merenungkan bagaimana Allah ï·» menciptakan ekosistem yang seimbang di mana "limbah" dari satu makhluk menjadi "rezeki" bagi makhluk lain. Ini mengajarkan kita untuk menghindari sifat <strong>`Israf`</strong> (berlebih-lebihan dan menyia-nyiakan) dengan menciptakan sistem pertanian yang minim limbah.</p>
                            <p class="mt-2">Selain itu, materi ini mengajarkan tentang <strong>`Itqan`</strong> (profesional dan teliti) dalam bekerja. Membangun sebuah sistem membutuhkan pemahaman terhadap fungsi setiap komponen. Seorang muslim didorong untuk melakukan pekerjaannya dengan sebaik-baiknya, tidak asal-asalan, sebagai wujud <strong>`Hikmah`</strong> (kebijaksanaan).</p>
                             <div class="p-4 bg-emerald-50 border-l-4 border-emerald-600 rounded-r-lg text-emerald-900 mt-2">
                                <p class="font-semibold">QS. Al-A'raf (7:31)</p>
                                <p class="italic">"...Makan dan minumlah, tetapi jangan berlebihan. Sungguh, Allah tidak menyukai orang yang berlebih-lebihan."</p>
                            </div>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">C. Skenario Pembelajaran (Gabungan)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti</h4>
                                <div class="space-y-6"> <div>
                                        <p class="mb-2"><strong>Langkah 1: Apa itu Akuaponik?</strong></p>
                                        <p class="mb-2">Bismillah. Pernahkah antum melihat ekosistem di danau atau sungai? Ikan mengeluarkan kotoran, lalu kotoran itu diuraikan oleh makhluk-makhluk kecil tak kasat mata (bakteri) menjadi nutrisi. Nutrisi ini kemudian diserap oleh tumbuhan air di sekitarnya. Hasilnya, air menjadi bersih kembali untuk ikan, dan tumbuhan menjadi subur. Masya Allah, sebuah siklus sempurna!</p>
                                        <p><strong>Akuaponik</strong> adalah teknologi yang meniru siklus sempurna ciptaan Allah ï·» ini. Ia adalah gabungan dari dua kata: <strong>Akuakultur</strong> (memelihara ikan) dan <strong>Hidroponik</strong> (bercocok tanam dengan air). Singkatnya, kita memelihara ikan, dan "limbah" dari ikan kita gunakan sebagai "pupuk" alami untuk menumbuhkan tanaman.</p>
                                    </div>
                                     <div>
                                        <p class="mb-2"><strong>Langkah 2: Tiga Prajurit Tak Terlihat</strong></p>
                                        <p class="mb-2">Sebuah sistem akuaponik memiliki 3 komponen biologis utama yang saling bekerja sama:</p>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center my-4">
                                            <div class="p-3 bg-white rounded-lg border"><strong>1. Ikan</strong><p class="text-sm">Menghasilkan kotoran (amonia) sebagai sumber nutrisi awal.</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><strong>2. Bakteri</strong><p class="text-sm">Mengubah amonia beracun menjadi nitrat yang bermanfaat.</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><strong>3. Tanaman</strong><p class="text-sm">Menyerap nitrat sebagai pupuk, sekaligus membersihkan air untuk ikan.</p></div>
                                        </div>
                                        <p>Tanpa salah satu dari ketiganya, sistem ini akan gagal. Ini mengajarkan kita tentang pentingnya setiap peran dalam sebuah jama'ah.</p>
                                    </div>
                                     <div>
                                        <p class="mb-2"><strong>Langkah 3: Jantung Akuaponik - Siklus Nitrogen</strong></p>
                                        <p class="mb-2">Proses ajaib di mana limbah berbahaya diubah menjadi pupuk bermanfaat disebut <strong>Siklus Nitrogen</strong>. Ini adalah inti dari akuaponik yang wajib kita pahami.</p>
                                        <div class="p-4 bg-white rounded-lg flex justify-center items-center my-4">
                                            <svg width="450" height="150" viewBox="0 0 450 150" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto max-w-lg mx-auto"><text x="225" y="15" text-anchor="middle" font-weight="bold">Siklus Nitrogen dalam Akuaponik</text><g font-size="12" text-anchor="middle"><rect x="10" y="50" width="100" height="50" rx="5" fill="#e0f2fe"/><text x="60" y="70">Kotoran Ikan</text><text x="60" y="85" font-weight="bold" fill="#ef4444">(Amonia)</text></g><line x1="115" y1="75" x2="145" y2="75" stroke="#64748b" stroke-width="2"/><polygon points="145,70 155,75 145,80" fill="#64748b"/><text x="145" y="65" font-size="10">diubah oleh</text><text x="145" y="90" font-size="10">Nitrosomonas</text><g font-size="12" text-anchor="middle"><rect x="160" y="50" width="100" height="50" rx="5" fill="#fef3c7"/><text x="210" y="70">Nitrit</text><text x="210" y="85" font-weight="bold" fill="#f97316">(Masih Beracun)</text></g><line x1="265" y1="75" x2="295" y2="75" stroke="#64748b" stroke-width="2"/><polygon points="295,70 305,75 295,80" fill="#64748b"/><text x="295" y="65" font-size="10">diubah oleh</text><text x="295" y="90" font-size="10">Nitrobacter</text><g font-size="12" text-anchor="middle"><rect x="310" y="50" width="120" height="50" rx="5" fill="#dcfce7"/><text x="370" y="70">Nitrat</text><text x="370" y="85" font-weight="bold" fill="#16a34a">(Pupuk Tanaman)</text></g></svg>
                                        </div>
                                        <ol class="list-decimal list-inside mt-4 space-y-2">
                                            <li>Ikan mengeluarkan kotoran yang mengandung <strong>Amonia (NHâ)</strong>. Amonia ini sangat beracun bagi ikan.</li>
                                            <li>Bakteri jenis pertama, yaitu <i>Nitrosomonas</i>, "memakan" amonia dan mengubahnya menjadi <strong>Nitrit (NOâ)</strong>. Nitrit juga masih beracun.</li>
                                            <li>Bakteri jenis kedua, yaitu <i>Nitrobacter</i>, "memakan" nitrit dan mengubahnya menjadi <strong>Nitrat (NOâ)</strong>. Nah, Nitrat inilah "rezeki" berupa pupuk super yang siap diserap oleh akar tanaman.</li>
                                        </ol>
                                        <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Apa yang akan terjadi jika bakteri di dalam sistem kita mati? (Jawaban: Amonia menumpuk, ikan akan keracunan). Ini menunjukkan betapa pentingnya peran makhluk yang bahkan tidak bisa kita lihat."</p></div>
                                    </div>

                                    <div>
                                        <p class="mb-2"><strong>Langkah 4: "Anatomi" Sistem Akuaponik</strong></p>
                                        <p class="mb-2">Setelah memahami "ruh"-nya (siklus nitrogen), sekarang kita bedah "jasad"-nya. Apa saja komponen fisik yang membangun sebuah sistem akuaponik?</p>
                                        <div class="p-4 bg-white rounded-lg flex justify-center items-center my-4">
                                            <svg width="400" height="200" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto max-w-lg mx-auto"><path d="M50 150 Q100 130 150 150 T250 150 T350 150" stroke="#3b82f6" stroke-width="2" fill="none"/><rect x="10" y="150" width="380" height="40" fill="#bfdbfe"/><text x="200" y="175" text-anchor="middle" font-weight="bold">KOLAM IKAN</text><rect x="50" y="30" width="300" height="60" fill="#bbf7d0" stroke="#16a34a" stroke-width="2"/><text x="200" y="65" text-anchor="middle" font-weight="bold">GROW BED (Wadah Tanaman)</text><path d="M100 140 L100 100 L120 100" stroke="#ef4444" stroke-width="2" fill="none"/><polygon points="120,95 130,100 120,105" fill="#ef4444"/><text x="115" y="125" font-size="12" fill="#ef4444" text-anchor="middle">Pompa</text><path d="M300 90 L300 140 L280 140" stroke="#3b82f6" stroke-width="2" fill="none"/><polygon points="280,145 270,140 280,135" fill="#3b82f6"/><text x="285" y="115" font-size="12" fill="#3b82f6" text-anchor="middle">Gravitasi</text></svg>
                                        </div>
                                        <ul class="list-disc list-inside space-y-2">
                                            <li><strong>Kolam Ikan:</strong> Tempat ikan hidup dan menghasilkan amonia.</li>
                                            <li><strong>Pompa Air:</strong> "Jantung" sistem yang memompa air kaya amonia dari kolam ikan ke wadah tanaman.</li>
                                            <li><strong>Grow Bed:</strong> Wadah berisi media tanam tempat akar tanaman tumbuh dan bakteri baik berkembang biak.</li>
                                            <li><strong>Media Tanam:</strong> Bukan tanah, melainkan bahan inert seperti kerikil, arang, atau `hydroton` yang menjadi "rumah" bagi bakteri dan tempat akar berpegangan.</li>
                                        </ul>
                                    </div>
                                     <div>
                                        <p class="mb-2"><strong>Langkah 5: Tiga Tipe Sistem Dasar</strong></p>
                                        <p class="mb-2">Ada banyak desain akuaponik, tapi semuanya berakar dari tiga tipe dasar ini:</p>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                            <div class="p-3 bg-white rounded-lg border">
                                                <h4 class="font-bold text-center">1. Media Based (Paling Sederhana)</h4>
                                                <p class="text-sm mt-2">Ini sistem yang paling cocok untuk pemula. Air dari kolam dipompa ke `grow bed` yang berisi media (kerikil). Media ini berfungsi sebagai filter dan rumah bakteri sekaligus. Air kemudian kembali ke kolam karena gravitasi. Sistem ini sangat `low-maintenance`.</p>
                                            </div>
                                            <div class="p-3 bg-white rounded-lg border">
                                                 <h4 class="font-bold text-center">2. Raft System (Rakit Apung)</h4>
                                                 <p class="text-sm mt-2">Tanaman diletakkan di atas lembaran styrofoam yang mengapung di atas bak air. Akarnya menjuntai langsung ke dalam air yang kaya nutrisi. Sistem ini sangat bagus untuk tanaman sayuran daun yang butuh banyak air, seperti selada dan kangkung.</p>
                                            </div>
                                            <div class="p-3 bg-white rounded-lg border">
                                                 <h4 class="font-bold text-center">3. Nutrient Film Technique (NFT)</h4>
                                                 <p class="text-sm mt-2">Ini adalah sistem yang biasa kita lihat di hidroponik modern. Tanaman diletakkan di pipa-pipa (gully) dan akarnya dialiri lapisan air tipis (`film`) yang kaya nutrisi secara terus-menerus. Sistem ini sangat efisien dalam penggunaan air.</p>
                                            </div>
                                        </div>
                                         <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Jika kita ingin membuat sistem akuaponik di atap asrama dengan bahan-bahan yang mudah didapat, sistem mana yang paling cocok untuk kita coba pertama kali? Mengapa?"</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif (Bagian 1): Ekosistem Akuaponik</h3>
                     <div class="p-4 border rounded-lg bg-slate-50 h-full">
                        <p class="mb-4 text-center font-semibold">Klik pada komponen untuk melihat perannya!</p>
                        <div class="flex flex-col md:flex-row items-center justify-around w-full max-w-lg mx-auto min-h-[10rem] md:min-h-[8rem] relative" id="ecosystem-sim-p3">
                            <button data-info="Ikan menghasilkan kotoran (amonia) yang menjadi sumber 'pupuk' pertama." class="p-4 bg-blue-200 rounded-lg eco-btn-p3 m-2">Ikan</button>
                            <button data-info="Bakteri baik mengubah amonia beracun menjadi nitrat yang bermanfaat bagi tanaman." class="p-4 bg-yellow-200 rounded-lg eco-btn-p3 m-2">Bakteri</button>
                            <button data-info="Tanaman menyerap nitrat sebagai makanan, sehingga air menjadi bersih kembali untuk ikan." class="p-4 bg-green-200 rounded-lg eco-btn-p3 m-2">Tanaman</button>
                        </div>
                        <p id="eco-info-p3" class="mt-4 text-center h-12 p-2 bg-white rounded-md"></p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif (Bagian 2): Desain Sistemmu</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="mb-4 text-center font-semibold">Pilih tanaman yang ingin kamu tanam, dan lihat sistem apa yang direkomendasikan!</p>
                        <div class="flex justify-center gap-4" id="plant-selector-p3">
                            <button class="plant-choice-p3 bg-green-200 p-3 rounded-lg" data-system="Media Based">Tomat (Berbuah)</button>
                            <button class="plant-choice-p3 bg-green-200 p-3 rounded-lg" data-system="Raft System">Selada (Daun)</button>
                            <button class="plant-choice-p3 bg-green-200 p-3 rounded-lg" data-system="NFT">Stroberi (Komersial)</button>
                        </div>
                        <p id="system-recommendation-p3" class="mt-4 text-center h-16 p-2 bg-white rounded-md font-semibold"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Latihan Formatif 3 (Gabungan)</h2>
                    <div id="quiz3"></div> </div>
            </section>
            
            <section id="pertemuan4" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-1">Pertemuan 4 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Manajemen Sistem Akuaponik</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">A. Tujuan Pembelajaran (Gabungan)</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Mengidentifikasi karakteristik ikan yang baik untuk akuaponik (tahan banting, cepat besar).</li>
                                <li>Mengidentifikasi karakteristik tanaman yang baik untuk akuaponik (sayuran daun).</li>
                                <li>Memahami konsep kepadatan tebar ikan dan pengaruhnya terhadap nutrisi.</li>
                                <li>Menjelaskan tiga parameter kualitas air terpenting: pH, Amonia, dan Suhu.</li>
                                <li>Mengidentifikasi cara-cara sederhana untuk menjaga kualitas air.</li>
                                <li>Menyusun jadwal manajemen harian, mingguan, dan bulanan untuk sistem akuaponik.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">B. Keterkaitan Nilai Islam (Gabungan)</h3>
                            <p>Materi ini mengajarkan prinsip <strong>Keseimbangan (`Tawazun`)</strong> dan <strong>Ilmu sebelum Amal</strong>. Memilih ikan dan tanaman yang "jodoh" adalah kunci keseimbangan sistem. Kita tidak bisa asal mencampur. Ini mengajarkan bahwa dalam setiap tindakan, kita harus berlandaskan ilmu agar hasilnya optimal.</p>
                            <p class="mt-2">Selain itu, manajemen adalah wujud dari <strong>`Istiqomah`</strong> dan <strong>`Amanah`</strong>. Sebuah sistem yang baik tidak akan berjalan tanpa perawatan yang konsisten. Merawat kualitas air dan kesehatan ikan adalah bentuk tanggung jawab kita terhadap makhluk hidup yang kita pelihara, karena setiap makhluk bernyawa yang kita perlakukan dengan baik akan mendatangkan pahala.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-green-800 mb-2">C. Skenario Pembelajaran (Gabungan)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti</h4>
                                <div class="space-y-6">
                                    <div>
                                        <p class="mb-2"><strong>Langkah 1: Memilih "Pekerja" Terbaik - Ikan</strong></p>
                                        <p>Ikan adalah "pabrik pupuk" kita. Tidak semua ikan cocok. Ikan yang baik untuk akuaponik pemula harus memiliki sifat:</p>
                                        <ul class="list-disc list-inside ml-4 my-2">
                                            <li><strong>Tahan Banting:</strong> Tahan terhadap perubahan kualitas air (pH, suhu).</li>
                                            <li><strong>Cepat Besar:</strong> Cepat menghasilkan "limbah" dan bisa cepat dipanen.</li>
                                            <li><strong>Hidup Berkelompok:</strong> Tidak saling serang jika dipelihara dalam jumlah banyak.</li>
                                        </ul>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-center">
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Sangat Direkomendasikan</h4><p class="text-sm mt-1">Nila, Lele, Patin</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Cukup Baik</h4><p class="text-sm mt-1">Gurami, Ikan Mas</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Tidak Disarankan (untuk pemula)</h4><p class="text-sm mt-1">Arwana, Koi (karena lebih sensitif & mahal)</p></div>
                                        </div>
                                        <p class="mt-4"><strong>Kepadatan Tebar:</strong> Jangan terlalu banyak ikan dalam satu kolam! Aturan umumnya adalah 1 kg ikan per 20-40 liter air.</p>
                                        <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Menurut antum, mengapa ikan Lele sangat populer di kalangan pembudidaya akuaponik di Indonesia?"</p></div>
                                    </div>
                                    <div>
                                        <p class="mb-2"><strong>Langkah 2: Memilih "Konsumen" Terbaik - Tanaman</strong></p>
                                        <p>Tanaman adalah "pembersih air" kita. Tanaman yang paling mudah tumbuh di akuaponik adalah <strong>sayuran daun hijau</strong> karena mereka sangat suka nitrat.</p>
                                         <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-center">
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Sangat Mudah</h4><p class="text-sm mt-1">Kangkung, Selada, Pakcoy, Bayam</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Menengah</h4><p class="text-sm mt-1">Daun Mint, Kemangi, Seledri</p></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold">Sulit (butuh nutrisi tambahan)</h4><p class="text-sm mt-1">Tomat, Cabai, Terong</p></div>
                                        </div>
                                        <p class="mt-4">Untuk pemula, mulailah dengan kangkung atau selada. Mereka tumbuh sangat cepat dan perawatannya paling mudah.</p>
                                    </div>

                                    <div>
                                        <p class="mb-2"><strong>Langkah 3: Menjaga "Darah" Sistem - Kualitas Air</strong></p>
                                        <p>Air dalam akuaponik ibarat darah dalam tubuh kita. Jika darahnya kotor, seluruh tubuh akan sakit. Ada 3 parameter utama yang harus kita jaga:</p>
                                        <ul class="list-disc list-inside ml-4 my-2 space-y-2">
                                            <li><strong>pH (Tingkat Keasaman):</strong> Ini yang paling krusial. Ikan, bakteri, dan tanaman, ketiganya menyukai pH yang sedikit asam hingga netral, yaitu antara <strong>6.0 - 7.0</strong>. Jika terlalu asam (di bawah 6) atau terlalu basa (di atas 7.5), bakteri tidak bisa bekerja dan tanaman tidak bisa menyerap nutrisi.</li>
                                            <li><strong>Amonia:</strong> Ini adalah racun. Kadar amonia harus selalu mendekati <strong>0 ppm</strong> (parts per million). Jika kadar amonia naik, itu pertanda bakteri belum bekerja dengan baik.</li>
                                            <li><strong>Suhu:</strong> Sebagian besar ikan air tawar tropis seperti nila dan lele menyukai suhu antara <strong>24-30Â°C</strong>. Suhu yang terlalu dingin atau panas akan membuat ikan stres dan rentan penyakit.</li>
                                        </ul>
                                        <p class="mt-2"><strong>Cara Menjaga:</strong> Untuk pemula, cara termudah adalah dengan rutin mengganti 10-20% air kolam setiap pekan. Ini akan membantu menjaga parameter tetap stabil.</p>
                                    </div>
                                    <div>
                                        <p class="mb-2"><strong>Langkah 4: Jadwal Manajemen</strong></p>
                                        <p>Seperti piket kebersihan, akuaponik butuh jadwal manajemen yang istiqomah.</p>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-sm">
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold text-center">Harian</h4><ul class="list-disc list-inside mt-2"><li>Beri makan ikan (2x sehari)</li><li>Periksa apakah pompa bekerja</li><li>Periksa apakah ada ikan yang sakit/mati</li><li>Periksa apakah ada hama di tanaman</li></ul></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold text-center">Mingguan</h4><ul class="list-disc list-inside mt-2"><li>Cek kadar pH air</li><li>Ganti 10-20% air kolam</li><li>Panen tanaman yang sudah siap</li><li>Bersihkan filter sederhana jika ada</li></ul></div>
                                            <div class="p-3 bg-white rounded-lg border"><h4 class="font-bold text-center">Bulanan</h4><ul class="list-disc list-inside mt-2"><li>Bersihkan pompa dari lumut</li><li>Sortir ukuran ikan jika perlu</li><li>Semaikan bibit baru</li></ul></div>
                                        </div>
                                        <div class="teacher-note"><p class="font-semibold">Aktivitas Kelas:</p><p>Ajak santri membuat jadwal piket sederhana untuk sistem akuaponik Markaz di papan tulis. Tentukan siapa penanggung jawab harian dan mingguan.</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif (Bagian 1): Cek Keseimbangan Sistem</h3>
                     <div class="p-4 border rounded-lg bg-slate-50">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="fish-count-p4" class="block font-medium mb-2">Jumlah Ikan Lele (ekor): <span id="fish-count-val-p4" class="font-bold text-green-600">50</span></label>
                                <input type="range" id="fish-count-p4" min="10" max="200" value="50" class="w-full">
                            </div>
                            <div>
                                <label for="plant-count-p4" class="block font-medium mb-2">Jumlah Tanaman Kangkung (lubang): <span id="plant-count-val-p4" class="font-bold text-green-600">50</span></label>
                                <input type="range" id="plant-count-p4" min="10" max="200" value="50" class="w-full">
                            </div>
                        </div>
                        <p id="balance-status-p4" class="mt-4 text-center h-12 p-2 bg-white rounded-md font-bold text-lg"></p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif (Bagian 2): Cek Kualitas Air</h3>
                     <div class="p-4 border rounded-lg bg-slate-50">
                        <h4 class="font-semibold text-lg mb-2">Uji Air Virtual</h4>
                        <div>
                            <label for="ph-slider-p4" class="block font-medium mb-2">Geser untuk melihat efek pH: <span id="ph-val-p4" class="font-bold">7.0</span></label>
                            <input type="range" id="ph-slider-p4" min="4" max="10" value="7" step="0.2" class="w-full">
                        </div>
                        <div class="grid grid-cols-3 gap-4 mt-4 text-center">
                            <div><p>Ikan</p><p id="ph-fish-p4" class="font-bold text-2xl">ð</p></div>
                            <div><p>Bakteri</p><p id="ph-bacteria-p4" class="font-bold text-2xl">ð</p></div>
                            <div><p>Tanaman</p><p id="ph-plant-p4" class="font-bold text-2xl">ð</p></div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Latihan Formatif 4 (Gabungan)</h2>
                    <div id="quiz4"></div> </div>
            </section>
            
            <section id="sumatif" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Tes Sumatif</h2>
                    <p class="mb-4">Bismillah. Kerjakan soal-soal berikut untuk menguji pemahaman antum terhadap seluruh materi. Semoga Allah ï·» berikan kemudahan.</p>
                </div>
                <div class="card">
                    <div id="quiz-sumatif"></div>
                    <div id="sumatif-result" class="mt-6 text-center hidden">
                        <h3 class="text-xl font-bold">Hasil Tes Sumatif</h3>
                        <p class="text-2xl mt-2">Skor Anda: <span id="sumatif-score" class="font-bold text-green-600">0</span> / <span id="sumatif-total" class="font-bold">0</span></p>
                        <button id="sumatif-retry-btn" class="mt-4 bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-600">Ulangi Tes</button>
                    </div>
                </div>
             </section>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- DATABASE KUIS GABUNGAN ---
        
        const quizzes_file1 = {
            quiz1: [
                { q: "Apa definisi paling tepat dari Akuaponik?", a: ["Menanam tanaman di dalam air", "Memelihara ikan di kolam terpal", "Sistem gabungan memelihara ikan dan menanam tanaman tanpa tanah", "Memberi pupuk kimia pada tanaman air"], correct: 2, explanation: "Akuaponik adalah gabungan Akuakultur (ikan) dan Hidroponik (tanaman tanpa tanah)." },
                { q: "Manakah dari berikut ini yang BUKAN komponen biologis utama dalam akuaponik?", a: ["Ikan", "Bakteri", "Tanaman", "Cacing"], correct: 3, explanation: "Tiga komponen utamanya adalah ikan, bakteri, dan tanaman. Cacing bisa ada, tapi bukan komponen utama." },
                { q: "Apa zat beracun pertama yang dihasilkan dari kotoran ikan?", a: ["Nitrat", "Oksigen", "Amonia", "Nitrit"], correct: 2, explanation: "Kotoran ikan dan sisa pakan akan terurai menjadi Amonia (NHâ) yang beracun." },
                { q: "Bakteri <i>Nitrosomonas</i> memiliki peran mengubah...", a: ["Nitrit menjadi Nitrat", "Amonia menjadi Nitrit", "Nitrat menjadi Amonia", "Amonia menjadi pupuk langsung"], correct: 1, explanation: "Tahap pertama siklus nitrogen adalah Amonia diubah menjadi Nitrit oleh Nitrosomonas." },
                { q: "Apa bentuk nitrogen yang menjadi 'pupuk' utama bagi tanaman?", a: ["Amonia", "Urea", "Nitrit", "Nitrat"], correct: 3, explanation: "Nitrat (NOâ) adalah bentuk nitrogen yang paling mudah diserap oleh akar tanaman." },
            ],
            quiz2: [
                { q: "Komponen fisik yang berfungsi sebagai 'jantung' sistem yang memompa air adalah...", a: ["Grow bed", "Kolam ikan", "Media tanam", "Pompa air"], correct: 3, explanation: "Pompa adalah satu-satunya komponen mekanis yang memastikan air bersirkulasi dari kolam ke tanaman." },
                { q: "Apa fungsi utama dari media tanam seperti kerikil atau `hydroton`?", a: ["Memberi nutrisi pada tanaman", "Menjadi rumah bagi bakteri dan penopang akar", "Membuat air menjadi dingin", "Menjadi makanan ikan"], correct: 1, explanation: "Media tanam bersifat inert (tidak bernutrisi), fungsinya sebagai biofilter (rumah bakteri) dan penyangga akar." },
                { q: "Sistem akuaponik yang paling sederhana dan cocok untuk pemula adalah...", a: ["NFT", "Raft System", "Media Based", "Aeroponik"], correct: 2, explanation: "Sistem Media Based paling mudah dibuat dan dirawat karena media tanamnya berfungsi ganda sebagai filter." },
                { q: "Tanaman seperti selada dan kangkung sangat cocok ditanam pada sistem Rakit Apung karena...", a: ["Akarnya butuh media kering", "Mereka adalah tanaman buah", "Mereka suka banyak air dan akarnya bisa menjuntai", "Mereka tidak butuh bakteri"], correct: 2, explanation: "Raft system menyediakan pasokan air konstan yang sangat disukai sayuran daun." },
                { q: "Ciri khas dari sistem NFT (Nutrient Film Technique) adalah...", a: ["Menggunakan media tanam kerikil tebal", "Tanaman mengapung di atas styrofoam", "Air mengalir dalam lapisan tipis melewati akar tanaman", "Tidak menggunakan pompa"], correct: 2, explanation: "NFT berarti 'lapisan tipis nutrisi', yang menggambarkan aliran air tipis di dalam pipa/gully." },
            ],
            quiz3: [
                { q: "Manakah sifat ikan yang paling penting untuk pemula akuaponik?", a: ["Warnanya indah", "Harganya mahal", "Tahan banting terhadap perubahan kualitas air", "Makannya sedikit"], correct: 2, explanation: "Ikan yang tahan banting lebih toleran terhadap kesalahan kecil yang mungkin dilakukan pemula." },
                { q: "Contoh ikan yang sangat direkomendasikan untuk akuaponik di iklim Indonesia adalah...", a: ["Salmon", "Tuna", "Nila dan Lele", "Ikan badut (Nemo)"], correct: 2, explanation: "Nila dan Lele adalah ikan air tawar yang kuat, cepat besar, dan sudah beradaptasi dengan iklim tropis." },
                { q: "Jenis tanaman yang paling mudah tumbuh dan paling cepat panen dalam sistem akuaponik adalah...", a: ["Wortel dan kentang", "Tomat dan cabai", "Kangkung dan selada", "Pohon mangga"], correct: 2, explanation: "Sayuran daun hijau seperti kangkung dan selada adalah 'pemakan' nitrat yang sangat efisien dan cepat tumbuh." },
                { q: "Tanaman buah seperti tomat dan cabai lebih sulit ditanam di akuaponik karena...", a: ["Tidak suka air", "Butuh nutrisi tambahan selain nitrat (Kalium, Fosfor)", "Akarnya terlalu kecil", "Diserang ikan"], correct: 1, explanation: "Sistem akuaponik kaya akan Nitrogen (untuk daun), tapi seringkali kurang Kalium dan Fosfor yang penting untuk pembungaan dan pembuahan." },
                { q: "Apa yang dimaksud dengan 'kepadatan tebar'?", a: ["Jumlah tanaman per grow bed", "Jumlah pakan yang diberikan", "Jumlah ikan per volume air (misal: per liter)", "Jenis media tanam yang digunakan"], correct: 2, explanation: "Kepadatan tebar adalah rasio antara massa ikan dengan volume air di dalam kolam." },
            ],
            quiz4: [
                { q: "Parameter kualitas air yang paling krusial dan mempengaruhi kerja bakteri serta penyerapan nutrisi tanaman adalah...", a: ["Warna air", "pH (tingkat keasaman)", "Bau air", "Ketinggian air"], correct: 1, explanation: "pH yang tidak tepat (terlalu asam/basa) akan melumpuhkan bakteri dan mengunci nutrisi sehingga tidak bisa diserap tanaman." },
                { q: "Berapa rentang pH ideal untuk sebagian besar sistem akuaponik?", a: ["4.0 - 5.0 (Sangat Asam)", "6.0 - 7.0 (Agak Asam - Netral)", "8.0 - 9.0 (Sangat Basa)", "pH tidak penting"], correct: 1, explanation: "Rentang 6.0-7.0 adalah 'jalan tengah' terbaik di mana ikan, bakteri, dan tanaman bisa hidup berdampingan dengan nyaman." },
                { q: "Aktivitas yang harus dilakukan SETIAP HARI dalam manajemen akuaponik adalah...", a: ["Menguras total kolam", "Memberi makan ikan dan memeriksa pompa", "Memanen tanaman", "Menambah bakteri baru"], correct: 1, explanation: "Memberi makan ikan dan memastikan sirkulasi air (pompa) adalah dua hal vital yang harus diperiksa setiap hari." },
                { q: "Jika hasil tes menunjukkan kadar Amonia tinggi (tidak nol), apa artinya?", a: ["Sistem sudah matang dan stabil", "Tanaman terlalu banyak", "Bakteri nitrifikasi belum bekerja dengan baik", "Ikan kurang makan"], correct: 2, explanation: "Amonia yang tinggi berarti proses penguraian oleh bakteri belum berjalan sempurna. Ini sering terjadi pada sistem yang masih baru." },
                { q: "Tindakan apa yang paling efektif dilakukan secara MINGGUAN untuk menjaga stabilitas air?", a: ["Memberi makan ikan lebih banyak", "Mengganti 10-20% air kolam", "Menambah jumlah tanaman", "Mematikan pompa selama sehari"], correct: 1, explanation: "Penggantian air parsial membantu membuang kelebihan zat yang tidak terurai dan 'mereset' parameter air." },
            ]
        };

        const quizzes = {
            // DARI FILE 2 (HIDROPONIK)
            quiz1: [
                { q: "Apa nama lain dari PPM yang juga mengukur kepekatan nutrisi?", a: ["pH", "EC (Electrical Conductivity)", "Suhu", "Oksigen Terlarut"], correct: 1, explanation: "EC adalah satuan lain untuk mengukur konduktivitas listrik air, yang berhubungan langsung dengan kepekatan nutrisi (PPM)." },
                { q: "Rentang pH ideal untuk sebagian besar tanaman hidroponik adalah...", a: ["4.5 - 5.5", "5.5 - 6.5", "7.0 - 8.0", "8.0 - 9.0"], correct: 1, explanation: "Rentang sedikit asam (5.5 - 6.5) adalah 'sweet spot' di mana penyerapan sebagian besar nutrisi menjadi optimal." },
                { q: "Jika PPM larutan terlalu tinggi, tindakan apa yang harus dilakukan?", a: ["Menambah pekatan AB Mix", "Menambah air baku", "Menambah pH Down", "Menambah pH Up"], correct: 1, explanation: "Menambah air baku akan mengencerkan larutan dan menurunkan nilai PPM." },
                { q: "Tanaman buah seperti tomat membutuhkan tingkat PPM yang...", a: ["Lebih rendah dari selada", "Sama seperti selada", "Lebih tinggi dari selada", "Tidak membutuhkan PPM"], correct: 2, explanation: "Tanaman yang berbuah membutuhkan lebih banyak 'makanan' (nutrisi) untuk memproduksi buah, sehingga PPM-nya harus lebih tinggi." },
                { q: "Apa fungsi utama dari pH dalam larutan hidroponik?", a: ["Memberi warna pada air", "Membunuh semua bakteri", "Mengatur 'terbuka' atau 'tertutupnya' pintu penyerapan nutrisi oleh akar", "Mendinginkan air"], correct: 2, explanation: "pH yang tepat memastikan nutrisi berada dalam bentuk kimia yang dapat diserap oleh akar tanaman." },
            ],
            quiz2: [
                { q: "Hama kecil yang sering bergerombol di bawah daun dan menyebabkan daun keriting adalah...", a: ["Ulat", "Belalang", "Kutu Daun (Aphids)", "Cacing"], correct: 2, explanation: "Kutu daun (aphids) adalah hama penghisap cairan yang sering menyerang pucuk tanaman muda." },
                { q: "Bahan alami yang efektif digunakan sebagai pestisida nabati karena baunya yang menyengat adalah...", a: ["Gula dan Garam", "Bawang putih dan Cabai", "Daun pisang dan Kelapa", "Tepung dan Air"], correct: 1, explanation: "Bawang putih dan cabai memiliki senyawa yang tidak disukai oleh banyak serangga hama." },
                { q: "Apa fungsi sabun cuci piring dalam pembuatan pestisida nabati?", a: ["Sebagai nutrisi tambahan", "Sebagai perekat agar larutan menempel di daun", "Untuk membunuh tanaman", "Agar larutan wangi"], correct: 1, explanation: "Sabun membantu memecah tegangan permukaan air sehingga larutan pestisida bisa menempel lebih baik pada daun." },
                { q: "Dalam analisis bisnis, selisih antara 'Potensi Pendapatan' dan 'Biaya Produksi' disebut...", a: ["Modal", "Kerugian", "Keuntungan (Profit)", "Pajak"], correct: 2, explanation: "Keuntungan adalah pendapatan dikurangi semua biaya yang dikeluarkan." },
                { q: "Mengendalikan hama dengan cara yang tidak merusak lingkungan adalah bentuk...", a: ["Tawakkal tanpa ikhtiar", "Ikhtiar yang bertanggung jawab", "Kepasrahan", "Pemborosan"], correct: 1, explanation: "Menggunakan pestisida nabati adalah bentuk ikhtiar (usaha) kita yang diiringi dengan tanggung jawab terhadap lingkungan." },
            ],
            
            // KUIS GABUNGAN
            quiz3: [
                ...quizzes_file1.quiz1, // Menggabungkan semua soal dari quiz1 (File 1)
                ...quizzes_file1.quiz2  // Menggabungkan semua soal dari quiz2 (File 1)
            ],
            quiz4: [
                ...quizzes_file1.quiz3, // Menggabungkan semua soal dari quiz3 (File 1)
                ...quizzes_file1.quiz4  // Menggabungkan semua soal dari quiz4 (File 1)
            ],

            // TES SUMATIF GABUNGAN (DARI FILE 2)
            'quiz-sumatif': [
                { q: "Alat yang digunakan untuk mengukur kepekatan nutrisi hidroponik adalah...", a: ["pH Meter", "Termometer", "TDS/EC Meter", "Hygrometer"], correct: 2 },
                { q: "Rentang pH ideal untuk penyerapan nutrisi hidroponik adalah...", a: ["4.0 - 5.0", "5.5 - 6.5", "7.0 - 8.0", "8.5 - 9.5"], correct: 1 },
                { q: "Pestisida nabati sederhana dapat dibuat dari...", a: ["Gula dan garam", "Bawang putih dan cabai", "Pupuk AB Mix", "Air aki"], correct: 1 },
                { q: "Tiga komponen biologis yang membentuk simbiosis mutualisme dalam akuaponik adalah...", a: ["Ikan, Cacing, Tanaman", "Ikan, Bakteri, Tanaman", "Siput, Ikan, Bakteri", "Tanaman, Pompa, Ikan"], correct: 1 },
                { q: "Proses pengubahan Amonia (racun) menjadi Nitrat (pupuk) oleh bakteri disebut...", a: ["Fotosintesis", "Siklus Hidrologi", "Siklus Nitrogen", "Siklus Karbon"], correct: 2 },
                { q: "Komponen mekanis yang berfungsi sebagai 'jantung' sistem akuaponik adalah...", a: ["Kolam", "Grow Bed", "Pompa Air", "Media Tanam"], correct: 2 },
                { q: "Untuk pemula, sistem akuaponik yang paling mudah dibuat dan dirawat adalah...", a: ["NFT", "Aeroponik", "Rakit Apung (Raft System)", "Media Based"], correct: 3 },
                { q: "Contoh ikan yang paling 'tahan banting' dan cocok untuk pemula di Indonesia adalah...", a: ["Salmon", "Lele", "Arwana", "Tuna"], correct: 1 },
                { q: "Tindakan memberi makan ikan dan memeriksa pompa idealnya dilakukan dengan frekuensi...", a: ["Bulanan", "Mingguan", "Harian", "Tahunan"], correct: 2 },
                { q: "Meneladani siklus alam ciptaan Allah ï·» untuk mengurangi limbah adalah cara menghindari sifat...", a: ["`Israf` (boros)", "`Ujub` (bangga diri)", "`Hasad` (dengki)", "`Ghibah` (menggunjing)"], correct: 0 }
            ]
        };
        
        function createQuiz(quizId, quizData) {
            const quizContainer = document.getElementById(quizId);
            if(!quizContainer) return;
            quizContainer.innerHTML = '';
            let questionNumber = 0;
            
            quizData.forEach((item, index) => {
                questionNumber++;
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('mb-6');
                questionDiv.innerHTML = `<p class="font-semibold mb-3">${questionNumber}. ${item.q}</p>`;

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('space-y-2');

                item.a.forEach((option, optionIndex) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.classList.add('quiz-option', 'w-full', 'text-left', 'p-3', 'border-2', 'rounded-lg');
                    optionBtn.textContent = option;
                    optionBtn.dataset.index = optionIndex;
                    optionsDiv.appendChild(optionBtn);
                });
                
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('mt-2', 'p-3', 'rounded-lg', 'text-sm', 'hidden', 'bg-yellow-50', 'border', 'border-yellow-200');
                if(item.explanation) {
                    explanationDiv.innerHTML = `<strong>Penjelasan:</strong> ${item.explanation}`;
                }

                questionDiv.appendChild(optionsDiv);
                questionDiv.appendChild(explanationDiv);
                quizContainer.appendChild(questionDiv);
            });
        }
        
        Object.keys(quizzes).forEach(quizId => {
            if (document.getElementById(quizId)) { // Hanya buat kuis jika div-nya ada
                createQuiz(quizId, quizzes[quizId]);
            }
        });
        
        function handleQuizInteraction(containerId, quizData, isSumatif = false) {
            const quizContainer = document.getElementById(containerId);
             if(!quizContainer) return;
            let score = 0;
            
            quizContainer.addEventListener('click', function(e) {
                if (e.target.matches('.quiz-option')) {
                    const questionDiv = e.target.closest('.mb-6');
                    const options = questionDiv.querySelectorAll('.quiz-option');
                    
                    const allQuestionsInContainer = Array.from(quizContainer.children).filter(el => el.classList.contains('mb-6'));
                    const questionIndex = allQuestionsInContainer.indexOf(questionDiv);

                    if (!quizData[questionIndex]) return;
                    
                    const questionData = quizData[questionIndex];
                    const selectedOptionIndex = parseInt(e.target.dataset.index);

                    if (e.target.disabled) return;
                    
                    options.forEach(opt => opt.disabled = true);

                    if (selectedOptionIndex === questionData.correct) {
                        e.target.classList.add('correct');
                        if(isSumatif) score++;
                    } else {
                        e.target.classList.add('incorrect');
                        // Pastikan ada jawaban benar sebelum mencoba menambah kelas
                        if (options[questionData.correct]) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                    
                    const explanation = questionDiv.querySelector('.bg-yellow-50');
                    if (explanation) { // Periksa apakah elemen penjelasan ada
                        if (questionData.explanation) {
                            explanation.innerHTML = `<strong>Penjelasan:</strong> ${questionData.explanation}`;
                            explanation.classList.remove('hidden');
                        } else if (isSumatif) {
                            const correctText = questionData.a[questionData.correct];
                            explanation.innerHTML = `<strong>Jawaban Benar:</strong> ${correctText}`;
                            explanation.classList.remove('hidden');
                        }
                    }

                    if (isSumatif) {
                       const allQuestions = Array.from(quizContainer.children).filter(el => el.classList.contains('mb-6'));
                        let answeredCount = 0;
                        allQuestions.forEach(qDiv => {
                            if (qDiv.querySelector('.quiz-option:disabled')) {
                                answeredCount++;
                            }
                        });

                        if (answeredCount === allQuestions.length) {
                            showSumatifResult(score, quizData.length);
                        }
                    }
                }
            });
        }

        // PEMANGGILAN KUIS DIPERBARUI UNTUK KUIS GABUNGAN
        handleQuizInteraction('quiz1', quizzes.quiz1);
        handleQuizInteraction('quiz2', quizzes.quiz2);
        handleQuizInteraction('quiz3', quizzes.quiz3); // Kuis Gabungan P1+P2
        handleQuizInteraction('quiz4', quizzes.quiz4); // Kuis Gabungan P3+P4
        handleQuizInteraction('quiz-sumatif', quizzes['quiz-sumatif'], true);
        
        function showSumatifResult(score, total) {
            const resultEl = document.getElementById('sumatif-result');
            if(resultEl) {
                document.getElementById('sumatif-score').textContent = score;
                document.getElementById('sumatif-total').textContent = total;
                resultEl.classList.remove('hidden');
            }
        }

        const retryBtn = document.getElementById('sumatif-retry-btn');
        if(retryBtn){
            retryBtn.addEventListener('click', () => {
                createQuiz('quiz-sumatif', quizzes['quiz-sumatif']);
                document.getElementById('sumatif-result').classList.add('hidden');
            });
        }
        
        const tabButtons = document.querySelectorAll('.tab-btn');
        const contentSections = document.querySelectorAll('.content-section');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const target = button.dataset.target;
                
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                contentSections.forEach(section => {
                    if (section.id === target) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });
                window.scrollTo(0, 0); // Selalu scroll ke atas saat ganti tab
            });
        });
        
        // --- SIMULASI GABUNGAN (DENGAN ID UNIK) ---
        
        // P1 Simulation (Hidroponik - dari File 2)
        const nutritionActions = document.getElementById('nutrition-actions');
        if (nutritionActions) {
            nutritionActions.addEventListener('click', (e) => {
                if(e.target.matches('button')) {
                    const action = e.target.dataset.action;
                    const feedbackEl = document.getElementById('nutrition-feedback');
                    if (action === 'ph_down' || action === 'add_ab') {
                        feedbackEl.textContent = 'Tindakan Benar!';
                        feedbackEl.className = 'mt-4 text-center font-semibold h-8 text-green-600';
                    } else {
                        feedbackEl.textContent = 'Tindakan Kurang Tepat. Coba lagi.';
                        feedbackEl.className = 'mt-4 text-center font-semibold h-8 text-red-600';
                    }
                }
            });
        }

        // P2 Simulation (Hidroponik - dari File 2)
        const plantCountBizSlider = document.getElementById('plant-count-biz');
        if(plantCountBizSlider) {
            plantCountBizSlider.addEventListener('input', (e) => {
                const count = parseInt(e.target.value);
                document.getElementById('plant-count-biz-val').textContent = count;
                const cost = count * 1500; 
                const revenue = count * 3000;
                const profit = revenue - cost;
                document.getElementById('cost-biz').textContent = `Rp ${cost.toLocaleString('id-ID')}`;
                document.getElementById('revenue-biz').textContent = `Rp ${revenue.toLocaleString('id-ID')}`;
                document.getElementById('profit-biz').textContent = `Rp ${profit.toLocaleString('id-ID')}`;
            });
        }

        // P3A Simulation (Akuaponik Ekosistem - dari File 1)
        const ecosystemSim3 = document.getElementById('ecosystem-sim-p3');
        if(ecosystemSim3){
            ecosystemSim3.addEventListener('click', e => {
                if(e.target.matches('.eco-btn-p3')){ // Class unik
                    document.getElementById('eco-info-p3').textContent = e.target.dataset.info;
                }
            });
        }
        
        // P3B Simulation (Akuaponik Komponen - dari File 1)
        const plantSelector3 = document.getElementById('plant-selector-p3');
        if(plantSelector3){
            plantSelector3.addEventListener('click', e => {
                 if(e.target.matches('.plant-choice-p3')){ // Class unik
                    const system = e.target.dataset.system;
                    let recommendation = '';
                    if (system === 'Media Based') {
                        recommendation = 'Sistem Media Based direkomendasikan. Sistem ini kokoh dan baik untuk tanaman berbuah yang butuh penyangga akar kuat.';
                    } else if (system === 'Raft System') {
                        recommendation = 'Sistem Rakit Apung (Raft) direkomendasikan. Sangat cocok untuk sayuran daun yang suka banyak air.';
                    } else {
                        recommendation = 'Sistem NFT direkomendasikan. Cocok untuk skala besar dan tanaman bernilai tinggi karena efisiensi airnya.';
                    }
                    document.getElementById('system-recommendation-p3').textContent = recommendation;
                 }
            });
        }

        // P4A Simulation (Akuaponik Ikan/Tanaman - dari File 1)
        const fishCountSlider4 = document.getElementById('fish-count-p4');
        const plantCountSlider4 = document.getElementById('plant-count-p4');
        const balanceStatus4 = document.getElementById('balance-status-p4');

        function updateBalance4() { // Nama fungsi unik
            if(!fishCountSlider4) return;
            const fishCount = parseInt(fishCountSlider4.value);
            const plantCount = parseInt(plantCountSlider4.value);
            document.getElementById('fish-count-val-p4').textContent = fishCount;
            document.getElementById('plant-count-val-p4').textContent = plantCount;

            const ratio = fishCount / plantCount;
            if (ratio > 2) {
                balanceStatus4.textContent = 'Bahaya! Terlalu banyak ikan, nutrisi berlebih, bisa meracuni ikan.';
                balanceStatus4.className = 'mt-4 text-center h-12 p-2 bg-red-100 rounded-md font-bold text-red-700';
            } else if (ratio < 0.5) {
                balanceStatus4.textContent = 'Perhatian! Terlalu sedikit ikan, tanaman bisa kekurangan nutrisi.';
                 balanceStatus4.className = 'mt-4 text-center h-12 p-2 bg-yellow-100 rounded-md font-bold text-yellow-700';
            } else {
                balanceStatus4.textContent = 'Seimbang! Rasio ikan dan tanaman sudah baik.';
                balanceStatus4.className = 'mt-4 text-center h-12 p-2 bg-green-100 rounded-md font-bold text-green-700';
            }
        }
        if(fishCountSlider4) fishCountSlider4.addEventListener('input', updateBalance4);
        if(plantCountSlider4) plantCountSlider4.addEventListener('input', updateBalance4);
        if(balanceStatus4) updateBalance4();

        // P4B Simulation (Akuaponik Manajemen - dari File 1)
        const phSlider4 = document.getElementById('ph-slider-p4');
        if(phSlider4){
            phSlider4.addEventListener('input', e => {
                const ph = parseFloat(e.target.value);
                document.getElementById('ph-val-p4').textContent = ph.toFixed(1);
                const fishEl = document.getElementById('ph-fish-p4');
                const bacEl = document.getElementById('ph-bacteria-p4');
                const plantEl = document.getElementById('ph-plant-p4');

                if (ph >= 6.0 && ph <= 8.0) fishEl.textContent = 'ð';
                else if (ph < 5.0 || ph > 9.0) fishEl.textContent = 'ð­';
                else fishEl.textContent = 'ð';
                
                if (ph >= 6.5 && ph <= 8.5) bacEl.textContent = 'ð';
                else if (ph < 6.0 || ph > 9.0) bacEl.textContent = 'ð­';
                else bacEl.textContent = 'ð';
                
                if (ph >= 5.5 && ph <= 6.5) plantEl.textContent = 'ð';
                 else if (ph > 7.5) plantEl.textContent = 'ð­';
                else plantEl.textContent = 'ð';
            });
            // Jalankan sekali saat load untuk set emoji awal
            phSlider4.dispatchEvent(new Event('input'));
        }

        // Jalankan sekali saat load untuk simulasi P1
        if (document.getElementById('nutrition-feedback')) {
            document.getElementById('nutrition-feedback').textContent = 'Pilih tindakan untuk pH 7.5 dan PPM 600.';
        }
        // Jalankan sekali saat load untuk simulasi P2
        if(plantCountBizSlider) plantCountBizSlider.dispatchEvent(new Event('input'));

    });
    </script>
</body>
</html>