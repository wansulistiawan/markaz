<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul ARB-105: Mufrodat Anggota Tubuh & Pakaian</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- MathJax CDN (Sesuai Aturan) -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Font Awesome untuk Ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts: Noto Sans (Indo) & Amiri (Arab) -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #f3f4f6; /* Gray 100 */
        }
        .font-arab {
            font-family: 'Amiri', serif;
            direction: rtl;
        }
        .tab-active {
            border-bottom: 4px solid #059669; /* Emerald 600 */
            color: #059669;
            font-weight: 700;
            background-color: #ecfdf5;
        }
        .tab-inactive {
            color: #6b7280; /* Gray 500 */
            background-color: white;
        }
        .tab-inactive:hover {
            color: #059669;
            background-color: #f9fafb;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #10b981; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #047857; 
        }
        .teacher-note {
            border-left: 4px solid #d97706; /* Amber 600 */
            background-color: #fffbeb; /* Amber 50 */
        }
        .interactive-area {
            user-select: none;
        }
        .draggable {
            cursor: grab;
        }
        .draggable:active {
            cursor: grabbing;
        }
    </style>
</head>
<body class="text-gray-800 antialiased min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-emerald-700 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-white p-2 rounded-full text-emerald-700">
                    <i class="fas fa-book-open fa-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold leading-tight">ARB-105: Mufrodat 2</h1>
                    <p class="text-xs text-emerald-100">Anggota Tubuh & Pakaian (SMP/SMA Islam)</p>
                </div>
            </div>
            <div class="hidden md:block text-right">
                <p class="text-sm font-semibold">Total Pertemuan: 8 Sesi</p>
                <p class="text-xs opacity-80">Manhaj Salaf Ahlussunnah wal Jamaah</p>
            </div>
        </div>
        
        <!-- NAVIGATION TABS -->
        <nav class="bg-white shadow-sm overflow-x-auto">
            <div class="max-w-7xl mx-auto flex">
                <button onclick="switchTab('tab1')" id="btn-tab1" class="tab-active flex-1 py-4 px-6 text-center text-sm font-medium focus:outline-none transition-colors whitespace-nowrap">
                    Pertemuan 1-2<br><span class="text-xs font-normal">Kepala & Wajah</span>
                </button>
                <button onclick="switchTab('tab2')" id="btn-tab2" class="tab-inactive flex-1 py-4 px-6 text-center text-sm font-medium focus:outline-none transition-colors whitespace-nowrap">
                    Pertemuan 3-4<br><span class="text-xs font-normal">Badan & Organ</span>
                </button>
                <button onclick="switchTab('tab3')" id="btn-tab3" class="tab-inactive flex-1 py-4 px-6 text-center text-sm font-medium focus:outline-none transition-colors whitespace-nowrap">
                    Pertemuan 5-6<br><span class="text-xs font-normal">Pakaian Dasar</span>
                </button>
                <button onclick="switchTab('tab4')" id="btn-tab4" class="tab-inactive flex-1 py-4 px-6 text-center text-sm font-medium focus:outline-none transition-colors whitespace-nowrap">
                    Pertemuan 7-8<br><span class="text-xs font-normal">Aksesoris & Adab</span>
                </button>
                <button onclick="switchTab('tab5')" id="btn-tab5" class="tab-inactive flex-1 py-4 px-6 text-center text-sm font-medium focus:outline-none transition-colors whitespace-nowrap border-l border-gray-200 bg-red-50 text-red-600 hover:bg-red-100">
                    Tes Sumatif<br><span class="text-xs font-normal">Evaluasi Akhir</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- MAIN CONTENT CONTAINER -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- TAB 1: PERTEMUAN 1-2 (Kepala & Wajah) -->
        <section id="tab1" class="space-y-8 animate-fade-in block">
            <!-- RMP HEADER -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-emerald-50 px-6 py-4 border-b border-emerald-100 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-emerald-800">Pertemuan 1 & 2: Anggota Tubuh Bagian Atas</h2>
                    <span class="bg-emerald-200 text-emerald-800 text-xs px-3 py-1 rounded-full font-semibold">Durasi: 2 x 90 Menit</span>
                </div>
                
                <div class="p-6 space-y-6">
                    <!-- A. Tujuan Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">A. Tujuan Pembelajaran</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 ml-2">
                            <li>Santri mampu melafalkan 10 kosakata baru terkait kepala dan wajah dengan makhraj yang benar.</li>
                            <li>Santri mampu menunjuk anggota tubuh sendiri berdasarkan instruksi bahasa Arab.</li>
                            <li>Santri memahami konsep syukur atas penciptaan fisik yang sempurna.</li>
                            <li>Santri mampu menulis kosakata <i>Ras'un</i>, <i>Wajhun</i>, <i>Ainun</i>, dll dengan imla' yang tepat.</li>
                        </ul>
                    </div>

                    <!-- B. Keterkaitan Nilai Islam -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">B. Keterkaitan Nilai Islam: Syukur Penciptaan</h3>
                        <p class="text-gray-600 mb-4 leading-relaxed">
                            Allah menciptakan manusia dalam bentuk yang sebaik-baiknya (Ahsanu Taqwim). Mempelajari nama-nama anggota tubuh dalam bahasa Arab bukan sekadar menghafal kata, melainkan sarana untuk mentadabburi kebesaran Allah Sang Khaliq. Setiap organ memiliki fungsi spesifik yang menunjukkan kebijaksanaan Pencipta.
                        </p>
                        <div class="bg-emerald-50 border-l-4 border-emerald-600 p-4 rounded-r-lg">
                            <p class="font-arab text-2xl text-right mb-2 leading-loose text-emerald-900">
                                لَقَدْ خَلَقْنَا ٱلْإِنسَـٰنَ فِىٓ أَحْسَنِ تَقْوِيمٍۢ
                            </p>
                            <p class="text-sm text-gray-700 italic">
                                "Sesungguhnya Kami telah menciptakan manusia dalam bentuk yang sebaik-baiknya." (QS. At-Tin: 4)
                            </p>
                        </div>
                    </div>

                    <!-- D. Penilaian Modul (Khusus Pertemuan 1) -->
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                        <h3 class="text-md font-bold text-blue-800 mb-2">D. Penilaian Modul (Overview)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="bg-white p-3 rounded shadow-sm">
                                <span class="font-bold block text-blue-600">1. Sikap (Adab)</span>
                                Keseriusan dalam majelis, adab menjawab salam, dan doa.
                            </div>
                            <div class="bg-white p-3 rounded shadow-sm">
                                <span class="font-bold block text-blue-600">2. Pengetahuan</span>
                                Tes formatif harian dan tes sumatif akhir modul.
                            </div>
                            <div class="bg-white p-3 rounded shadow-sm">
                                <span class="font-bold block text-blue-600">3. Keterampilan</span>
                                Kemampuan menunjuk anggota tubuh dan pelafalan (Kalam).
                            </div>
                        </div>
                    </div>

                    <!-- C. Skenario Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">C. Skenario Pembelajaran</h3>
                        
                        <!-- Teacher Note Box -->
                        <div class="teacher-note p-4 rounded mb-6">
                            <h4 class="font-bold text-amber-800 mb-1"><i class="fas fa-lightbulb mr-2"></i>Poin Diskusi Guru</h4>
                            <p class="text-sm text-amber-900">
                                Mulailah dengan menunjuk wajah sendiri dan bertanya "Ma hadza?". Gunakan metode TPR (Total Physical Response) di mana santri harus menyentuh bagian tubuh mereka saat Guru menyebutkan kata bahasa Arabnya. Hindari penerjemahan langsung di awal, biarkan asosiasi visual bekerja.
                            </p>
                        </div>

                        <!-- Materi Utama -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                            <div class="space-y-6">
                                <h4 class="font-bold text-gray-700">Kosakata Inti (Mufradat):</h4>
                                <div class="overflow-hidden bg-white border rounded-lg shadow-sm">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Arab</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Latin</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Arti</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <tr><td class="px-6 py-4 font-arab text-xl">رَأْسٌ</td><td class="px-6 py-4">Ra'sun</td><td class="px-6 py-4">Kepala</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">شَعْرٌ</td><td class="px-6 py-4">Sya'run</td><td class="px-6 py-4">Rambut</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">وَجْهٌ</td><td class="px-6 py-4">Wajhun</td><td class="px-6 py-4">Wajah</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">عَيْنٌ</td><td class="px-6 py-4">'Ainun</td><td class="px-6 py-4">Mata</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">أَنْفٌ</td><td class="px-6 py-4">Anfun</td><td class="px-6 py-4">Hidung</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">فَمٌ</td><td class="px-6 py-4">Famun</td><td class="px-6 py-4">Mulut</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">أُذُنٌ</td><td class="px-6 py-4">Udzunun</td><td class="px-6 py-4">Telinga</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p class="text-sm text-gray-600 mt-2">
                                    <strong>Analogi:</strong> Bayangkan 'Ainun (Mata) seperti mata air yang jernih. Bayangkan Famun (Mulut) harus dijaga seperti menjaga pintu rumah (agar tidak masuk/keluar hal buruk).
                                </p>
                            </div>
                            
                            <!-- Ilustrasi Visual (SVG) -->
                            <div class="bg-white p-4 rounded-lg shadow border border-gray-200 flex flex-col items-center">
                                <h4 class="font-bold text-gray-700 mb-4">Visualisasi: Wajah Manusia</h4>
                                <svg width="250" height="300" viewBox="0 0 200 250" class="mx-auto">
                                    <!-- Head -->
                                    <ellipse cx="100" cy="110" rx="70" ry="90" fill="#fde6d3" stroke="#333" stroke-width="2"/>
                                    <!-- Hair -->
                                    <path d="M50 80 Q100 20 150 80 Q160 50 140 30 Q100 0 60 30 Q40 50 50 80" fill="#333"/>
                                    <!-- Eyes -->
                                    <ellipse cx="75" cy="100" rx="10" ry="6" fill="#fff" stroke="#333"/>
                                    <circle cx="75" cy="100" r="3" fill="#000"/>
                                    <ellipse cx="125" cy="100" rx="10" ry="6" fill="#fff" stroke="#333"/>
                                    <circle cx="125" cy="100" r="3" fill="#000"/>
                                    <!-- Nose -->
                                    <path d="M100 100 L95 130 L105 130 Z" fill="#e0c0a0" stroke="none"/>
                                    <path d="M95 130 Q100 140 105 130" fill="none" stroke="#333"/>
                                    <!-- Mouth -->
                                    <path d="M80 150 Q100 170 120 150" fill="none" stroke="#333" stroke-width="2"/>
                                    <!-- Ears -->
                                    <path d="M30 110 Q25 90 35 100" fill="#fde6d3" stroke="#333"/>
                                    <path d="M170 110 Q175 90 165 100" fill="#fde6d3" stroke="#333"/>
                                    <!-- Labels (Interactive placeholder style) -->
                                    <line x1="170" y1="50" x2="140" y2="40" stroke="#059669" stroke-width="2"/>
                                    <text x="175" y="55" class="text-xs font-bold fill-emerald-700">Rambut (Sya'run)</text>
                                </svg>
                                <p class="text-xs text-gray-500 mt-2 text-center">Ilustrasi Wajah Sederhana untuk Asosiasi</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- INTERACTIVE SIMULATIONS CARD -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Simulation 1: Interactive Face Map -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-hand-pointer text-emerald-500 mr-2"></i> Simulasi 1: Peta Wajah
                    </h3>
                    <p class="text-sm text-gray-600 mb-4">Klik pada bagian wajah untuk melihat nama bahasa Arabnya.</p>
                    <div class="relative bg-gray-50 border rounded-lg h-64 flex justify-center items-center overflow-hidden">
                        <!-- Simplified Interactive SVG -->
                        <svg viewBox="0 0 200 200" class="h-56 cursor-pointer">
                            <g onclick="showVocab('Ra\'sun (Kepala/Rambut)', 'رَأْسٌ / شَعْرٌ')">
                                <circle cx="100" cy="100" r="80" fill="#ffe0bd"/>
                                <path d="M40 80 Q100 20 160 80" fill="#4a3b2a"/> 
                            </g>
                            <g onclick="showVocab('Ainun (Mata)', 'عَيْنٌ')">
                                <circle cx="70" cy="90" r="8" fill="white"/>
                                <circle cx="70" cy="90" r="3" fill="black"/>
                                <circle cx="130" cy="90" r="8" fill="white"/>
                                <circle cx="130" cy="90" r="3" fill="black"/>
                            </g>
                            <g onclick="showVocab('Anfun (Hidung)', 'أَنْفٌ')">
                                <polygon points="100,90 90,120 110,120" fill="#eac09a"/>
                            </g>
                            <g onclick="showVocab('Famun (Mulut)', 'فَمٌ')">
                                <ellipse cx="100" cy="140" rx="15" ry="5" fill="#d65a5a"/>
                            </g>
                        </svg>
                        <div id="vocab-display-1" class="absolute bottom-2 bg-black/70 text-white px-4 py-2 rounded-full text-center hidden">
                            <span id="vocab-arab-1" class="block font-arab text-xl"></span>
                            <span id="vocab-latin-1" class="text-sm"></span>
                        </div>
                    </div>
                </div>

                <!-- Simulation 2: Word Match -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-random text-emerald-500 mr-2"></i> Simulasi 2: Pasangkan Kata
                    </h3>
                    <p class="text-sm text-gray-600 mb-4">Tarik garis imajiner dengan mengklik pasangan yang benar.</p>
                    <div class="grid grid-cols-2 gap-4 text-center" id="match-game-1">
                        <!-- Generated by JS -->
                    </div>
                    <div id="match-feedback-1" class="mt-2 text-center text-sm font-bold min-h-[20px]"></div>
                </div>
            </div>

            <!-- FORMATIVE ASSESSMENT CARD -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl text-gray-800">Latihan Formatif: Pertemuan 1-2</h3>
                    <span class="text-sm text-gray-500">10 Soal Pilihan Ganda</span>
                </div>
                <div id="quiz-container-1" class="space-y-6">
                    <!-- Quiz loaded by JS -->
                </div>
                <button onclick="checkQuiz(1)" class="mt-6 w-full bg-emerald-600 text-white py-3 rounded-lg font-bold hover:bg-emerald-700 transition shadow-lg">
                    Cek Jawaban
                </button>
                <div id="quiz-result-1" class="mt-4 hidden p-4 bg-gray-100 rounded-lg text-center"></div>
            </div>
        </section>

        <!-- TAB 2: PERTEMUAN 3-4 (Badan & Organ) -->
        <section id="tab2" class="hidden space-y-8 animate-fade-in">
            <!-- RMP HEADER -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-emerald-50 px-6 py-4 border-b border-emerald-100 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-emerald-800">Pertemuan 3 & 4: Anggota Tubuh Bagian Bawah & Organ</h2>
                    <span class="bg-emerald-200 text-emerald-800 text-xs px-3 py-1 rounded-full font-semibold">Durasi: 2 x 90 Menit</span>
                </div>
                <div class="p-6 space-y-6">
                    <!-- A. Tujuan Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">A. Tujuan Pembelajaran</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 ml-2">
                            <li>Santri menghafal kosakata tangan, kaki, perut, dada, dan organ vital (jantung/hati).</li>
                            <li>Santri memahami fungsi organ dalam perspektif ibadah (tangan untuk sedekah, kaki ke masjid).</li>
                            <li>Santri mampu merangkai kalimat sederhana: "Hada yadi" (Ini tanganku).</li>
                        </ul>
                    </div>

                    <!-- B. Keterkaitan Nilai Islam -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">B. Keterkaitan Nilai Islam: Saksi di Hari Kiamat</h3>
                        <p class="text-gray-600 mb-4">
                            Anggota tubuh kita bukan milik kita sepenuhnya, melainkan titipan yang akan dimintai pertanggungjawaban. Tangan dan kaki akan bersaksi atas apa yang kita lakukan di dunia.
                        </p>
                        <div class="bg-emerald-50 border-l-4 border-emerald-600 p-4 rounded-r-lg">
                            <p class="font-arab text-2xl text-right mb-2 leading-loose text-emerald-900">
                                ٱلْيَوْمَ نَخْتِمُ عَلَىٰٓ أَفْوَٰهِهِمْ وَتُكَلِّمُنَآ أَيْدِيهِمْ وَتَشْهَدُ أَرْجُلُهُم بِمَا كَانُوا۟ يَكْسِبُونَ
                            </p>
                            <p class="text-sm text-gray-700 italic">
                                "Pada hari ini Kami tutup mulut mereka; dan berkatalah kepada Kami tangan mereka dan memberi kesaksian kaki mereka terhadap apa yang dahulu mereka usahakan." (QS. Yasin: 65)
                            </p>
                        </div>
                    </div>

                    <!-- C. Skenario Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">C. Skenario Pembelajaran</h3>
                         <div class="teacher-note p-4 rounded mb-6">
                            <h4 class="font-bold text-amber-800 mb-1"><i class="fas fa-lightbulb mr-2"></i>Poin Diskusi Guru</h4>
                            <p class="text-sm text-amber-900">
                                Saat mengajarkan kata 'Yadun' (Tangan), ingatkan santri tentang adab tangan kanan untuk makan dan hal baik, serta tangan kiri untuk istinja. Ini mengintegrasikan Fiqih ke dalam pelajaran bahasa.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                             <div class="space-y-6">
                                <h4 class="font-bold text-gray-700">Kosakata Inti:</h4>
                                <div class="bg-white border rounded-lg shadow-sm">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <tr><td class="px-6 py-4 font-arab text-xl">يَدٌ</td><td class="px-6 py-4">Yadun</td><td class="px-6 py-4">Tangan</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">رِجْلٌ</td><td class="px-6 py-4">Rijlun</td><td class="px-6 py-4">Kaki</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">صَدْرٌ</td><td class="px-6 py-4">Shadrun</td><td class="px-6 py-4">Dada</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">بَطْنٌ</td><td class="px-6 py-4">Bathnun</td><td class="px-6 py-4">Perut</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">قَلْبٌ</td><td class="px-6 py-4">Qalbun</td><td class="px-6 py-4">Jantung/Hati</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">ظَهْرٌ</td><td class="px-6 py-4">Zhahrun</td><td class="px-6 py-4">Punggung</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- External Image Fallback Style -->
                            <div class="bg-gray-100 p-4 rounded-lg flex flex-col items-center justify-center border-2 border-dashed border-gray-300">
                                <i class="fas fa-child text-6xl text-gray-400 mb-4"></i>
                                <p class="font-bold text-gray-600">[Gambar Anatomi Tubuh Manusia]</p>
                                <p class="text-xs text-gray-500 mt-2">Sumber: Freepik/VectorStock (Ilustrasi Edukatif)</p>
                                <p class="text-sm text-gray-600 mt-4 text-center px-4">
                                    Gunakan poster anatomi di kelas. Tunjuk bagian "Shadrun" dan jelaskan bahwa di dalamnya ada "Qalbun" yang merupakan tempat niat.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SIMULATIONS & QUIZ TAB 2 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Sim 3: Organ Sort -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4"><i class="fas fa-boxes text-emerald-500 mr-2"></i> Simulasi 1: Atas atau Bawah?</h3>
                    <p class="text-sm text-gray-600 mb-4">Kelompokkan anggota tubuh ke kotak Bagian Atas (Pusar ke atas) atau Bagian Bawah.</p>
                    <div id="sorting-game-2" class="space-y-4">
                        <div class="flex justify-center space-x-2 mb-4">
                            <span class="draggable bg-emerald-100 px-3 py-1 rounded cursor-move" draggable="true" ondragstart="drag(event)" id="drag-yad">Yadun</span>
                            <span class="draggable bg-emerald-100 px-3 py-1 rounded cursor-move" draggable="true" ondragstart="drag(event)" id="drag-rijl">Rijlun</span>
                            <span class="draggable bg-emerald-100 px-3 py-1 rounded cursor-move" draggable="true" ondragstart="drag(event)" id="drag-ras">Ra'sun</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4 h-32">
                            <div class="border-2 border-dashed border-blue-300 rounded bg-blue-50 flex flex-col items-center justify-center p-2 text-xs text-blue-400" ondrop="drop(event, 'upper')" ondragover="allowDrop(event)">
                                Zona Atas
                            </div>
                            <div class="border-2 border-dashed border-green-300 rounded bg-green-50 flex flex-col items-center justify-center p-2 text-xs text-green-400" ondrop="drop(event, 'lower')" ondragover="allowDrop(event)">
                                Zona Bawah
                            </div>
                        </div>
                        <p id="sort-feedback" class="text-center text-sm font-bold h-6"></p>
                    </div>
                </div>

                <!-- Sim 4: Flashcards -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4"><i class="fas fa-layer-group text-emerald-500 mr-2"></i> Simulasi 2: Kartu Hafalan</h3>
                    <div class="h-48 w-full perspective-1000 group cursor-pointer" onclick="flipCard(this)">
                        <div class="relative w-full h-full transition-all duration-500 transform-style-3d bg-emerald-600 rounded-xl shadow-lg flex items-center justify-center text-white" id="flashcard-front">
                            <div class="text-center">
                                <i class="fas fa-sync mb-2 opacity-50"></i>
                                <h4 class="text-3xl font-arab">قَلْبٌ</h4>
                                <p class="text-sm mt-2">Klik untuk membalik</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-between">
                         <button onclick="prevCard()" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300"><i class="fas fa-chevron-left"></i></button>
                         <button onclick="nextCard()" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- QUIZ 2 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl text-gray-800">Latihan Formatif: Pertemuan 3-4</h3>
                    <span class="text-sm text-gray-500">10 Soal Pilihan Ganda</span>
                </div>
                <div id="quiz-container-2" class="space-y-6"></div>
                <button onclick="checkQuiz(2)" class="mt-6 w-full bg-emerald-600 text-white py-3 rounded-lg font-bold hover:bg-emerald-700 transition shadow-lg">Cek Jawaban</button>
                <div id="quiz-result-2" class="mt-4 hidden p-4 bg-gray-100 rounded-lg text-center"></div>
            </div>
        </section>

        <!-- TAB 3: PERTEMUAN 5-6 (Pakaian Dasar) -->
        <section id="tab3" class="hidden space-y-8 animate-fade-in">
             <!-- RMP HEADER -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-emerald-50 px-6 py-4 border-b border-emerald-100 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-emerald-800">Pertemuan 5 & 6: Pakaian Dasar & Menutup Aurat</h2>
                    <span class="bg-emerald-200 text-emerald-800 text-xs px-3 py-1 rounded-full font-semibold">Durasi: 2 x 90 Menit</span>
                </div>
                <div class="p-6 space-y-6">
                    <!-- A. Tujuan Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">A. Tujuan Pembelajaran</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 ml-2">
                            <li>Santri mengenal nama-nama pakaian standar: Baju, Celana, Kemeja, Peci/Kerudung.</li>
                            <li>Santri memahami fungsi pakaian sebagai penutup aurat dan perhiasan.</li>
                            <li>Santri dapat membedakan istilah untuk pakaian laki-laki dan perempuan.</li>
                        </ul>
                    </div>

                    <!-- B. Keterkaitan Nilai Islam -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">B. Keterkaitan Nilai Islam: Pakaian Taqwa</h3>
                        <p class="text-gray-600 mb-4">
                            Pakaian adalah nikmat Allah untuk menutup aurat dan memperindah diri. Namun, pakaian terbaik adalah pakaian taqwa (akhlak mulia).
                        </p>
                        <div class="bg-emerald-50 border-l-4 border-emerald-600 p-4 rounded-r-lg">
                            <p class="font-arab text-2xl text-right mb-2 leading-loose text-emerald-900">
                                يَـٰبَنِىٓ ءَادَمَ قَدْ أَنزَلْنَا عَلَيْكُمْ لِبَاسًا يُوَٰرِى سَوْءَٰتِكُمْ وَرِيشًا ۖ وَلِبَاسُ ٱلتَّقْوَىٰ ذَٰلِكَ خَيْرٌ
                            </p>
                            <p class="text-sm text-gray-700 italic">
                                "Hai anak Adam, sesungguhnya Kami telah menurunkan kepadamu pakaian untuk menutup auratmu dan pakaian indah untuk perhiasan. Dan pakaian takwa itulah yang paling baik." (QS. Al-A'raf: 26)
                            </p>
                        </div>
                    </div>
                     <!-- C. Skenario Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">C. Skenario Pembelajaran</h3>
                         <div class="teacher-note p-4 rounded mb-6">
                            <h4 class="font-bold text-amber-800 mb-1"><i class="fas fa-lightbulb mr-2"></i>Poin Diskusi Guru</h4>
                            <p class="text-sm text-amber-900">
                                Jelaskan perbedaan <i>Tsaubun</i> (pakaian umum/gamis) dan <i>Qamishun</i> (kemeja). Tekankan pada santri putri tentang <i>Khimarun</i> (kerudung) dan <i>Jilbabun</i> (baju kurung longgar). Diskusikan batasan aurat laki-laki dan perempuan.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                             <div class="space-y-6">
                                <h4 class="font-bold text-gray-700">Kosakata Inti:</h4>
                                <div class="bg-white border rounded-lg shadow-sm">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <tr><td class="px-6 py-4 font-arab text-xl">ثَوْبٌ</td><td class="px-6 py-4">Tsaubun</td><td class="px-6 py-4">Baju/Gamis</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">قَمِيْصٌ</td><td class="px-6 py-4">Qamishun</td><td class="px-6 py-4">Kemeja</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">سِرْوَالٌ</td><td class="px-6 py-4">Sirwalun</td><td class="px-6 py-4">Celana</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">قَلَنْسُوَةٌ</td><td class="px-6 py-4">Qalansuwah</td><td class="px-6 py-4">Peci</td></tr>
                                            <tr><td class="px-6 py-4 font-arab text-xl">حِذَاءٌ</td><td class="px-6 py-4">Hidzaun</td><td class="px-6 py-4">Sepatu</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow border border-gray-200 flex flex-col items-center justify-center">
                                 <!-- SVG Icon Shirt -->
                                <svg width="150" height="150" viewBox="0 0 100 100">
                                    <path d="M20 20 L40 10 L60 10 L80 20 L90 40 L80 50 L75 45 L75 90 L25 90 L25 45 L20 50 L10 40 Z" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2"/>
                                    <path d="M40 10 Q50 25 60 10" fill="none" stroke="#1d4ed8" stroke-width="2"/>
                                    <circle cx="50" cy="30" r="2" fill="white"/>
                                    <circle cx="50" cy="40" r="2" fill="white"/>
                                    <circle cx="50" cy="50" r="2" fill="white"/>
                                </svg>
                                <p class="text-xl font-arab text-blue-800 mt-2">قَمِيْصٌ</p>
                                <p class="text-sm text-gray-500">Qamishun (Kemeja)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SIMULATION & QUIZ TAB 3 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Sim 5: Dress Up Text -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4"><i class="fas fa-tshirt text-emerald-500 mr-2"></i> Simulasi 1: Pilih Pakaian</h3>
                    <p class="text-sm text-gray-600 mb-4">Pilih kata yang tepat untuk gambar yang muncul (Imajinasi).</p>
                    <div class="text-center p-4 bg-gray-50 rounded mb-4">
                        <span id="clothing-icon" class="text-6xl text-purple-600"><i class="fas fa-shoe-prints"></i></span>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="checkCloth('Hidzaun')" class="bg-white border hover:bg-emerald-50 py-2 rounded">Hidzaun</button>
                        <button onclick="checkCloth('Qalansuwah')" class="bg-white border hover:bg-emerald-50 py-2 rounded">Qalansuwah</button>
                        <button onclick="checkCloth('Sirwalun')" class="bg-white border hover:bg-emerald-50 py-2 rounded">Sirwalun</button>
                        <button onclick="checkCloth('Tsaubun')" class="bg-white border hover:bg-emerald-50 py-2 rounded">Tsaubun</button>
                    </div>
                    <p id="cloth-feedback" class="text-center mt-2 font-bold"></p>
                </div>

                <!-- Sim 6: Scramble -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="font-bold text-gray-800 mb-4"><i class="fas fa-puzzle-piece text-emerald-500 mr-2"></i> Simulasi 2: Susun Kata</h3>
                    <p class="text-sm text-gray-600 mb-2">Susun huruf menjadi kata: <b>CELANA</b></p>
                    <div class="flex justify-center space-x-2 text-2xl font-arab bg-gray-100 p-4 rounded mb-2">
                         <span class="p-2 bg-white border rounded">ل</span>
                         <span class="p-2 bg-white border rounded">ا</span>
                         <span class="p-2 bg-white border rounded">و</span>
                         <span class="p-2 bg-white border rounded">ر</span>
                         <span class="p-2 bg-white border rounded">س</span>
                    </div>
                    <p class="text-xs text-center text-gray-500">Jawaban: S-I-R-W-A-L (سِرْوَالٌ)</p>
                    <input type="text" id="scramble-input" placeholder="Tulis jawaban latin..." class="w-full border p-2 rounded mt-2">
                    <button onclick="checkScramble()" class="mt-2 w-full bg-emerald-100 text-emerald-700 py-1 rounded hover:bg-emerald-200">Cek</button>
                </div>
            </div>

            <!-- QUIZ 3 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                 <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl text-gray-800">Latihan Formatif: Pertemuan 5-6</h3>
                    <span class="text-sm text-gray-500">10 Soal Pilihan Ganda</span>
                </div>
                <div id="quiz-container-3" class="space-y-6"></div>
                <button onclick="checkQuiz(3)" class="mt-6 w-full bg-emerald-600 text-white py-3 rounded-lg font-bold hover:bg-emerald-700 transition shadow-lg">Cek Jawaban</button>
                <div id="quiz-result-3" class="mt-4 hidden p-4 bg-gray-100 rounded-lg text-center"></div>
            </div>
        </section>

        <!-- TAB 4: PERTEMUAN 7-8 (Aksesoris & Adab) -->
        <section id="tab4" class="hidden space-y-8 animate-fade-in">
             <!-- RMP HEADER -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-emerald-50 px-6 py-4 border-b border-emerald-100 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-emerald-800">Pertemuan 7 & 8: Aksesoris, Warna & Muroja'ah</h2>
                    <span class="bg-emerald-200 text-emerald-800 text-xs px-3 py-1 rounded-full font-semibold">Durasi: 2 x 90 Menit</span>
                </div>
                <div class="p-6 space-y-6">
                    <!-- A. Tujuan Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">A. Tujuan Pembelajaran</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 ml-2">
                            <li>Santri mengenal kosakata tambahan: Kacamata, Jam Tangan, Cincin, Sabuk.</li>
                            <li>Santri mengenal warna dasar pakaian (Putih, Hitam, Hijau).</li>
                            <li>Santri melakukan Muroja'ah (Review) total dari pertemuan 1-7.</li>
                        </ul>
                    </div>

                    <!-- B. Keterkaitan Nilai Islam -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">B. Keterkaitan Nilai Islam: Adab Berhias</h3>
                        <p class="text-gray-600 mb-4">
                            Islam mencintai keindahan dan kebersihan. Disunnahkan memakai pakaian putih (bersih) dan memakai wewangian (bagi laki-laki) saat ke Masjid.
                        </p>
                         <div class="bg-emerald-50 border-l-4 border-emerald-600 p-4 rounded-r-lg">
                            <p class="font-arab text-xl text-right mb-2 leading-loose text-emerald-900">
                                الْبَسُوا مِنْ ثِيَابِكُمُ الْبَيَاضَ، فَإِنَّهَا مِنْ خَيْرِ ثِيَابِكُمْ
                            </p>
                            <p class="text-sm text-gray-700 italic">
                                "Pakailah pakaian putih kalian, karena sesungguhnya itu adalah sebaik-baik pakaian kalian." (HR. Abu Daud & Tirmidzi)
                            </p>
                        </div>
                    </div>
                     <!-- C. Skenario Pembelajaran -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 border-b-2 border-emerald-500 inline-block">C. Skenario Pembelajaran</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                             <div class="space-y-6">
                                <h4 class="font-bold text-gray-700">Kosakata Aksesoris:</h4>
                                <ul class="space-y-2 font-arab text-lg text-gray-800 bg-gray-50 p-4 rounded">
                                    <li class="flex justify-between border-b pb-1"><span>نَظَّارَةٌ</span> <span class="font-sans text-sm text-gray-600">Nazhzharatun (Kacamata)</span></li>
                                    <li class="flex justify-between border-b pb-1"><span>سَاعَةٌ</span> <span class="font-sans text-sm text-gray-600">Sa'atun (Jam Tangan)</span></li>
                                    <li class="flex justify-between border-b pb-1"><span>خَاتَمٌ</span> <span class="font-sans text-sm text-gray-600">Khatamun (Cincin)</span></li>
                                    <li class="flex justify-between border-b pb-1"><span>حِزَامٌ</span> <span class="font-sans text-sm text-gray-600">Hizamun (Ikat Pinggang)</span></li>
                                    <li class="flex justify-between"><span>أَبْيَضُ</span> <span class="font-sans text-sm text-gray-600">Abyadhu (Putih - Warna)</span></li>
                                </ul>
                            </div>
                             <div class="bg-white p-4 rounded-lg shadow border border-gray-200">
                                <h4 class="font-bold text-gray-700 mb-2">Ungkapan Sehari-hari</h4>
                                <div class="space-y-3">
                                    <div class="p-3 bg-blue-50 rounded border-l-4 border-blue-500">
                                        <p class="font-arab text-right text-lg">أَنَا أَلْبَسُ الْقَمِيْصَ الأَبْيَضَ</p>
                                        <p class="text-sm italic">Ana albasul qamishal abyadha</p>
                                        <p class="font-bold text-sm">"Saya memakai kemeja putih."</p>
                                    </div>
                                    <div class="p-3 bg-green-50 rounded border-l-4 border-green-500">
                                        <p class="font-arab text-right text-lg">هَذَا سِرْوَالٌ طَوِيْلٌ</p>
                                        <p class="text-sm italic">Hadza sirwalun thawilun</p>
                                        <p class="font-bold text-sm">"Ini celana yang panjang."</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- QUIZ 4 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                 <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xl text-gray-800">Latihan Formatif: Pertemuan 7-8</h3>
                    <span class="text-sm text-gray-500">10 Soal Pilihan Ganda</span>
                </div>
                <div id="quiz-container-4" class="space-y-6"></div>
                <button onclick="checkQuiz(4)" class="mt-6 w-full bg-emerald-600 text-white py-3 rounded-lg font-bold hover:bg-emerald-700 transition shadow-lg">Cek Jawaban</button>
                <div id="quiz-result-4" class="mt-4 hidden p-4 bg-gray-100 rounded-lg text-center"></div>
            </div>
        </section>

        <!-- TAB 5: TES SUMATIF -->
        <section id="tab5" class="hidden space-y-8 animate-fade-in">
            <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
                <div class="bg-red-50 px-6 py-6 border-b border-red-100 text-center">
                    <h2 class="text-3xl font-bold text-red-800 mb-2">Tes Sumatif Akhir Modul</h2>
                    <p class="text-red-600">Evaluasi menyeluruh dari Pertemuan 1 sampai 8.</p>
                </div>
                
                <div class="p-8">
                    <!-- Start Screen -->
                    <div id="summative-start" class="text-center space-y-6">
                        <div class="text-6xl text-red-200">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                            Tes ini terdiri dari gabungan soal-soal sebelumnya dan soal baru. Pastikan Anda telah mempelajari seluruh materi. KKM untuk lulus modul ini adalah <strong>75</strong>.
                        </p>
                        <button onclick="startSummative()" class="bg-red-600 text-white px-8 py-4 rounded-lg font-bold text-lg hover:bg-red-700 transition shadow-lg transform hover:scale-105">
                            Mulai Tes Sekarang
                        </button>
                    </div>

                    <!-- Quiz Screen -->
                    <div id="summative-quiz" class="hidden space-y-8">
                        <div id="summative-container" class="space-y-6">
                            <!-- JS Injected Questions -->
                        </div>
                        <button onclick="checkSummative()" class="w-full bg-red-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-red-700 transition shadow-lg">
                            Kumpulkan Jawaban
                        </button>
                    </div>

                    <!-- Result Screen -->
                    <div id="summative-result" class="hidden text-center space-y-6 animate-fade-in">
                        <div id="score-circle" class="w-32 h-32 rounded-full border-8 border-gray-200 flex items-center justify-center mx-auto text-3xl font-bold text-gray-700">
                            0
                        </div>
                        <h3 id="score-message" class="text-2xl font-bold"></h3>
                        <p id="score-detail" class="text-gray-600"></p>
                        <button onclick="location.reload()" class="bg-gray-800 text-white px-6 py-3 rounded-lg hover:bg-gray-900 transition">
                            <i class="fas fa-redo mr-2"></i> Ulangi Modul
                        </button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-800 text-white py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">Modul Pembelajaran Interaktif ARB-105</p>
            <p class="text-gray-400 text-sm">&copy; 2024 Ponpes Digital. Dibuat dengan prinsip Manhaj Salaf.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC (SINGLE TAG, COMPLETE) -->
    <script>
        // --- DATA OBJECTS ---
        
        // Match Game Data
        const matchData1 = [
            { id: 1, arab: 'رَأْسٌ', latin: "Ra'sun", meaning: 'Kepala' },
            { id: 2, arab: 'عَيْنٌ', latin: "'Ainun", meaning: 'Mata' },
            { id: 3, arab: 'أَنْفٌ', latin: "Anfun", meaning: 'Hidung' },
            { id: 4, arab: 'أُذُنٌ', latin: "Udzunun", meaning: 'Telinga' }
        ];

        // Flashcards Data
        const flashcards = [
            { arab: 'قَلْبٌ', latin: 'Qalbun', arti: 'Jantung/Hati' },
            { arab: 'يَدٌ', latin: 'Yadun', arti: 'Tangan' },
            { arab: 'رِجْلٌ', latin: 'Rijlun', arti: 'Kaki' },
            { arab: 'بَطْنٌ', latin: 'Bathnun', arti: 'Perut' }
        ];
        let currentCard = 0;

        // Quizzes Data (Format: Question, Options Array, Correct Index, Explanation)
        const quizzes = {
            1: [
                { q: "Apa bahasa Arab dari 'Kepala'?", opts: ["Ra'sun", "Wajhun", "Yadun", "Rijlun"], a: 0, exp: "Ra'sun artinya Kepala." },
                { q: "Arti kata 'Ainun' (عَيْنٌ) adalah...", opts: ["Hidung", "Mata", "Telinga", "Mulut"], a: 1, exp: "'Ainun adalah alat penglihatan (Mata)." },
                { q: "Anggota tubuh yang digunakan untuk mendengar adalah...", opts: ["Anfun", "Famun", "Udzunun", "Yadun"], a: 2, exp: "Udzunun artinya Telinga." },
                { q: "Manakah yang BUKAN bagian dari wajah?", opts: ["Anfun", "Famun", "'Ainun", "Rijlun"], a: 3, exp: "Rijlun (Kaki) adalah anggota badan bawah." },
                { q: "Bahasa Arab Rambut adalah...", opts: ["Ra'sun", "Sya'run", "Wajhun", "Jildun"], a: 1, exp: "Sya'run artinya Rambut." },
                { q: "Anfun (أَنْفٌ) letaknya di...", opts: ["Atas mata", "Bawah mulut", "Tengah wajah", "Samping kepala"], a: 2, exp: "Anfun (Hidung) berada di tengah wajah." },
                { q: "Lengkapi: Hada ... (Ini Mulut)", opts: ["Famun", "Udzunun", "Yadun", "Rijlun"], a: 0, exp: "Famun artinya Mulut." },
                { q: "Jumlah 'Ainun pada manusia normal adalah...", opts: ["Wahid (1)", "Itsnani (2)", "Tsalatsa (3)", "Arba'a (4)"], a: 1, exp: "Manusia memiliki dua mata." },
                { q: "Ayat 'Ahsani Taqwim' terdapat dalam surat...", opts: ["Al-Ikhlas", "At-Tin", "Al-Fatihah", "Al-Falaq"], a: 1, exp: "QS At-Tin ayat 4." },
                { q: "Kita bersyukur dengan menggunakan mata untuk...", opts: ["Melihat yang haram", "Tidur terus", "Membaca Al-Qur'an", "Melirik sinis"], a: 2, exp: "Mata harus digunakan untuk ketaatan." }
            ],
            2: [
                { q: "Bahasa Arab Tangan adalah...", opts: ["Rijlun", "Yadun", "Ra'sun", "Bathnun"], a: 1, exp: "Yadun artinya Tangan." },
                { q: "Anggota tubuh untuk berjalan ke masjid adalah...", opts: ["Yadun", "Rijlun", "Anfun", "Udzunun"], a: 1, exp: "Rijlun (Kaki) digunakan untuk berjalan." },
                { q: "Tempat niat dan iman di dalam dada disebut...", opts: ["Qalbun", "Bathnun", "Zhahrin", "Ra'sun"], a: 0, exp: "Qalbun (Hati/Jantung) adalah pusat spiritual." },
                { q: "Surat Yasin ayat 65 menjelaskan bahwa tangan akan...", opts: ["Diam saja", "Berbicara/Bersaksi", "Menghilang", "Bersinar"], a: 1, exp: "Tangan akan berbicara kepada Allah." },
                { q: "Bahasa Arab Perut adalah...", opts: ["Shadrun", "Bathnun", "Zhahrun", "Fakhidzun"], a: 1, exp: "Bathnun artinya Perut." },
                { q: "Shadrun artinya...", opts: ["Punggung", "Dada", "Leher", "Paha"], a: 1, exp: "Shadrun adalah Dada." },
                { q: "Manakah anggota badan bagian bawah?", opts: ["Ra'sun", "Wajhun", "Rijlun", "Anfun"], a: 2, exp: "Rijlun (Kaki) ada di bagian bawah." },
                { q: "Apa arti 'Zhahrun'?", opts: ["Dada", "Perut", "Punggung", "Pinggang"], a: 2, exp: "Zhahrun artinya Punggung." },
                { q: "Sunnah menggunakan tangan kanan untuk...", opts: ["Makan", "Membersihkan kotoran", "Membuang sampah", "Memegang sepatu"], a: 0, exp: "Tangan kanan untuk hal-hal mulia seperti makan." },
                { q: "Organ tubuh adalah titipan, artinya...", opts: ["Bebas dipakai", "Milik kita selamanya", "Akan dipertanggungjawabkan", "Tidak penting"], a: 2, exp: "Amanah Allah yang akan dihisab." }
            ],
            3: [
                { q: "Bahasa Arab Kemeja adalah...", opts: ["Tsaubun", "Qamishun", "Sirwalun", "Hizamun"], a: 1, exp: "Qamishun adalah Kemeja." },
                { q: "Apa arti 'Tsaubun'?", opts: ["Celana", "Baju/Pakaian", "Topi", "Sepatu"], a: 1, exp: "Tsaubun secara umum berarti Baju/Pakaian (Gamis)." },
                { q: "Penutup kepala bagi laki-laki disebut...", opts: ["Khimarun", "Qalansuwah", "Jilbabun", "Hidzaun"], a: 1, exp: "Qalansuwah artinya Peci/Kopiah." },
                { q: "Fungsi utama pakaian menurut Al-A'raf 26 adalah...", opts: ["Pamer kekayaan", "Menutup aurat", "Gaya-gayaan", "Menarik lawan jenis"], a: 1, exp: "Fungsi utama adalah menutup aurat." },
                { q: "Bahasa Arab Celana...", opts: ["Sirwalun", "Fustanun", "Izarun", "Ridaun"], a: 0, exp: "Sirwalun artinya Celana." },
                { q: "Sepatu dalam bahasa Arab...", opts: ["Khuffun", "Hidzaun", "Na'lun", "Jaurabun"], a: 1, exp: "Hidzaun artinya Sepatu." },
                { q: "Pakaian terbaik menurut Al-Qur'an adalah pakaian...", opts: ["Sutra", "Mahal", "Taqwa", "Impor"], a: 2, exp: "Libasut-taqwa (Pakaian Taqwa)." },
                { q: "Menutup aurat hukumnya...", opts: ["Sunnah", "Mubah", "Wajib", "Makruh"], a: 2, exp: "Wajib bagi muslim yang baligh." },
                { q: "Khimarun adalah pakaian khusus untuk...", opts: ["Laki-laki", "Perempuan", "Anak kecil", "Semua benar"], a: 1, exp: "Khimar (Kerudung) untuk wanita." },
                { q: "Manakah yang termasuk pakaian?", opts: ["Qalamun", "Kitabun", "Qamishun", "Maktabun"], a: 2, exp: "Qamishun (Kemeja) adalah jenis pakaian." }
            ],
            4: [
                { q: "Nazhzharatun artinya...", opts: ["Jam Tangan", "Kacamata", "Cincin", "Gelang"], a: 1, exp: "Nazhzharatun = Kacamata." },
                { q: "Bahasa Arab Jam Tangan...", opts: ["Sa'atun", "Daqiqatun", "Waqtun", "Zamanun"], a: 0, exp: "Sa'atun artinya Jam." },
                { q: "Warna yang disunnahkan untuk pakaian adalah...", opts: ["Ahmar (Merah)", "Aswad (Hitam)", "Abyadh (Putih)", "Azraq (Biru)"], a: 2, exp: "Nabi menyukai warna putih (Abyadh)." },
                { q: "Khatamun artinya...", opts: ["Kalung", "Anting", "Cincin", "Mahkota"], a: 2, exp: "Khatamun = Cincin." },
                { q: "Hizamun digunakan di bagian...", opts: ["Kepala", "Leher", "Pinggang", "Kaki"], a: 2, exp: "Hizamun (Ikat Pinggang) di pinggang." },
                { q: "Apa arti 'Ana albasu'?", opts: ["Saya melepas", "Saya membeli", "Saya memakai", "Saya mencuci"], a: 2, exp: "Albasu = Saya memakai." },
                { q: "Adab berpakaian adalah memulai dengan anggota...", opts: ["Kiri", "Kanan", "Bebas", "Atas"], a: 1, exp: "Mendahulukan yang kanan (Tayamun)." },
                { q: "Abyadh (أَبْيَضُ) artinya warna...", opts: ["Hitam", "Putih", "Merah", "Hijau"], a: 1, exp: "Putih." },
                { q: "Doa memakai pakaian dibaca agar terhindar dari...", opts: ["Kotoran", "Pandangan Jin/Setan", "Debu", "Panas"], a: 1, exp: "Agar terlindung dan berkah." },
                { q: "Aksesoris yang umum dipakai di jari adalah...", opts: ["Nazhzharatun", "Hizamun", "Khatamun", "Qalansuwah"], a: 2, exp: "Khatamun (Cincin)." }
            ]
        };

        // --- FUNCTIONS ---

        // 1. Tab Navigation
        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('main > section').forEach(el => {
                el.classList.add('hidden');
            });
            // Reset buttons
            document.querySelectorAll('nav button').forEach(el => {
                el.classList.remove('tab-active', 'bg-emerald-50', 'text-emerald-600', 'border-emerald-600');
                el.classList.add('tab-inactive');
                // Special check for Sumatif button color reset handled by generic inactive class
            });

            // Show target
            document.getElementById(tabId).classList.remove('hidden');
            
            // Highlight button
            const btn = document.getElementById('btn-' + tabId);
            btn.classList.remove('tab-inactive');
            btn.classList.add('tab-active');

            // Scroll to top
            window.scrollTo(0, 0);

            // Init content based on tab
            if(tabId === 'tab1') {
                initMatchGame1();
                renderQuiz(1);
            } else if(tabId === 'tab2') {
                renderQuiz(2);
            } else if(tabId === 'tab3') {
                renderQuiz(3);
            } else if(tabId === 'tab4') {
                renderQuiz(4);
            }
        }

        // 2. Interactive Simulations
        
        // Sim 1: Face Vocab
        function showVocab(latin, arab) {
            const display = document.getElementById('vocab-display-1');
            const txtArab = document.getElementById('vocab-arab-1');
            const txtLatin = document.getElementById('vocab-latin-1');
            
            txtArab.textContent = arab;
            txtLatin.textContent = latin;
            display.classList.remove('hidden');
            
            // Auto hide after 3 sec
            setTimeout(() => {
                display.classList.add('hidden');
            }, 3000);
        }

        // Sim 2: Match Game
        let matchState = { selected: null, pairsFound: 0 };
        function initMatchGame1() {
            const container = document.getElementById('match-game-1');
            container.innerHTML = ''; // Clear
            matchState = { selected: null, pairsFound: 0 };
            document.getElementById('match-feedback-1').textContent = '';

            // Mix arrays for randomization
            let items = [];
            matchData1.forEach(item => {
                items.push({ type: 'arab', txt: item.arab, id: item.id });
                items.push({ type: 'latin', txt: item.latin + ` (${item.meaning})`, id: item.id });
            });
            // Fisher-Yates Shuffle
            for (let i = items.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [items[i], items[j]] = [items[j], items[i]];
            }

            items.forEach(item => {
                const btn = document.createElement('button');
                btn.className = 'border p-3 rounded hover:bg-emerald-50 transition bg-white shadow-sm';
                btn.textContent = item.txt;
                if(item.type === 'arab') btn.classList.add('font-arab', 'text-xl');
                btn.onclick = () => handleMatchClick(btn, item.id);
                container.appendChild(btn);
            });
        }

        function handleMatchClick(btn, id) {
            if(btn.disabled) return;

            if (matchState.selected === null) {
                // First click
                matchState.selected = { btn, id };
                btn.classList.add('bg-blue-100', 'border-blue-500');
            } else {
                // Second click
                const prev = matchState.selected;
                
                if (prev.btn === btn) {
                    // Deselect
                    btn.classList.remove('bg-blue-100', 'border-blue-500');
                    matchState.selected = null;
                    return;
                }

                if (prev.id === id) {
                    // Match!
                    btn.classList.add('bg-green-100', 'border-green-500', 'text-green-700');
                    prev.btn.classList.add('bg-green-100', 'border-green-500', 'text-green-700');
                    btn.disabled = true;
                    prev.btn.disabled = true;
                    matchState.selected = null;
                    document.getElementById('match-feedback-1').textContent = "Benar! Mumtaz!";
                    document.getElementById('match-feedback-1').className = "mt-2 text-center text-sm font-bold text-green-600";
                } else {
                    // Wrong
                    btn.classList.add('bg-red-100');
                    prev.btn.classList.add('bg-red-100');
                    document.getElementById('match-feedback-1').textContent = "Coba lagi...";
                    document.getElementById('match-feedback-1').className = "mt-2 text-center text-sm font-bold text-red-600";
                    setTimeout(() => {
                        btn.classList.remove('bg-red-100');
                        prev.btn.classList.remove('bg-red-100', 'bg-blue-100', 'border-blue-500');
                        matchState.selected = null;
                        document.getElementById('match-feedback-1').textContent = "";
                    }, 1000);
                }
            }
        }

        // Sim 3: Drag and Drop Organ
        function allowDrop(ev) {
            ev.preventDefault();
        }
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }
        function drop(ev, zone) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var el = document.getElementById(data);
            
            // Logic Check
            let correct = false;
            if (zone === 'upper' && (data === 'drag-ras' || data === 'drag-yad')) correct = true; // Note: Hand can be neutral, but usually upper limb
            if (zone === 'lower' && data === 'drag-rijl') correct = true;

            // Strict Logic for Module
            // Rasun = Upper, Rijlun = Lower, Yadun = Upper Body (Side)
            if(data === 'drag-ras' && zone === 'upper') correct = true;
            else if(data === 'drag-yad' && zone === 'upper') correct = true;
            else if(data === 'drag-rijl' && zone === 'lower') correct = true;
            else correct = false;

            if (correct) {
                ev.target.appendChild(el);
                el.classList.add('opacity-50', 'cursor-default');
                el.draggable = false;
                document.getElementById('sort-feedback').textContent = "Benar! (Shahih)";
                document.getElementById('sort-feedback').className = "text-center text-sm font-bold h-6 text-green-600";
            } else {
                document.getElementById('sort-feedback').textContent = "Salah tempat, coba lagi.";
                document.getElementById('sort-feedback').className = "text-center text-sm font-bold h-6 text-red-600";
            }
        }

        // Sim 4: Flashcards
        function renderCard() {
            const front = document.getElementById('flashcard-front');
            const data = flashcards[currentCard];
            front.innerHTML = `
                <div class="text-center">
                    <i class="fas fa-sync mb-2 opacity-50 absolute top-4 right-4"></i>
                    <h4 class="text-4xl font-arab mb-2">${data.arab}</h4>
                    <p class="text-xs font-mono opacity-60">Bahasa Arab</p>
                </div>
            `;
            // Reset to front side visual
            front.classList.remove('rotate-y-180', 'bg-white', 'text-gray-800');
            front.classList.add('bg-emerald-600', 'text-white');
        }

        function flipCard(el) {
            const front = el.firstElementChild;
            const data = flashcards[currentCard];
            
            // Simple toggle logic for content (visual flip handled by CSS usually, but here JS for content swap)
            if (front.classList.contains('bg-emerald-600')) {
                // Flip to back
                front.classList.remove('bg-emerald-600', 'text-white');
                front.classList.add('bg-white', 'text-gray-800', 'border-2', 'border-emerald-500');
                front.innerHTML = `
                    <div class="text-center">
                         <h4 class="text-2xl font-bold text-gray-800">${data.latin}</h4>
                         <p class="text-lg text-emerald-600 mt-1">${data.arti}</p>
                    </div>
                `;
            } else {
                // Back to front
                renderCard();
            }
        }
        function nextCard() {
            currentCard = (currentCard + 1) % flashcards.length;
            renderCard();
        }
        function prevCard() {
            currentCard = (currentCard - 1 + flashcards.length) % flashcards.length;
            renderCard();
        }

        // Sim 5: Check Cloth (Simple Logic)
        function checkCloth(choice) {
            // Icon is shoe prints (Hidzaun)
            const feedback = document.getElementById('cloth-feedback');
            if(choice === 'Hidzaun') {
                feedback.textContent = "Benar! Hidzaun = Sepatu/Alas Kaki";
                feedback.className = "text-center mt-2 font-bold text-green-600";
                // Change icon for fun
                document.getElementById('clothing-icon').innerHTML = '<i class="fas fa-check-circle text-green-500"></i>';
            } else {
                feedback.textContent = "Salah. Coba perhatikan ikonnya.";
                feedback.className = "text-center mt-2 font-bold text-red-600";
            }
        }

        // Sim 6: Scramble
        function checkScramble() {
            const val = document.getElementById('scramble-input').value.toLowerCase().trim();
            if(val === 'sirwal' || val === 'sirwalun') {
                alert("Benar! Sirwalun adalah Celana.");
            } else {
                alert("Kurang tepat. Coba eja: S-I-R-W-A-L");
            }
        }

        // 3. Quiz System (Formative)
        let quizAnswers = { 1: {}, 2: {}, 3: {}, 4: {} }; // Store user answers

        function renderQuiz(id) {
            const container = document.getElementById(`quiz-container-${id}`);
            // Check if already rendered
            if(container.children.length > 0) return;

            const qs = quizzes[id];
            qs.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = "border-b border-gray-100 pb-4 last:border-0";
                
                let optsHTML = '';
                item.opts.forEach((opt, optIdx) => {
                    optsHTML += `
                        <label class="flex items-center space-x-2 cursor-pointer p-2 rounded hover:bg-gray-50">
                            <input type="radio" name="q${id}-${idx}" value="${optIdx}" class="form-radio text-emerald-600 focus:ring-emerald-500">
                            <span>${opt}</span>
                        </label>
                    `;
                });

                div.innerHTML = `
                    <p class="font-semibold text-gray-800 mb-2">${idx + 1}. ${item.q}</p>
                    <div class="space-y-1 pl-4">
                        ${optsHTML}
                    </div>
                    <div id="feedback-${id}-${idx}" class="hidden mt-2 text-sm p-2 rounded"></div>
                `;
                container.appendChild(div);
            });
        }

        function checkQuiz(id) {
            const qs = quizzes[id];
            let score = 0;
            let answered = 0;

            qs.forEach((item, idx) => {
                const radios = document.getElementsByName(`q${id}-${idx}`);
                let val = -1;
                radios.forEach(r => { if(r.checked) val = parseInt(r.value); });
                
                const feedbackEl = document.getElementById(`feedback-${id}-${idx}`);
                feedbackEl.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-green-100', 'text-green-700');

                if(val !== -1) {
                    answered++;
                    if(val === item.a) {
                        score++;
                        feedbackEl.textContent = "✓ Benar. " + item.exp;
                        feedbackEl.classList.add('bg-green-100', 'text-green-700');
                    } else {
                        feedbackEl.textContent = "✗ Salah. " + item.exp;
                        feedbackEl.classList.add('bg-red-100', 'text-red-700');
                    }
                } else {
                     feedbackEl.textContent = "Belum dijawab.";
                     feedbackEl.classList.add('bg-gray-100', 'text-gray-700');
                     feedbackEl.classList.remove('hidden');
                }
            });

            const resultDiv = document.getElementById(`quiz-result-${id}`);
            resultDiv.classList.remove('hidden');
            resultDiv.innerHTML = `<span class="text-lg font-bold">Skor Anda: ${score} / ${qs.length}</span>`;
        }

        // 4. Summative Test Logic
        function startSummative() {
            document.getElementById('summative-start').classList.add('hidden');
            document.getElementById('summative-quiz').classList.remove('hidden');
            
            // Build Summative from all pools + Random
            const container = document.getElementById('summative-container');
            container.innerHTML = '';
            
            // Flatten all quizzes for pool
            let allQs = [];
            [1,2,3,4].forEach(n => {
                allQs = allQs.concat(quizzes[n]);
            });
            
            // Shuffle and take 20
            allQs.sort(() => 0.5 - Math.random());
            const selectedQs = allQs.slice(0, 20);
            
            // Render
            selectedQs.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = "bg-white p-4 rounded-lg shadow-sm border border-gray-200";
                
                 let optsHTML = '';
                 // Shuffle options too for summative
                 let optsWithIdx = item.opts.map((o, i) => ({txt: o, orgIdx: i}));
                 optsWithIdx.sort(() => 0.5 - Math.random());

                optsWithIdx.forEach((optObj) => {
                    optsHTML += `
                        <label class="flex items-center space-x-2 cursor-pointer p-2 rounded hover:bg-gray-50">
                            <input type="radio" name="sum-${idx}" value="${optObj.orgIdx}" data-correct="${item.a}" class="form-radio text-red-600 focus:ring-red-500">
                            <span>${optObj.txt}</span>
                        </label>
                    `;
                });

                div.innerHTML = `
                    <p class="font-bold text-gray-800 mb-2">${idx + 1}. ${item.q}</p>
                    <div class="space-y-1">
                        ${optsHTML}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function checkSummative() {
            const inputs = document.querySelectorAll('#summative-container input[type="radio"]:checked');
            let score = 0;
            const total = 20; // Hardcoded size from logic above

            inputs.forEach(inp => {
                if(parseInt(inp.value) === parseInt(inp.dataset.correct)) {
                    score++;
                }
            });

            const finalScore = (score / total) * 100;

            document.getElementById('summative-quiz').classList.add('hidden');
            document.getElementById('summative-result').classList.remove('hidden');
            
            const circle = document.getElementById('score-circle');
            circle.textContent = finalScore;
            
            if(finalScore >= 75) {
                circle.classList.add('border-green-500', 'text-green-600');
                document.getElementById('score-message').textContent = "Mumtaz! (Sangat Baik)";
                document.getElementById('score-message').className = "text-2xl font-bold text-green-600";
                document.getElementById('score-detail').textContent = "Anda telah menguasai Mufrodat Anggota Tubuh & Pakaian.";
            } else {
                circle.classList.add('border-red-500', 'text-red-600');
                document.getElementById('score-message').textContent = "Jayyid (Cukup)";
                document.getElementById('score-message').className = "text-2xl font-bold text-red-600";
                document.getElementById('score-detail').textContent = "Silakan ulangi materi (Muroja'ah) dan coba lagi.";
            }
        }

        // Initialize First Tab Content
        window.onload = function() {
            switchTab('tab1');
        };

    </script>
</body>
</html>
