<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul STT-201: Pengelolaan Limbah Organik (Waste-to-Resource)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .tab-btn.active {
            background-color: #78350f; /* Amber-900 */
            color: white;
            border-color: #78350f;
        }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }
        .quiz-option { transition: all 0.2s ease; }
        .quiz-option:hover { background-color: #f1f5f9; }
        .quiz-option.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        .teacher-note {
            background-color: #fefce8;
            border-left: 4px solid #eab308;
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        .waste-item {
            cursor: pointer;
            user-select: none;
        }
        .lifecycle-stage {
            cursor: pointer;
            user-select: none;
        }
    </style>
</head>
<body class="text-slate-800 text-base">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-amber-900">Modul Pembelajaran Interaktif</h1>
            <p class="text-xl text-slate-600 mt-2">STT-201: Pengelolaan Limbah Organik (Waste-to-Resource)</p>
        </header>

        <nav class="mb-8 flex flex-wrap justify-center gap-2 md:gap-4">
            <button class="tab-btn active w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan1">Pertemuan 1: Konsep & Pemilahan</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan2">Pertemuan 2: Komposting</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan3">Pertemuan 3: Eco-Enzyme</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan4">Pertemuan 4: Maggot BSF</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="sumatif">Tes Sumatif</button>
        </nav>

        <main>
            <!-- Pertemuan 1: Konsep & Pemilahan -->
            <section id="pertemuan1" class="content-section active">
                <div class="card">
                     <h2 class="text-2xl font-bold text-amber-800 mb-1">Pertemuan 1 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Konsep `Waste-to-Resource` & Pemilahan Sampah</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan konsep `Waste-to-Resource` (dari limbah menjadi sumber daya).</li>
                                <li>Memahami dampak buruk sampah jika tidak dikelola.</li>
                                <li>Mampu membedakan dan memilah sampah organik dan anorganik.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini adalah wujud nyata dari hadits "Kebersihan adalah sebagian dari iman" (<strong>An-Nadhofatu minal Iman</strong>). Mengelola sampah bukan hanya soal kebersihan fisik, tapi juga menjaga <strong>Amanah</strong> Allah ﷻ atas bumi ini. Konsep `Waste-to-Resource` selaras dengan prinsip anti-<strong>`Israf`</strong> (boros) dan anti-<strong>`Tabdzir`</strong> (sia-sia), karena mengubah sesuatu yang dianggap tidak berguna menjadi berkah.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <div class="space-y-4">
                                    <p><strong>Langkah 1: Mengubah Pola Pikir tentang Sampah (15 Menit)</strong></p>
                                    <p>Bismillah. Selama ini, apa yang ada di benak kita saat mendengar kata "sampah"? Tentu sesuatu yang kotor, bau, dan tidak berguna. Hari ini kita akan mengubah pola pikir itu. Kita akan belajar konsep <strong>`Waste-to-Resource`</strong>, yaitu mengubah sampah menjadi sumber daya yang bermanfaat.</p>
                                    <p>Dalam Islam, tidak ada ciptaan Allah yang sia-sia. Bahkan sampah sisa makanan kita, jika dikelola dengan ilmu, bisa menjadi sesuatu yang bernilai. Ini adalah bentuk syukur yang mendalam.</p>
                                    <img src="https://i.ibb.co/Vv0y72x/waste-to-resource-cycle.png" alt="Siklus Waste-to-Resource" class="rounded-lg w-full max-w-lg mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/700x300/fde68a/78350f?text=Gagal+Memuat+Gambar';">

                                    <p class="mt-4"><strong>Langkah 2: Kunci Pertama - Pemilahan (25 Menit)</strong></p>
                                    <p>Langkah paling pertama dan paling penting dalam mengelola sampah adalah <strong>PEMILAHAN</strong>. Jika sampah organik dan anorganik sudah tercampur, maka keduanya akan menjadi kotor dan sulit diolah. Memilah adalah kunci pembuka pintu 'harta karun' dari sampah.</p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                        <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                            <h4 class="font-bold text-green-800">Sampah Organik (Sampah Basah)</h4>
                                            <p class="text-sm">Semua sampah yang berasal dari makhluk hidup dan dapat membusuk secara alami. Ini adalah bahan baku utama kita.</p>
                                            <ul class="list-disc list-inside ml-4 text-sm mt-2">
                                                <li>Sisa nasi, sayuran, kulit buah</li>
                                                <li>Daun kering, ranting pohon</li>
                                                <li>Tulang ikan, cangkang telur</li>
                                            </ul>
                                        </div>
                                        <div class="p-4 bg-sky-50 border-l-4 border-sky-500 rounded-r-lg">
                                            <h4 class="font-bold text-sky-800">Sampah Anorganik (Sampah Kering)</h4>
                                            <p class="text-sm">Sampah buatan manusia yang tidak dapat membusuk. Sampah ini bisa didaur ulang atau dijual ke bank sampah.</p>
                                            <ul class="list-disc list-inside ml-4 text-sm mt-2">
                                                <li>Botol plastik, kantong kresek</li>
                                                <li>Kertas, kardus</li>
                                                <li>Kaca, kaleng</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <p class="mt-4"><strong>Langkah 3: Praktik Memilah (20 Menit)</strong></p>
                                    <p>Mari kita praktikkan langsung. Di lingkungan Markaz, setiap hari pasti ada sampah sisa makanan dari dapur, daun-daun kering di halaman, dan sampah bungkus jajanan dari para santri. Mulai hari ini, kita harus menyediakan dua tempat sampah terpisah: satu untuk organik, satu untuk anorganik.</p>
                                    <div class="teacher-note"><p class="font-semibold">Aktivitas Praktik:</p><p>Ajak santri untuk mengidentifikasi sampah di sekitar kelas atau asrama dan mengelompokkannya. Gunakan simulasi di bawah ini sebagai latihan awal.</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Pilah Sampah</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p id="instruction" class="mb-4 text-center font-semibold">Klik sampah di bawah ini untuk memilahnya!</p>
                        <div class="flex justify-center items-center mb-4 space-x-4">
                            <div id="organic-bin" class="p-6 border-2 border-green-600 rounded-lg bg-green-50 text-center">
                                <h4 class="font-bold text-green-800">ORGANIK</h4>
                                <ul id="organic-list" class="text-sm mt-2 min-h-[80px]"></ul>
                            </div>
                            <div id="inorganic-bin" class="p-6 border-2 border-sky-600 rounded-lg bg-sky-50 text-center">
                                <h4 class="font-bold text-sky-800">ANORGANIK</h4>
                                <ul id="inorganic-list" class="text-sm mt-2 min-h-[80px]"></ul>
                            </div>
                        </div>
                        <div id="waste-source" class="flex flex-wrap justify-center gap-2 p-2 bg-white rounded-lg">
                            <div class="waste-item p-2 bg-yellow-100 rounded" data-type="organic">Sisa Nasi</div>
                            <div class="waste-item p-2 bg-gray-200 rounded" data-type="inorganic">Botol Plastik</div>
                            <div class="waste-item p-2 bg-yellow-100 rounded" data-type="organic">Kulit Pisang</div>
                            <div class="waste-item p-2 bg-gray-200 rounded" data-type="inorganic">Kertas</div>
                            <div class="waste-item p-2 bg-yellow-100 rounded" data-type="organic">Daun Kering</div>
                            <div class="waste-item p-2 bg-gray-200 rounded" data-type="inorganic">Kaca Pecah</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-4">Latihan Formatif 1</h2>
                    <div id="quiz1"></div>
                </div>
            </section>
            
            <section id="pertemuan2" class="content-section">
                <div class="card">
                     <h2 class="text-2xl font-bold text-amber-800 mb-1">Pertemuan 2 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Membuat "Emas Hitam" dari Sampah Dapur (Komposting)</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan definisi dan manfaat kompos.</li>
                                <li>Membedakan antara bahan 'Cokelat' (karbon) dan 'Hijau' (nitrogen) dalam komposting.</li>
                                <li>Menjelaskan langkah-langkah dasar membuat kompos dengan metode komposter sederhana.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Komposting adalah wujud <strong>Tadabbur Alam</strong>. Kita menyaksikan bagaimana Allah ﷻ menguraikan materi organik kembali ke bentuk asalnya untuk menyuburkan tanah. Ini adalah praktik <strong>Syukur</strong> atas sisa makanan, mengubahnya menjadi pupuk yang akan menumbuhkan makanan baru, bukan membuangnya sebagai sampah.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p><strong>Langkah 1: Apa itu Kompos? (15 Menit)</strong></p>
                                <p>Kompos adalah hasil penguraian bahan-bahan organik oleh mikroorganisme (bakteri, jamur) menjadi material mirip tanah yang kaya akan hara. Kompos sering disebut "Emas Hitam" oleh para petani karena kemampuannya yang luar biasa dalam menyuburkan tanah. Membuat kompos adalah cara terbaik untuk mengolah sebagian besar sampah organik kita.</p>
                                <p class="mt-4"><strong>Langkah 2: Resep Kompos Seimbang (25 Menit)</strong></p>
                                <p>Membuat kompos seperti memasak, butuh resep yang seimbang. Ada dua bahan utama:</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                    <div class="p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-r-lg">
                                        <h4 class="font-bold text-yellow-800">Bahan Cokelat (Sumber Karbon)</h4>
                                        <p class="text-sm">Memberi "energi" bagi mikroba. Sifatnya kering.</p>
                                        <ul class="list-disc list-inside ml-4 text-sm mt-2"><li>Daun kering, sekam padi, serbuk gergaji</li><li>Kardus, kertas sobek (tanpa tinta tebal)</li></ul>
                                    </div>
                                    <div class="p-4 bg-green-100 border-l-4 border-green-500 rounded-r-lg">
                                        <h4 class="font-bold text-green-800">Bahan Hijau (Sumber Nitrogen)</h4>
                                        <p class="text-sm">Memberi "protein" untuk pertumbuhan mikroba. Sifatnya basah.</p>
                                        <ul class="list-disc list-inside ml-4 text-sm mt-2"><li>Sisa sayuran & buah, potongan rumput</li><li>Ampas kopi/teh, cangkang telur</li></ul>
                                    </div>
                                </div>
                                <p class="mt-2 font-semibold text-center">Rasio Ideal: 2 bagian Cokelat : 1 bagian Hijau</p>

                                <p class="mt-4"><strong>Langkah 3: Praktik Membuat Komposter Sederhana (20 Menit)</strong></p>
                                <p>Kita bisa menggunakan ember bekas cat yang diberi lubang-lubang kecil di sekelilingnya.</p>
                                <ol class="list-decimal list-inside ml-4 text-sm space-y-1">
                                    <li>Masukkan lapisan bahan cokelat (daun kering) di dasar.</li>
                                    <li>Masukkan lapisan bahan hijau (sisa sayur).</li>
                                    <li>Tutup lagi dengan lapisan bahan cokelat.</li>
                                    <li>Ulangi terus hingga komposter penuh. Lapisan teratas harus bahan cokelat untuk mengurangi bau.</li>
                                    <li>Jaga kelembapan (tidak terlalu basah/kering) dan aduk setiap pekan.</li>
                                </ol>
                                <div class="teacher-note"><p class="font-semibold">Aktivitas Praktik:</p><p>Demonstrasikan cara membuat komposter sederhana. Ajak santri untuk mulai mengisi komposter tersebut dengan sampah organik dari lingkungan Markaz.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Cek Rasio Kompos</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <h4 class="font-semibold text-lg mb-2 text-center">Kalkulator Keseimbangan Kompos</h4>
                        <div>
                            <label for="compost-brown" class="block font-medium mb-2">Jumlah Bahan Cokelat (misal: Daun Kering): <span id="compost-brown-val" class="font-bold">2</span> ember</label>
                            <input type="range" id="compost-brown" min="1" max="10" value="2" class="w-full">
                        </div>
                        <div class="mt-4">
                            <label for="compost-green" class="block font-medium mb-2">Jumlah Bahan Hijau (misal: Sisa Sayur): <span id="compost-green-val" class="font-bold">1</span> ember</label>
                            <input type="range" id="compost-green" min="1" max="10" value="1" class="w-full">
                        </div>
                        <p id="compost-ratio-result" class="mt-4 text-center h-12 p-2 bg-white rounded-md font-bold text-lg"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-4">Latihan Formatif 2</h2>
                    <div id="quiz2"></div>
                </div>
            </section>
            
            <section id="pertemuan3" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-1">Pertemuan 3 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Membuat Cairan Ajaib Serbaguna (Eco-Enzyme)</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan definisi dan manfaat eco-enzyme.</li>
                                <li>Mengetahui bahan-bahan dan rasio untuk membuat eco-enzyme.</li>
                                <li>Memahami proses dasar fermentasi dalam pembuatan eco-enzyme.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Membuat eco-enzyme adalah cerminan dari prinsip <strong>Thaharah (Kesucian)</strong>. Kita membuat cairan pembersih alami dari bahan-bahan yang halal dan thayyib. Ini juga wujud dari <strong>kreativitas</strong> yang Allah anugerahkan kepada manusia untuk memanfaatkan alam sebaik-baiknya, mengubah sisa kulit buah yang tadinya akan dibuang menjadi cairan pembersih yang berkah.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                            <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p><strong>Langkah 1: Apa itu Eco-Enzyme? (15 Menit)</strong></p>
                                <p>Eco-Enzyme (EE) adalah hasil fermentasi dari sampah organik (kulit buah/sisa sayur), gula (gula merah/molase), dan air. Cairan ini memiliki jutaan manfaat, di antaranya sebagai pembersih lantai, pencuci piring, pupuk cair, bahkan pengusir hama alami. Warnanya coklat gelap dan memiliki aroma fermentasi asam manis yang segar.</p>
                                
                                <p class="mt-4"><strong>Langkah 2: Resep Ajaib Eco-Enzyme (25 Menit)</strong></p>
                                <p>Kunci membuat EE adalah rasio yang tepat. Resepnya sangat mudah diingat:</p>
                                <div class="p-4 bg-amber-50 border-l-4 border-amber-500 rounded-r-lg mt-2 text-center">
                                    <h4 class="font-bold text-amber-800 text-2xl">1 : 3 : 10</h4>
                                    <p class="font-semibold">(Gula : Sampah Organik : Air)</p>
                                    <p class="text-sm mt-2">Contoh: 100 gram Gula Merah : 300 gram Kulit Buah : 1000 ml (1 liter) Air</p>
                                </div>
                                <ul class="list-disc list-inside ml-4 text-sm mt-2">
                                    <li><strong>Gula:</strong> Gula merah, gula aren, atau molase (tetes tebu). Jangan gunakan gula pasir.</li>
                                    <li><strong>Sampah Organik:</strong> Hanya kulit buah segar atau sisa sayuran mentah. Hindari yang sudah busuk, berminyak, atau dimasak.</li>
                                    <li><strong>Air:</strong> Air biasa (air sumur/PAM).</li>
                                </ul>

                                <p class="mt-4"><strong>Langkah 3: Proses Fermentasi (20 Menit)</strong></p>
                                <p>Prosesnya sangat mudah. Cukup campurkan semua bahan dalam wadah plastik (jangan kaca, karena akan menghasilkan gas), aduk, dan tutup rapat. Simpan di tempat sejuk dan gelap. </p>
                                <ol class="list-decimal list-inside ml-4 text-sm space-y-1">
                                    <li>Pada bulan pertama, buka tutup wadah setiap hari untuk membuang gas.</li>
                                    <li>Proses fermentasi berlangsung selama <strong>3 bulan</strong>.</li>
                                    <li>Setelah 3 bulan, saring cairan EE. Ampasnya bisa digunakan sebagai pupuk padat.</li>
                                </ol>
                                <div class="teacher-note"><p class="font-semibold">Aktivitas Praktik:</p><p>Demonstrasikan cara mencampur bahan EE dalam botol plastik bekas. Ajak santri untuk mulai mengumpulkan kulit buah dari dapur untuk proyek EE kelas.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Kalkulator Eco-Enzyme</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <h4 class="font-semibold text-lg mb-4 text-center">Hitung Takaran Resep Eco-Enzyme</h4>
                        <div>
                            <label for="ee-waste" class="block font-medium mb-2">Jumlah Sampah Organik (Kulit Buah): <span id="ee-waste-val" class="font-bold">300</span> gram</label>
                            <input type="range" id="ee-waste" min="150" max="1500" value="300" step="150" class="w-full">
                        </div>
                        <div id="ee-result" class="mt-4 p-4 bg-white rounded-md text-center">
                            <p>Anda membutuhkan:</p>
                            <p><strong id="ee-sugar-val" class="text-amber-800 text-xl">100</strong> gram Gula Merah</p>
                            <p><strong id="ee-water-val" class="text-sky-800 text-xl">1000</strong> ml (1 liter) Air</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-4">Latihan Formatif 3</h2>
                    <div id="quiz3"></div>
                </div>
            </section>

            <!-- Pertemuan 4: Maggot BSF -->
            <section id="pertemuan4" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-1">Pertemuan 4 dari 4</h2>
                    <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Tentara Pengurai Super Cepat (Maggot BSF)</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Mengenal lalat Black Soldier Fly (BSF) dan siklus hidupnya.</li>
                                <li>Menjelaskan peran maggot BSF sebagai pengurai sampah organik.</li>
                                <li>Mengetahui manfaat maggot BSF sebagai pakan ternak berprotein tinggi.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Mempelajari maggot BSF adalah bentuk <strong>Tafakkur</strong>, merenungkan ciptaan Allah ﷻ. Lalat yang sering dianggap menjijikkan, ternyata pada fase larvanya (maggot) memiliki manfaat yang luar biasa dahsyat. Ini membuktikan bahwa tidak ada ciptaan Allah yang sia-sia (QS. Ali 'Imran: 191). Siklus hidupnya yang sempurna adalah tanda kekuasaan Allah yang Maha Mengatur.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                            <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p><strong>Langkah 1: Siapakah Maggot BSF? (15 Menit)</strong></p>
                                <p>Maggot BSF adalah larva dari lalat Black Soldier Fly (BSF) atau <i>Hermetia illucens</i>. Lalat ini BUKAN lalat pembawa penyakit seperti lalat hijau. Maggot BSF adalah "mesin" pengurai sampah organik paling rakus dan paling cepat di dunia. Mereka bisa menghabiskan sampah sisa makanan dalam hitungan jam, jauh lebih cepat dari komposting biasa, dan tidak menimbulkan bau busuk.</p>
                                <img src="https://i.ibb.co/3YtN1tX/maggot-bsf.png" alt="Maggot BSF" class="rounded-lg w-full max-w-sm mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/500x300/fde68a/78350f?text=Gagal+Memuat+Gambar';">

                                <p class="mt-4"><strong>Langkah 2: Siklus Hidup Ajaib BSF (25 Menit)</strong></p>
                                <p>BSF mengalami metamorfosis sempurna. Memahami siklus ini penting untuk budidaya.</p>
                                <ul class="list-decimal list-inside ml-4 text-sm space-y-1">
                                    <li><strong>Telur:</strong> Lalat BSF dewasa meletakkan ratusan telur di dekat sumber sampah organik.</li>
                                    <li><strong>Larva (Maggot):</strong> Telur menetas menjadi maggot kecil yang langsung makan dengan rakus selama sekitar 14-18 hari. Di fase inilah mereka mengurai sampah.</li>
                                    <li><strong>Prepupa:</strong> Maggot berhenti makan, warnanya menjadi hitam, dan mencari tempat kering untuk menjadi pupa.</li>
                                    <li><strong>Pupa (Kepompong):</strong> Fase "tidur" selama sekitar 1-2 minggu.</li>
                                    <li><strong>Lalat Dewasa:</strong> Pupa berubah menjadi lalat BSF dewasa yang siap kawin dan bertelur lagi. Lalat dewasa tidak makan, hanya minum, dan hidupnya singkat (sekitar 7-10 hari).</li>
                                </ul>

                                <p class="mt-4"><strong>Langkah 3: Manfaat Ganda Maggot BSF (20 Menit)</strong></p>
                                <p>Budidaya maggot BSF memberikan dua keuntungan utama:</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                   <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                                        <h4 class="font-bold text-green-800">1. Pengelolaan Sampah Cepat</h4>
                                        <p class="text-sm">Menjadi solusi untuk sampah dapur, restoran, atau pasar yang jumlahnya banyak. Mengurangi volume sampah secara drastis.</p>
                                    </div>
                                   <div class="p-4 bg-sky-50 border-l-4 border-sky-500 rounded-r-lg">
                                        <h4 class="font-bold text-sky-800">2. Pakan Ternak Super</h4>
                                        <p class="text-sm">Maggot kering mengandung protein sangat tinggi (±40%), sangat baik untuk pakan ikan (lele, nila), unggas (ayam, bebek), dan reptil.</p>
                                    </div>
                                </div>
                                <div class="teacher-note"><p class="font-semibold">Aktivitas Praktik:</p><p>Jika memungkinkan, tunjukkan video tentang budidaya maggot BSF. Ajak santri berdiskusi tentang potensi penerapan BSF di lingkungan Markaz untuk mengelola sampah dapur dan menyediakan pakan untuk kolam lele.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Siklus Hidup BSF</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="text-center font-semibold mb-4">Klik pada setiap tahap untuk melihat penjelasannya!</p>
                        <div class="flex flex-wrap justify-center items-center gap-4 text-center">
                            <div class="lifecycle-stage p-2 border-2 rounded-lg" data-info="Lalat BSF dewasa akan mencari tempat untuk meletakkan ratusan telur di dekat sumber makanan organik.">Telur</div>
                            <div class="text-amber-800 font-bold">➔</div>
                            <div class="lifecycle-stage p-2 border-2 rounded-lg" data-info="Fase paling aktif! Larva atau maggot makan dengan sangat rakus untuk tumbuh besar. Di sinilah proses penguraian sampah terjadi.">Larva (Maggot)</div>
                            <div class="text-amber-800 font-bold">➔</div>
                            <div class="lifecycle-stage p-2 border-2 rounded-lg" data-info="Maggot berhenti makan dan warnanya menghitam. Ia akan memanjat mencari tempat yang kering dan aman untuk berubah menjadi pupa.">Prepupa</div>
                            <div class="text-amber-800 font-bold">➔</div>
                             <div class="lifecycle-stage p-2 border-2 rounded-lg" data-info="Fase diam seperti kepompong. Di dalamnya, ia bermetamorfosis menjadi lalat dewasa.">Pupa</div>
                            <div class="text-amber-800 font-bold">➔</div>
                             <div class="lifecycle-stage p-2 border-2 rounded-lg" data-info="Lalat dewasa keluar dari cangkang pupa. Tugasnya hanya minum, kawin, dan bertelur untuk memulai siklus baru.">Lalat Dewasa</div>
                        </div>
                        <p id="bsf-lifecycle-info" class="mt-4 p-3 bg-white rounded-md text-center min-h-[50px]">Penjelasan akan muncul di sini.</p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-4">Latihan Formatif 4</h2>
                    <div id="quiz4"></div>
                </div>
            </section>

            <!-- Tes Sumatif -->
            <section id="sumatif" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-amber-800 mb-4">Tes Sumatif Akhir</h2>
                    <p class="mb-6">Jawablah semua pertanyaan di bawah ini untuk mengukur pemahamanmu terhadap seluruh materi.</p>
                    <div id="quiz-sumatif"></div>
                    <div id="sumatif-result" class="hidden mt-6 text-center">
                        <h3 class="text-2xl font-bold text-amber-800">Hasil Tes Anda</h3>
                        <p class="text-4xl my-4">Skor: <span id="sumatif-score" class="font-bold">0</span> / <span id="sumatif-total" class="font-bold">0</span></p>
                        <button id="sumatif-retry-btn" class="font-semibold py-2 px-6 bg-amber-800 text-white rounded-full hover:bg-amber-900">Ulangi Tes</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const quizzes = {
            quiz1: [
                { q: "Konsep mengubah sampah menjadi sumber daya bermanfaat disebut...", a: ["Waste Disposal", "Waste-to-Resource", "Landfill", "Insinerasi"], correct: 1, explanation: "Waste-to-Resource adalah pola pikir utama dalam pengelolaan sampah modern." },
                { q: "Manakah dari berikut ini yang termasuk sampah organik?", a: ["Botol plastik", "Sisa sayuran", "Kaleng minuman", "Kantong kresek"], correct: 1, explanation: "Sampah organik berasal dari makhluk hidup dan dapat membusuk, seperti sisa sayuran." },
                { q: "Sampah yang tidak dapat membusuk secara alami disebut sampah...", a: ["Organik", "Basah", "Anorganik", "Hijau"], correct: 2, explanation: "Sampah anorganik adalah benda mati buatan manusia yang sulit terurai." },
                { q: "Langkah pertama dan paling krusial dalam pengelolaan sampah adalah...", a: ["Membakar", "Mengubur", "Membuang ke sungai", "Memilah"], correct: 3, explanation: "Tanpa pemilahan, proses daur ulang atau pengomposan tidak bisa berjalan efektif." },
                { q: "Mengubah sampah menjadi berkah adalah wujud dari sikap anti...", a: ["`Israf` dan `Tabdzir`", "`Thalabul 'Ilmi`", "`Ta'awun`", "`Sabar`"], correct: 0, explanation: "`Israf` (boros) dan `Tabdzir` (menyia-nyiakan) adalah sifat yang tercela, dan mengelola sampah adalah kebalikannya." },
                { q: "Contoh sampah anorganik adalah...", a: ["Daun kering", "Kertas bekas", "Tulang ikan", "Kulit buah"], correct: 1, explanation: "Meskipun berasal dari pohon, kertas telah melalui proses industri sehingga dikategorikan anorganik dalam pemilahan umum." },
                { q: "Apa dampak buruk dari sampah yang tidak dikelola?", a: ["Menjadi sumber penyakit", "Mencemari tanah dan air", "Menimbulkan bau tidak sedap", "Semua jawaban benar"], correct: 3, explanation: "Sampah yang menumpuk membawa banyak dampak negatif bagi kesehatan dan lingkungan." },
                { q: "Kebersihan adalah sebagian dari iman. Ungkapan ini dalam bahasa Arab adalah...", a: ["Man Jadda Wajada", "An-Nadhofatu minal Iman", "Al-'Aqlu Salim fil Jismi Salim", "Khoirunnas Anfa'uhum linnas"], correct: 1, explanation: "Hadits ini menjadi dasar motivasi bagi seorang muslim untuk selalu menjaga kebersihan." },
                { q: "Di tempat sampah organik, kita TIDAK BOLEH membuang...", a: ["Sisa nasi", "Kulit semangka", "Baterai bekas", "Ranting pohon"], correct: 2, explanation: "Baterai bekas mengandung bahan kimia berbahaya dan termasuk dalam limbah B3 (Bahan Berbahaya dan Beracun)." },
                { q: "Manfaat utama dari memilah sampah anorganik adalah...", a: ["Bisa langsung dibakar", "Bisa dijadikan pakan ternak", "Bisa dijual ke bank sampah atau didaur ulang", "Bisa cepat membusuk"], correct: 2, explanation: "Sampah anorganik seperti botol plastik, kertas, dan logam memiliki nilai ekonomis jika dipilah." }
            ],
            quiz2: [
                { q: "Hasil akhir dari proses pengomposan yang subur sering disebut...", a: ["Tanah Liat", "Pasir", "Emas Hitam", "Sampah Kering"], correct: 2, explanation: "Kompos dijuluki 'Emas Hitam' karena nilainya yang sangat tinggi untuk kesuburan tanah." },
                { q: "Bahan 'Cokelat' dalam komposter berfungsi sebagai sumber...", a: ["Nitrogen", "Protein", "Air", "Karbon"], correct: 3, explanation: "Bahan kering seperti daun dan kardus adalah sumber Karbon, 'energi' bagi mikroorganisme." },
                { q: "Manakah yang termasuk bahan 'Hijau' untuk kompos?", a: ["Daun kering", "Kardus bekas", "Sisa potongan sayuran", "Serbuk gergaji"], correct: 2, explanation: "Bahan 'Hijau' adalah bahan basah yang kaya Nitrogen, seperti sisa sayuran." },
                { q: "Rasio perbandingan bahan Cokelat dan Hijau yang ideal adalah...", a: ["1 Cokelat : 2 Hijau", "1 Cokelat : 1 Hijau", "2 Cokelat : 1 Hijau", "Hanya Cokelat"], correct: 2, explanation: "Lebih banyak bahan kering (Cokelat) akan membantu menyerap kelembapan dan mencegah bau." },
                { q: "Mengapa komposter perlu diaduk secara berkala (misal seminggu sekali)?", a: ["Agar tidak dicuri", "Untuk memberikan oksigen kepada mikroba", "Agar lebih padat", "Untuk membunuh mikroba"], correct: 1, explanation: "Mikroorganisme pengurai kompos membutuhkan oksigen (aerobik) untuk bekerja secara optimal." },
                { q: "Melihat proses pembusukan sampah menjadi tanah yang subur adalah bentuk...", a: ["`Tadabbur Alam`", "`Ghibah`", "`Israf`", "`Taklid`"], correct: 0, explanation: "`Tadabbur Alam` adalah merenungkan kebesaran ciptaan Allah di alam semesta, termasuk siklus dekomposisi." },
                { q: "Apa yang akan terjadi jika komposter terlalu banyak bahan Hijau (basah)?", a: ["Akan kering kerontang", "Akan menjadi sangat panas", "Akan menjadi becek, padat, dan sangat bau", "Akan menghasilkan plastik"], correct: 2, explanation: "Terlalu banyak bahan basah akan mengurangi oksigen dan memicu proses pembusukan anaerobik yang menghasilkan bau tidak sedap." },
                { q: "Lapisan paling atas pada tumpukan komposter sebaiknya adalah...", a: ["Bahan Hijau", "Bahan Cokelat", "Plastik", "Air"], correct: 1, explanation: "Menutup dengan lapisan bahan Cokelat (daun kering) akan berfungsi sebagai 'filter' alami untuk mengurangi bau." },
                { q: "Manfaat utama kompos bagi tanah adalah...", a: ["Membuat tanah menjadi keras", "Memperbaiki struktur tanah dan menambah nutrisi", "Membunuh semua cacing", "Membuat tanah menjadi steril"], correct: 1, explanation: "Kompos meningkatkan kemampuan tanah menahan air dan menyediakan unsur hara yang dibutuhkan tanaman." },
                { q: "Proses pembuatan kompos adalah contoh nyata bahwa dalam Islam...", a: ["Semua sampah harus dibakar", "Tidak ada sesuatu yang diciptakan sia-sia", "Kita harus membuang sampah jauh-jauh", "Alam adalah musuh manusia"], correct: 1, explanation: "Dengan ilmu, sesuatu yang dianggap limbah (sampah) bisa diubah menjadi berkah (pupuk)." }
            ],
            quiz3: [
                { q: "Rasio ajaib untuk membuat Eco-Enzyme adalah...", a: ["1:1:1", "1:2:3", "1:3:10", "10:3:1"], correct: 2, explanation: "Rasionya adalah 1 bagian Gula : 3 bagian Sampah Organik : 10 bagian Air." },
                { q: "Bahan yang TIDAK BOLEH digunakan untuk membuat Eco-Enzyme adalah...", a: ["Kulit jeruk", "Sisa potongan wortel", "Sisa ayam goreng", "Kulit nanas"], correct: 2, explanation: "Sampah yang berminyak, sudah dimasak, atau busuk akan mengganggu proses fermentasi." },
                { q: "Berapa lama waktu minimal proses fermentasi Eco-Enzyme?", a: ["3 Hari", "3 Minggu", "3 Bulan", "3 Tahun"], correct: 2, explanation: "Proses fermentasi membutuhkan waktu 3 bulan agar semua bahan terurai sempurna." },
                { q: "Wadah terbaik untuk membuat Eco-Enzyme adalah...", a: ["Wadah kaca tertutup rapat", "Wadah plastik", "Wadah logam", "Kantong plastik tipis"], correct: 1, explanation: "Wadah plastik lebih aman karena proses fermentasi menghasilkan gas yang bisa menyebabkan wadah kaca pecah." },
                { q: "Salah satu manfaat utama Eco-Enzyme adalah sebagai...", a: ["Minuman kesehatan", "Bahan bakar", "Pembersih alami dan pupuk cair", "Bahan bangunan"], correct: 2, explanation: "Eco-Enzyme sangat efektif sebagai pembersih serbaguna dan pupuk organik cair untuk tanaman." },
                { q: "Mengapa tutup wadah Eco-Enzyme perlu dibuka secara berkala pada bulan pertama?", a: ["Untuk memasukkan oksigen", "Untuk mengeluarkan gas hasil fermentasi", "Untuk mengaduk isinya", "Untuk menambahkan air"], correct: 1, explanation: "Fermentasi awal menghasilkan banyak gas yang perlu dikeluarkan agar wadah tidak meledak." },
                { q: "Ampas sisa dari pembuatan Eco-Enzyme dapat dimanfaatkan sebagai...", a: ["Pakan ikan", "Bahan bangunan", "Pupuk organik padat", "Harus dibuang"], correct: 2, explanation: "Ampas EE masih kaya nutrisi dan sangat baik untuk dijadikan pupuk atau dicampur ke dalam komposter." },
                { q: "Eco-Enzyme yang berhasil akan memiliki aroma...", a: ["Busuk seperti sampah", "Asam manis segar seperti cuka buah", "Tidak berbau sama sekali", "Bau seperti alkohol"], correct: 1, explanation: "Aroma asam manis yang segar menandakan proses fermentasi berjalan dengan baik." },
                { q: "Gula yang paling baik digunakan untuk membuat Eco-Enzyme adalah...", a: ["Gula Pasir Putih", "Gula Merah atau Molase", "Gula Batu", "Pemanis buatan"], correct: 1, explanation: "Gula merah atau molase kaya akan mineral yang dibutuhkan oleh mikroorganisme untuk proses fermentasi." },
                { q: "Prinsip membuat pembersih alami dari kulit buah selaras dengan nilai Islam yaitu...", a: ["`Riya` (pamer)", "`Thaharah` (kesucian)", "`Namimah` (adu domba)", "`Ghibah` (menggunjing)"], correct: 1, explanation: "Menggunakan bahan yang suci (kulit buah) untuk membuat alat pembersih adalah cerminan dari konsep Thaharah." }
            ],
            quiz4: [
                { q: "Fase dari BSF yang paling rakus memakan sampah organik adalah...", a: ["Telur", "Larva (Maggot)", "Pupa", "Lalat Dewasa"], correct: 1, explanation: "Pada fase larva atau maggot, tugas utamanya adalah makan sebanyak-banyaknya untuk tumbuh." },
                { q: "Lalat BSF dewasa makan apa?", a: ["Sampah busuk", "Nektar bunga", "Darah", "Tidak makan, hanya minum"], correct: 3, explanation: "Lalat BSF dewasa tidak memiliki mulut untuk makan, mereka hanya minum untuk bertahan hidup selama masa kawin." },
                { q: "Manfaat utama dari budidaya maggot BSF adalah...", a: ["Menghasilkan madu", "Mengelola sampah dan menghasilkan pakan ternak", "Mengusir nyamuk", "Menghasilkan kain sutra"], correct: 1, explanation: "Maggot BSF adalah solusi 2-in-1: mengatasi masalah sampah organik dan menghasilkan pakan berprotein tinggi." },
                { q: "Maggot BSF sangat baik dijadikan pakan ternak karena kandungan ... yang tinggi.", a: ["Karbohidrat", "Lemak", "Vitamin C", "Protein"], correct: 3, explanation: "Maggot kering mengandung sekitar 40% protein, sangat bagus untuk pertumbuhan ikan dan unggas." },
                { q: "Merenungkan kehebatan maggot sebagai ciptaan Allah adalah bentuk sikap...", a: ["`Tafakkur`", "`Hasad`", "`Ghibah`", "`Takabbur`"], correct: 0, explanation: "`Tafakkur` adalah berpikir dan merenungkan tanda-tanda kebesaran Allah di alam semesta." },
                { q: "Fase di mana maggot berhenti makan dan warnanya menjadi hitam disebut...", a: ["Larva", "Pupa", "Prepupa", "Imago"], correct: 2, explanation: "Prepupa adalah fase transisi sebelum menjadi pupa, di mana ia akan mencari tempat kering untuk berdiam." },
                { q: "Mengapa lalat BSF dianggap tidak berbahaya dan bukan pembawa penyakit?", a: ["Karena ukurannya kecil", "Karena tidak hinggap di tempat kotor dan mulutnya tidak berfungsi untuk makan", "Karena warnanya hitam", "Karena hidupnya singkat"], correct: 1, explanation: "Lalat BSF tidak tertarik pada makanan manusia dan tidak memindahkan kuman seperti lalat hijau atau lalat rumah." },
                { q: "Sisa media tempat maggot BSF dibudidayakan disebut 'kasgot', yang bermanfaat sebagai...", a: ["Pakan ternak", "Pupuk organik berkualitas tinggi", "Bahan bangunan", "Harus dibuang karena berbahaya"], correct: 1, explanation: "Kasgot (bekas maggot) adalah pupuk organik yang sangat subur karena telah diproses secara alami oleh maggot." },
                { q: "Berapa lama kira-kira siklus hidup lalat BSF dari telur hingga mati?", a: ["Sekitar 1 minggu", "Sekitar 1 bulan", "Sekitar 40-45 hari", "Sekitar 1 tahun"], correct: 2, explanation: "Seluruh siklus hidupnya dari telur, larva, pupa, hingga lalat dewasa mati berlangsung kurang lebih 45 hari." },
                { q: "Ayat Al-Qur'an yang relevan dengan pelajaran tentang maggot BSF (tidak ada ciptaan yang sia-sia) adalah...", a: ["QS. Al-Baqarah: 255 (Ayat Kursi)", "QS. Ali 'Imran: 191", "QS. Al-Ikhlas: 1-4", "QS. Al-Fatihah: 1-7"], correct: 1, explanation: "QS. Ali 'Imran: 191 berisi tentang orang-orang berakal (ulil albab) yang merenungkan penciptaan langit dan bumi dan berkata 'Ya Tuhan kami, tiadalah Engkau menciptakan ini dengan sia-sia'." }
            ],
            'quiz-sumatif': [
                { q: "Konsep mengubah sampah menjadi sumber daya disebut...", a: ["Landfill", "Insinerasi", "Waste-to-Resource", "Pemilahan"], correct: 2 },
                { q: "Manakah yang termasuk sampah organik?", a: ["Kantong kresek", "Kulit jeruk", "Botol kaca", "Kaleng soda"], correct: 1 },
                { q: "Bahan kering kaya karbon untuk komposting disebut...", a: ["Bahan Hijau", "Bahan Basah", "Bahan Cokelat", "Bahan Nitrogen"], correct: 2 },
                { q: "Rasio ideal untuk membuat Eco-Enzyme adalah...", a: ["1:1:1", "1:3:10", "3:1:10", "10:3:1"], correct: 1 },
                { q: "Fase lalat BSF yang paling efektif mengurai sampah adalah...", a: ["Telur", "Larva (Maggot)", "Pupa", "Lalat Dewasa"], correct: 1 },
                { q: "Prinsip Islam yang paling relevan dengan mengubah sampah menjadi berkah adalah anti-...", a: ["`Israf` (boros)", "`Tawadhu` (rendah hati)", "`Sabar`", "`Syukur`"], correct: 0 },
                { q: "Pupuk cair serbaguna yang dihasilkan dari fermentasi kulit buah adalah...", a: ["Kompos", "Kasgot", "Eco-Enzyme", "Maggot kering"], correct: 2 },
                { q: "Apa manfaat utama maggot BSF selain mengurai sampah?", a: ["Menjadi hiasan", "Menjadi pakan ternak berprotein tinggi", "Mengusir nyamuk", "Menghasilkan madu"], correct: 1 },
                { q: "Bahan 'Hijau' dalam komposting adalah sumber utama...", a: ["Karbon", "Energi", "Nitrogen", "Air"], correct: 2 },
                { q: "Memilah sampah adalah langkah pertama dan terpenting. Ini adalah cerminan dari nilai...", a: ["Kekayaan", "Kekuatan", "Amanah dan Kebersihan", "Kefasihan"], correct: 2 }
            ]
        };

        function createQuiz(quizId, quizData) {
            const quizContainer = document.getElementById(quizId);
            if(!quizContainer || !quizData || quizData.length === 0) return;
            quizContainer.innerHTML = '';
            let questionNumber = 0;
            
            quizData.forEach((item) => {
                questionNumber++;
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('mb-6');
                questionDiv.innerHTML = `<p class="font-semibold mb-3">${questionNumber}. ${item.q}</p>`;

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('space-y-2');

                item.a.forEach((option, optionIndex) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.type = 'button';
                    optionBtn.classList.add('quiz-option', 'w-full', 'text-left', 'p-3', 'border-2', 'rounded-lg');
                    optionBtn.innerHTML = option;
                    optionBtn.dataset.index = optionIndex;
                    optionsDiv.appendChild(optionBtn);
                });
                
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('mt-2', 'p-3', 'rounded-lg', 'text-sm', 'hidden', 'bg-yellow-50', 'border', 'border-yellow-200');
                if(item.explanation) {
                    explanationDiv.innerHTML = `<strong>Penjelasan:</strong> ${item.explanation}`;
                }

                questionDiv.appendChild(optionsDiv);
                questionDiv.appendChild(explanationDiv);
                quizContainer.appendChild(questionDiv);
            });
        }
        
        Object.keys(quizzes).forEach(quizId => {
            createQuiz(quizId, quizzes[quizId]);
        });
        
        function handleQuizInteraction() {
             document.querySelector('main').addEventListener('click', function(e) {
                if (e.target.matches('.quiz-option')) {
                    const questionDiv = e.target.closest('.mb-6');
                    const options = questionDiv.querySelectorAll('.quiz-option');
                    const quizContainer = questionDiv.parentElement;
                    const isSumatif = quizContainer.id === 'quiz-sumatif';
                    const questionIndex = Array.from(quizContainer.children).indexOf(questionDiv);
                    const quizId = quizContainer.id;
                    const questionData = quizzes[quizId][questionIndex];
                    
                    if (!questionData || questionDiv.dataset.answered === 'true') return;
                    questionDiv.dataset.answered = 'true';

                    const selectedOptionIndex = parseInt(e.target.dataset.index);
                    
                    options.forEach(opt => opt.disabled = true);

                    if (selectedOptionIndex === questionData.correct) {
                        e.target.classList.add('correct');
                    } else {
                        e.target.classList.add('incorrect');
                        if (options[questionData.correct]) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                    
                    const explanation = questionDiv.querySelector('.bg-yellow-50');
                    if (explanation && !isSumatif && questionData.explanation) {
                        explanation.classList.remove('hidden');
                    }

                    if (isSumatif) {
                       const allQuestions = Array.from(quizContainer.children).filter(el => el.classList.contains('mb-6'));
                       const allAnswered = allQuestions.every(qDiv => qDiv.dataset.answered === 'true');

                       if (allAnswered) {
                            let score = 0;
                            allQuestions.forEach((qDiv, idx) => {
                                const selected = qDiv.querySelector('.quiz-option.correct:not(.incorrect), .quiz-option.incorrect.correct');
                                if(selected && !selected.classList.contains('incorrect')){
                                    score++;
                                }
                            });
                            showSumatifResult(score, allQuestions.length);
                       }
                    }
                }
            });
        }
        
        handleQuizInteraction();
        
        function showSumatifResult(score, total) {
            const resultEl = document.getElementById('sumatif-result');
            if(resultEl) {
                document.getElementById('sumatif-score').textContent = score;
                document.getElementById('sumatif-total').textContent = total;
                resultEl.classList.remove('hidden');
            }
        }

        const retryBtn = document.getElementById('sumatif-retry-btn');
        if(retryBtn){
            retryBtn.addEventListener('click', () => {
                createQuiz('quiz-sumatif', quizzes['quiz-sumatif']);
                document.getElementById('sumatif-result').classList.add('hidden');
            });
        }
        
        const tabButtons = document.querySelectorAll('.tab-btn');
        const contentSections = document.querySelectorAll('.content-section');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const target = button.dataset.target;
                
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                contentSections.forEach(section => {
                    section.classList.toggle('active', section.id === target);
                });
                window.scrollTo(0,0);
            });
        });

        // P1 Simulation: Pilah Sampah
        const wasteSource = document.getElementById('waste-source');
        if (wasteSource) {
            wasteSource.addEventListener('click', function(e) {
                if (e.target.matches('.waste-item')) {
                    const item = e.target;
                    const type = item.dataset.type;
                    const destinationList = document.getElementById(`${type}-list`);
                    if (destinationList) {
                        const li = document.createElement('li');
                        li.textContent = item.textContent;
                        destinationList.appendChild(li);
                        item.remove();
                    }
                    if (wasteSource.children.length === 0) {
                        const instruction = document.getElementById('instruction');
                        if(instruction) instruction.textContent = 'Selesai! Barakallah fiik.';
                    }
                }
            });
        }
        
        // P2 Simulation: Cek Rasio Kompos
        const brownSlider = document.getElementById('compost-brown');
        const greenSlider = document.getElementById('compost-green');
        const compostResult = document.getElementById('compost-ratio-result');

        function updateCompostRatio() {
            if (!brownSlider || !greenSlider || !compostResult) return;
            const brown = parseInt(brownSlider.value);
            const green = parseInt(greenSlider.value);
            document.getElementById('compost-brown-val').textContent = brown;
            document.getElementById('compost-green-val').textContent = green;

            const ratio = brown / green;
            if (ratio >= 1.5 && ratio <= 3) {
                compostResult.textContent = 'Rasio Seimbang! Kompos akan berhasil, insya Allah.';
                compostResult.className = 'mt-4 text-center h-12 p-2 bg-green-100 rounded-md font-bold text-lg text-green-700';
            } else if (ratio < 1.5) {
                compostResult.textContent = 'Terlalu banyak Hijau! Tambah daun kering agar tidak bau.';
                compostResult.className = 'mt-4 text-center h-12 p-2 bg-yellow-100 rounded-md font-bold text-lg text-yellow-700';
            } else {
                compostResult.textContent = 'Terlalu banyak Cokelat! Tambah sisa sayur agar proses lebih cepat.';
                compostResult.className = 'mt-4 text-center h-12 p-2 bg-blue-100 rounded-md font-bold text-lg text-blue-700';
            }
        }

        if(brownSlider) brownSlider.addEventListener('input', updateCompostRatio);
        if(greenSlider) greenSlider.addEventListener('input', updateCompostRatio);
        if(compostResult) updateCompostRatio();
        
        // P3 Simulation: Kalkulator Eco-Enzyme
        const eeWasteSlider = document.getElementById('ee-waste');
        if(eeWasteSlider) {
            eeWasteSlider.addEventListener('input', function() {
                const wasteAmount = parseInt(this.value);
                const sugarAmount = wasteAmount / 3;
                const waterAmount = wasteAmount * (10/3);

                document.getElementById('ee-waste-val').textContent = wasteAmount;
                document.getElementById('ee-sugar-val').textContent = Math.round(sugarAmount);
                document.getElementById('ee-water-val').textContent = Math.round(waterAmount);
            });
        }

        // P4 Simulation: Siklus Hidup BSF
        document.querySelectorAll('.lifecycle-stage').forEach(stage => {
            stage.addEventListener('click', function() {
                const infoEl = document.getElementById('bsf-lifecycle-info');
                if(infoEl) infoEl.textContent = this.dataset.info;
            });
        });
    });
    </script>
</body>
</html>

