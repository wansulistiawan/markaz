<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul IPA-204: Sistem Peredaran Darah Manusia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background-color: #c2410c; /* orange-700 */
            color: white;
            border-color: #c2410c;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }
        .quiz-option {
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            background-color: #f1f5f9; /* slate-100 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .teacher-note {
            background-color: #fefce8; /* yellow-50 */
            border-left: 4px solid #eab308; /* yellow-500 */
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        .blood-vessel-btn {
            position: absolute;
            transform: translate(-50%, -50%);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 2px solid white;
        }
    </style>
</head>
<body class="text-slate-800 text-base">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Judul Utama -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-orange-700">Modul Pembelajaran Interaktif</h1>
            <p class="text-xl text-slate-600 mt-2">IPA-204: Sistem Peredaran Darah Manusia</p>
        </header>

        <!-- Navigasi Tab -->
        <nav class="mb-8 flex flex-wrap justify-center gap-2 md:gap-4">
            <button class="tab-btn active w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan1">Pertemuan 1: Komponen Darah & Jantung</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan2">Pertemuan 2: Perjalanan Darah</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan3">Pertemuan 3: Golongan Darah & Kesehatan</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="pertemuan4">Pertemuan 4: Gangguan & Penyakit</button>
            <button class="tab-btn w-full md:w-auto font-semibold py-2 px-4 border-2 border-slate-300 rounded-full" data-target="sumatif">Tes Sumatif</button>
        </nav>

        <main>
            <!-- Pertemuan 1: Komponen Darah & Jantung -->
            <section id="pertemuan1" class="content-section active">
                <div class="card">
                     <h2 class="text-2xl font-bold text-orange-700 mb-1">Pertemuan 1 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Mengenal Komponen Darah dan Struktur Jantung</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Mengidentifikasi empat komponen utama penyusun darah (plasma, sel darah merah, sel darah putih, keping darah).</li>
                                <li>Menjelaskan fungsi dari masing-masing komponen darah.</li>
                                <li>Mengidentifikasi empat ruang utama jantung dan katup-katupnya.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini adalah sarana untuk <strong>Tadabbur</strong> atas keagungan ciptaan Allah ﷻ di dalam diri kita sendiri. Sistem peredaran darah yang bekerja tanpa henti, bahkan saat kita tidur, adalah bukti nyata kekuasaan dan kasih sayang-Nya. Ini menumbuhkan rasa <strong>Syukur</strong> dan mendorong kita untuk menjaga <strong>Amanah</strong> kesehatan yang telah Allah berikan.</p>
                             <div class="p-4 bg-red-50 border-l-4 border-red-600 rounded-r-lg text-red-900 mt-2">
                                <p class="font-semibold">QS. Adz-Dzariyat (51:21)</p>
                                <p class="italic">"Dan (juga) pada dirimu sendiri. Maka apakah kamu tidak memperhatikan?"</p>
                            </div>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <div class="space-y-4">
                                    <p><strong>Langkah 1: "Sungai Kehidupan" di Tubuh Kita (20 Menit)</strong></p>
                                    <p>Bismillah. Tubuh kita ini seperti sebuah kota besar yang padat penduduk (sel-sel). Setiap sel butuh makanan (oksigen & nutrisi) dan perlu membuang sampahnya (karbon dioksida). Bagaimana cara mengirim dan membuangnya? Melalui "sungai kehidupan" yang mengalir di seluruh tubuh kita, yaitu <strong>darah</strong>.</p>
                                    <p>Darah bukan sekadar cairan merah. Ia terdiri dari 4 komponen utama:</p>
                                    <img src="https://i.ibb.co/L84jsbB/blood-components.png" alt="Komponen Darah Manusia" class="rounded-lg w-full max-w-md mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/600x300/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                                    <ul class="list-disc list-inside ml-4 mt-2">
                                        <li><strong>Plasma Darah:</strong> "Air sungai"-nya. Cairan kekuningan yang membawa sel-sel darah, nutrisi, hormon, dan limbah.</li>
                                        <li><strong>Sel Darah Merah (Eritrosit):</strong> "Perahu pengangkut oksigen". Bertugas mengikat oksigen dari paru-paru dan mengantarnya ke seluruh sel tubuh.</li>
                                        <li><strong>Sel Darah Putih (Leukosit):</strong> "Prajurit" tubuh. Bertugas melawan kuman, virus, dan bakteri yang masuk.</li>
                                        <li><strong>Keping Darah (Trombosit):</strong> "Tim penambal". Bertugas menghentikan pendarahan dengan cara membekukan darah saat kita terluka.</li>
                                    </ul>
                                    
                                    <p class="mt-4"><strong>Langkah 2: "Pompa" Tak Kenal Lelah - Jantung (40 Menit)</strong></p>
                                    <p>Agar "sungai" ini bisa mengalir, butuh "pompa" yang luar biasa kuat. Itulah <strong>jantung</strong>. Jantung kita berdetak sekitar 100.000 kali setiap hari tanpa pernah kita suruh. Masya Allah!</p>
                                    <p>Jantung memiliki 4 "ruangan" utama:</p>
                                    <img src="https://i.ibb.co/VMy4bX2/human-heart-anatomy.png" alt="Anatomi Jantung Manusia" class="rounded-lg w-full max-w-md mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/600x400/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                                        <div class="p-3 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                                            <h4 class="font-bold text-blue-800">Sisi Kanan (Darah Kotor)</h4>
                                            <p class="text-sm">Menerima darah yang miskin oksigen dari seluruh tubuh.</p>
                                            <ul class="list-disc list-inside ml-4 text-sm">
                                                <li><strong>Serambi Kanan (Atrium Kanan):</strong> Ruang penerima.</li>
                                                <li><strong>Bilik Kanan (Ventrikel Kanan):</strong> Ruang pemompa ke paru-paru.</li>
                                            </ul>
                                        </div>
                                         <div class="p-3 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                                            <h4 class="font-bold text-red-800">Sisi Kiri (Darah Bersih)</h4>
                                            <p class="text-sm">Menerima darah yang kaya oksigen dari paru-paru.</p>
                                            <ul class="list-disc list-inside ml-4 text-sm">
                                                <li><strong>Serambi Kiri (Atrium Kiri):</strong> Ruang penerima.</li>
                                                <li><strong>Bilik Kiri (Ventrikel Kiri):</strong> Ruang pemompa ke seluruh tubuh (dindingnya paling tebal dan kuat).</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <p class="mt-2">Di antara ruangan-ruangan ini, terdapat "pintu-pintu" satu arah yang disebut <strong>katup</strong>, yang memastikan darah mengalir ke arah yang benar dan tidak kembali lagi.</p>
                                    <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Mengapa dinding bilik kiri jauh lebih tebal daripada bilik kanan? (Jawaban: Karena bilik kiri harus memompa darah ke seluruh tubuh yang jaraknya jauh, sedangkan bilik kanan hanya ke paru-paru yang letaknya dekat)."</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Kenali Komponen Darah</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="mb-4 text-center font-semibold">Klik pada komponen darah untuk melihat fungsinya!</p>
                        <div class="flex justify-around items-center h-48" id="blood-components">
                            <button class="blood-btn p-3 text-sm bg-yellow-200 rounded-full" data-info="Plasma: Cairan yang membawa sel darah, nutrisi, dan hormon.">Plasma</button>
                            <button class="blood-btn p-3 text-sm bg-red-300 rounded-full" data-info="Sel Darah Merah: Mengangkut oksigen ke seluruh tubuh.">Eritrosit</button>
                            <button class="blood-btn p-3 text-sm bg-blue-200 rounded-full" data-info="Sel Darah Putih: Melawan infeksi kuman dan penyakit.">Leukosit</button>
                            <button class="blood-btn p-3 text-sm bg-gray-300 rounded-full" data-info="Keping Darah: Membantu proses pembekuan darah saat luka.">Trombosit</button>
                        </div>
                        <p id="blood-info" class="mt-4 text-center h-12 p-2 bg-white rounded-md"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-orange-700 mb-4">Latihan Formatif 1</h2>
                    <div id="quiz1"></div>
                </div>
            </section>
            
            <section id="pertemuan2" class="content-section">
                 <div class="card">
                     <h2 class="text-2xl font-bold text-orange-700 mb-1">Pertemuan 2 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Perjalanan Darah & Pembuluh Darah</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Membedakan tiga jenis pembuluh darah: Arteri, Vena, dan Kapiler.</li>
                                <li>Menjelaskan alur peredaran darah besar (sistemik).</li>
                                <li>Menjelaskan alur peredaran darah kecil (pulmonal).</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini memperlihatkan <strong>Keteraturan (`Nizham`)</strong> ciptaan Allah ﷻ. Darah tidak mengalir sembarangan, tapi melalui jalur-jalur spesifik dengan tugas yang jelas. Ini mengajarkan kita untuk menghargai sistem dan keteraturan, serta memahami bahwa setiap bagian dari ciptaan-Nya memiliki tujuan yang presisi.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p class="mb-2"><strong>Langkah 1: "Jalan Tol" Tubuh - Pembuluh Darah (20 Menit)</strong></p>
                                <p>Jika darah adalah "sungai" dan jantung adalah "pompa", maka pembuluh darah adalah "jaringan pipa" atau "jalan tol" yang menjangkau setiap sudut "kota" tubuh kita. Ada 3 jenis jalan utama:</p>
                                <img src="https://i.ibb.co/hX8yC0w/blood-vessels.png" alt="Jenis Pembuluh Darah" class="rounded-lg w-full max-w-md mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/600x300/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>Arteri (Jalan Keluar dari Jantung):</strong> Dindingnya tebal dan elastis karena harus menahan tekanan tinggi dari pompa jantung. Tugasnya membawa darah KAYA OKSIGEN (darah bersih) dari jantung ke seluruh tubuh. Pengecualian: Arteri Pulmonalis.</li>
                                    <li><strong>Vena (Jalan Kembali ke Jantung):</strong> Dindingnya lebih tipis. Tugasnya membawa darah MISKIN OKSIGEN (darah kotor) dari seluruh tubuh kembali ke jantung. Pengecualian: Vena Pulmonalis.</li>
                                    <li><strong>Kapiler (Jalan Tikus):</strong> Pembuluh darah terkecil dan tertipis, ukurannya lebih kecil dari sehelai rambut. Di sinilah terjadi pertukaran oksigen dan karbon dioksida antara darah dan sel-sel tubuh.</li>
                                </ul>

                                <p class="mt-4"><strong>Langkah 2: Dua Rute Perjalanan Darah (40 Menit)</strong></p>
                                <p>Perjalanan darah di tubuh kita memiliki dua rute utama yang terjadi secara bersamaan, ini disebut peredaran darah ganda.</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                                    <div class="p-3 bg-red-50 border-l-4 border-red-500 rounded-r-lg">
                                        <h4 class="font-bold text-red-800">1. Peredaran Darah Besar (Sistemik)</h4>
                                        <p class="text-sm">Rute "logistik" utama untuk mengantar oksigen ke seluruh tubuh. Jalurnya:</p>
                                        <p class="text-sm mt-1 font-semibold">Bilik Kiri → Aorta (arteri terbesar) → Seluruh Tubuh → Vena → Serambi Kanan</p>
                                    </div>
                                    <div class="p-3 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                                        <h4 class="font-bold text-blue-800">2. Peredaran Darah Kecil (Pulmonal)</h4>
                                        <p class="text-sm">Rute "cuci darah" untuk mengambil oksigen di paru-paru. Jalurnya:</p>
                                        <p class="text-sm mt-1 font-semibold">Bilik Kanan → Arteri Pulmonalis → Paru-paru → Vena Pulmonalis → Serambi Kiri</p>
                                    </div>
                                </div>
                                <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Mengapa darah harus melewati paru-paru? Apa yang terjadi di sana? (Jawaban: Terjadi pertukaran gas, darah 'membuang' karbon dioksida dan 'mengambil' oksigen)."</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Jalur Peredaran Darah</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="mb-4 text-center font-semibold">Klik pada nama pembuluh darah untuk melihat fungsinya!</p>
                        <div class="relative max-w-sm mx-auto" id="circulation-sim">
                            <img src="https://i.ibb.co/bF0S4wK/circulatory-system-simple.png" alt="Sistem Peredaran Darah" class="w-full" onerror="this.onerror=null;this.src='https://placehold.co/400x500/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                            <button class="blood-vessel-btn bg-red-500 text-white" style="top: 40%; left: 65%;" data-info="Aorta: Arteri terbesar, membawa darah kaya oksigen dari bilik kiri ke seluruh tubuh.">Aorta</button>
                            <button class="blood-vessel-btn bg-blue-500 text-white" style="top: 40%; left: 35%;" data-info="Arteri Pulmonalis: Membawa darah miskin oksigen dari bilik kanan ke paru-paru.">Arteri Pulmonalis</button>
                            <button class="blood-vessel-btn bg-blue-500 text-white" style="top: 20%; left: 50%;" data-info="Vena Cava: Vena terbesar, membawa darah miskin oksigen dari tubuh kembali ke serambi kanan.">Vena Cava</button>
                            <button class="blood-vessel-btn bg-red-500 text-white" style="top: 52%; left: 40%;" data-info="Vena Pulmonalis: Membawa darah kaya oksigen dari paru-paru ke serambi kiri.">Vena Pulmonalis</button>
                            <button class="blood-vessel-btn bg-purple-500 text-white" style="top: 80%; left: 50%;" data-info="Kapiler: Pembuluh terkecil tempat pertukaran O2 dan CO2 dengan sel-sel tubuh.">Kapiler</button>
                        </div>
                        <p id="vessel-info" class="mt-4 text-center h-16 p-2 bg-white rounded-md"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-orange-700 mb-4">Latihan Formatif 2</h2>
                    <div id="quiz2"></div>
                </div>
            </section>
            
            <section id="pertemuan3" class="content-section">
                <div class="card">
                     <h2 class="text-2xl font-bold text-orange-700 mb-1">Pertemuan 3 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Golongan Darah, Transfusi, dan Menjaga Kesehatan</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Menjelaskan sistem golongan darah ABO dan Rhesus.</li>
                                <li>Mengidentifikasi kecocokan transfusi darah antar golongan darah.</li>
                                <li>Menyebutkan cara-cara menjaga kesehatan sistem peredaran darah.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini mengajarkan nilai <strong>Tolong-menolong (`Ta'awun`)</strong> melalui konsep donor darah. Mendonorkan darah adalah sedekah jariyah yang bisa menyelamatkan nyawa saudara kita. Selain itu, menjaga kesehatan jantung adalah bentuk <strong>Amanah</strong> dalam merawat tubuh yang dititipkan Allah ﷻ.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p class="mb-2"><strong>Langkah 1: "Kartu Identitas" Darah - Golongan Darah (25 Menit)</strong></p>
                                <p>Darah setiap orang terlihat sama, tapi sebenarnya memiliki "kartu identitas" yang berbeda, disebut <strong>golongan darah</strong>. Sistem yang paling umum adalah ABO, yang ditentukan oleh ada atau tidaknya protein khusus (antigen) di permukaan sel darah merah.</p>
                                <img src="https://i.ibb.co/Y0y4S26/blood-types-abo.png" alt="Golongan Darah ABO" class="rounded-lg w-full max-w-lg mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/700x200/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                                <ul class="list-disc list-inside ml-4">
                                    <li><strong>Golongan A:</strong> Punya Antigen A.</li>
                                    <li><strong>Golongan B:</strong> Punya Antigen B.</li>
                                    <li><strong>Golongan AB:</strong> Punya Antigen A dan B.</li>
                                    <li><strong>Golongan O:</strong> Tidak punya Antigen A maupun B.</li>
                                </ul>
                                <p class="mt-2">Ada juga sistem Rhesus (Rh), yaitu positif (+) jika ada antigen Rh, dan negatif (-) jika tidak ada. Mengetahui golongan darah sangat penting untuk transfusi darah.</p>

                                <p class="mt-4"><strong>Langkah 2: `Ta'awun` antar Sesama - Transfusi Darah (15 Menit)</strong></p>
                                <p>Transfusi adalah proses memindahkan darah dari pendonor ke penerima (resipien). Aturannya ketat untuk menghindari reaksi penolakan dari tubuh.</p>
                                <ul class="list-disc list-inside ml-4 text-sm">
                                    <li><strong>Golongan O:</strong> Disebut "donor universal" karena bisa mendonorkan ke semua golongan.</li>
                                    <li><strong>Golongan AB:</strong> Disebut "resipien universal" karena bisa menerima dari semua golongan.</li>
                                </ul>

                                <p class="mt-4"><strong>Langkah 3: Menjaga Amanah Kesehatan (20 Menit)</strong></p>
                                <p>Menjaga kesehatan jantung dan pembuluh darah adalah wajib sebagai bentuk syukur. Caranya:</p>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Makan makanan sehat dan seimbang, kurangi makanan berlemak dan terlalu asin.</li>
                                    <li>Rutin berolahraga.</li>
                                    <li>Istirahat yang cukup.</li>
                                    <li>Hindari merokok dan stres berlebihan.</li>
                                </ul>
                                <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Donor darah adalah sedekah yang luar biasa. Apa manfaat lain dari donor darah bagi pendonor itu sendiri?" (Jawaban: Menjaga kesehatan jantung, mendeteksi penyakit serius lebih dini, dll.)</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Uji Kecocokan Transfusi</h3>
                    <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="mb-4 text-center font-semibold">Pilih golongan darah pendonor dan resipien!</p>
                        <div class="flex justify-center items-center gap-4">
                            <div>
                                <label for="donor-type" class="block text-center font-medium">Pendonor</label>
                                <select id="donor-type" class="p-2 border rounded mt-1">
                                    <option>A</option><option>B</option><option>AB</option><option>O</option>
                                </select>
                            </div>
                            <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                            <div>
                                <label for="recipient-type" class="block text-center font-medium">Resipien</label>
                                <select id="recipient-type" class="p-2 border rounded mt-1">
                                    <option>A</option><option>B</option><option>AB</option><option>O</option>
                                </select>
                            </div>
                        </div>
                        <p id="transfusion-result" class="mt-4 text-center h-12 p-2 bg-white rounded-md font-bold text-lg"></p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-orange-700 mb-4">Latihan Formatif 3</h2>
                    <div id="quiz3"></div>
                </div>
            </section>

            <section id="pertemuan4" class="content-section">
                 <div class="card">
                     <h2 class="text-2xl font-bold text-orange-700 mb-1">Pertemuan 4 dari 4</h2>
                     <p class="text-lg text-slate-600 mb-4 border-b pb-4">Topik: Gangguan pada Sistem Peredaran Darah</p>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">A. Tujuan Pembelajaran</h3>
                            <ol class="list-decimal list-inside space-y-1">
                                <li>Mengidentifikasi gangguan umum seperti Anemia, Hipertensi, dan Jantung Koroner.</li>
                                <li>Menjelaskan penyebab utama dari gangguan-gangguan tersebut.</li>
                                <li>Menghubungkan gaya hidup sehat sebagai ikhtiar utama dalam pencegahan.</li>
                            </ol>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">B. Keterkaitan Nilai Islam</h3>
                            <p>Materi ini menekankan pentingnya tidak menjerumuskan diri ke dalam kebinasaan (<strong>`Tahlikah`</strong>) sesuai firman Allah di QS. Al-Baqarah: 195. Menjaga pola makan dan gaya hidup adalah bagian dari ikhtiar kita untuk menghindari penyakit, sebagai wujud nyata menjaga amanah kesehatan.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-orange-800 mb-2">C. Skenario Pembelajaran (90 Menit)</h3>
                             <div class="p-4 bg-slate-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Kegiatan Inti (60 Menit)</h4>
                                <p><strong>Langkah 1: Mengenal Gangguan Umum (30 Menit)</strong></p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h4 class="font-bold">Anemia (Kurang Darah)</h4>
                                        <p class="text-sm">Kondisi di mana tubuh kekurangan sel darah merah. Akibatnya, "perahu pengangkut oksigen" berkurang, membuat tubuh lemas, pusing, dan pucat. Penyebab utamanya adalah kekurangan zat besi.</p>
                                    </div>
                                    <div>
                                        <h4 class="font-bold">Hipertensi (Tekanan Darah Tinggi)</h4>
                                        <p class="text-sm">Kondisi di mana tekanan darah pada dinding arteri terlalu tinggi. Analogi: "tekanan pipa air" yang terlalu kencang. Jika dibiarkan, bisa merusak jantung dan pembuluh darah. Penyebabnya seringkali pola makan tinggi garam dan lemak.</p>
                                    </div>
                                     <div>
                                        <h4 class="font-bold">Penyakit Jantung Koroner</h4>
                                        <p class="text-sm">Penyumbatan pembuluh darah arteri koroner (yang memberi makan jantung) oleh plak lemak. Analogi: "pipa" jantung yang berkarat dan menyempit, membuat aliran darah ke otot jantung terganggu.</p>
                                    </div>
                                     <div>
                                        <h4 class="font-bold">Stroke</h4>
                                        <p class="text-sm">Terjadi ketika pasokan darah ke otak terganggu karena penyumbatan atau pecahnya pembuluh darah. Ini bisa menyebabkan kerusakan sel-sel otak.</p>
                                    </div>
                                </div>
                                <img src="https://i.ibb.co/3k5fTq8/atherosclerosis.png" alt="Aterosklerosis" class="rounded-lg w-full max-w-md mx-auto my-4" onerror="this.onerror=null;this.src='https://placehold.co/600x250/fee2e2/b91c1c?text=Gagal+Memuat+Gambar';">
                                
                                <p class="mt-4"><strong>Langkah 2: Ikhtiar Pencegahan (30 Menit)</strong></p>
                                <p>Mencegah lebih baik daripada mengobati. Penyakit-penyakit di atas sebagian besar disebabkan oleh gaya hidup. Ikhtiar kita untuk sehat adalah:</p>
                                <ul class="list-disc list-inside ml-4">
                                    <li><strong>Makan Makanan `Thayyib`:</strong > Perbanyak sayur, buah, dan makanan kaya serat. Kurangi garam, gula, dan lemak jenuh.</li>
                                    <li><strong>Olahraga Teratur:</strong> Sesuai sunnah seperti berenang, memanah, atau berlari.</li>
                                    <li><strong>Jaga Berat Badan Ideal.</strong></li>
                                    <li><strong>Istirahat Cukup.</strong></li>
                                </ul>
                                <div class="teacher-note"><p class="font-semibold">Poin Diskusi:</p><p>"Sebutkan contoh makanan yang baik untuk jantung dan yang buruk untuk jantung yang sering kita temui di lingkungan kita!"</p></div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-3 mt-4">Simulasi Interaktif: Cek Faktor Risiko</h3>
                     <div class="p-4 border rounded-lg bg-slate-50">
                        <p class="mb-4 text-center font-semibold">Centang kebiasaanmu untuk melihat level risiko penyakit jantung!</p>
                        <div class="space-y-2" id="risk-factors">
                            <label class="flex items-center"><input type="checkbox" class="h-4 w-4 mr-2 risk-check"> Suka makanan cepat saji / gorengan</label>
                            <label class="flex items-center"><input type="checkbox" class="h-4 w-4 mr-2 risk-check"> Jarang olahraga (kurang dari 2x seminggu)</label>
                            <label class="flex items-center"><input type="checkbox" class="h-4 w-4 mr-2 risk-check"> Sering begadang (kurang dari 6 jam tidur)</label>
                            <label class="flex items-center"><input type="checkbox" class="h-4 w-4 mr-2 risk-check"> Merokok atau berada di lingkungan perokok</label>
                        </div>
                        <div id="risk-result" class="mt-4 text-center p-3 rounded-lg font-bold"></div>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-orange-700 mb-4">Latihan Formatif 4</h2>
                    <div id="quiz4"></div>
                </div>
            </section>

            <section id="sumatif" class="content-section">
                <div class="card">
                    <h2 class="text-2xl font-bold text-orange-700 mb-4">Tes Sumatif</h2>
                    <p class="mb-4">Bismillah. Kerjakan soal-soal berikut untuk menguji pemahaman antum terhadap seluruh materi. Semoga Allah ﷻ berikan kemudahan.</p>
                </div>
                <div class="card">
                    <div id="quiz-sumatif"></div>
                    <div id="sumatif-result" class="mt-6 text-center hidden">
                        <h3 class="text-xl font-bold">Hasil Tes Sumatif</h3>
                        <p class="text-2xl mt-2">Skor Anda: <span id="sumatif-score" class="font-bold text-orange-600">0</span> / <span id="sumatif-total" class="font-bold">0</span></p>
                        <button id="sumatif-retry-btn" class="mt-4 bg-orange-500 text-white font-bold py-2 px-4 rounded hover:bg-orange-600">Ulangi Tes</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const quizzes = {
            quiz1: [
                { q: "Komponen darah yang berfungsi mengangkut oksigen adalah...", a: ["Plasma Darah", "Sel Darah Putih", "Sel Darah Merah", "Keping Darah"], correct: 2, explanation: "Sel Darah Merah (Eritrosit) mengandung hemoglobin yang mengikat oksigen." },
                { q: "Bagian darah yang berperan dalam sistem kekebalan tubuh melawan kuman adalah...", a: ["Eritrosit", "Leukosit", "Trombosit", "Plasma"], correct: 1, explanation: "Sel Darah Putih (Leukosit) adalah 'prajurit' yang melawan infeksi." },
                { q: "Saat terluka, komponen darah yang membantu menghentikan pendarahan adalah...", a: ["Plasma", "Eritrosit", "Leukosit", "Trombosit"], correct: 3, explanation: "Keping Darah (Trombosit) berperan dalam proses pembekuan darah." },
                { q: "Ruang jantung yang menerima darah kaya oksigen dari paru-paru adalah...", a: ["Serambi Kanan", "Bilik Kanan", "Serambi Kiri", "Bilik Kiri"], correct: 2, explanation: "Serambi Kiri adalah ruang pertama yang menerima darah bersih dari paru-paru." },
                { q: "Ruang jantung yang memiliki dinding paling tebal dan kuat adalah...", a: ["Serambi Kanan", "Bilik Kanan", "Serambi Kiri", "Bilik Kiri"], correct: 3, explanation: "Bilik Kiri bekerja paling keras untuk memompa darah ke seluruh tubuh, sehingga dinding ototnya paling tebal." },
                { q: "Fungsi utama katup jantung adalah...", a: ["Mempercepat aliran darah", "Menghasilkan sel darah", "Mencegah darah mengalir kembali ke ruang sebelumnya", "Memompa darah"], correct: 2, explanation: "Katup bekerja seperti pintu satu arah untuk menjaga aliran darah tetap teratur." },
                { q: "Bagian darah yang berupa cairan dan berjumlah paling banyak (sekitar 55%) adalah...", a: ["Sel Darah Merah", "Sel Darah Putih", "Keping Darah", "Plasma Darah"], correct: 3, explanation: "Plasma darah adalah matriks cair yang menjadi medium bagi komponen darah lainnya." },
                { q: "Darah yang berada di sisi kanan jantung adalah darah yang...", a: ["Kaya oksigen", "Miskin oksigen", "Tidak mengandung darah", "Menuju ke seluruh tubuh"], correct: 1, explanation: "Sisi kanan jantung menangani darah 'kotor' (miskin oksigen) yang kembali dari tubuh." },
                { q: "Mempelajari keajaiban sistem peredaran darah dapat menumbuhkan rasa...", a: ["Sombong", "Putus Asa", "Syukur kepada Allah ﷻ", "Biasa saja"], correct: 2, explanation: "Melihat sistem yang begitu kompleks dan sempurna di dalam diri kita seharusnya menumbuhkan rasa syukur atas ciptaan Allah." },
                { q: "Serambi Kanan jantung menerima darah dari...", a: ["Paru-paru", "Seluruh tubuh", "Bilik Kanan", "Aorta"], correct: 1, explanation: "Serambi Kanan adalah ruang pertama yang menerima darah miskin oksigen yang kembali dari seluruh tubuh." }
            ],
            quiz2: [
                { q: "Pembuluh darah yang dindingnya paling tebal dan elastis adalah...", a: ["Arteri", "Vena", "Kapiler", "Semuanya sama"], correct: 0, explanation: "Arteri harus kuat untuk menahan tekanan darah tinggi yang dipompa langsung dari jantung." },
                { q: "Pembuluh darah terkecil tempat terjadinya pertukaran gas dan nutrisi adalah...", a: ["Aorta", "Vena Cava", "Kapiler", "Arteri Pulmonalis"], correct: 2, explanation: "Dinding kapiler yang sangat tipis memungkinkan terjadinya difusi O2, CO2, dan nutrisi." },
                { q: "Peredaran darah besar dimulai dari... dan berakhir di...", a: ["Bilik Kanan, Serambi Kiri", "Bilik Kiri, Serambi Kanan", "Serambi Kiri, Bilik Kanan", "Serambi Kanan, Bilik Kiri"], correct: 1, explanation: "Peredaran darah besar memompa darah bersih dari Bilik Kiri ke seluruh tubuh dan kembali sebagai darah kotor ke Serambi Kanan." },
                { q: "Pembuluh darah yang membawa darah kaya oksigen dari paru-paru ke jantung adalah...", a: ["Arteri Pulmonalis", "Vena Pulmonalis", "Aorta", "Vena Cava"], correct: 1, explanation: "Ini adalah pengecualian. Vena Pulmonalis adalah satu-satunya vena yang membawa darah kaya oksigen (bersih)." },
                { q: "Tujuan utama dari peredaran darah kecil (pulmonal) adalah...", a: ["Mengedarkan sari makanan ke otak", "Mengambil oksigen di paru-paru", "Mendinginkan darah", "Mengirim darah ke kaki"], correct: 1, explanation: "Rute pendek ini bertujuan untuk 'mencuci' darah, yaitu melepaskan CO2 dan mengikat O2 di paru-paru." },
                { q: "Urutan yang benar untuk peredaran darah kecil adalah...", a: ["Bilik Kiri -> Tubuh -> Serambi Kanan", "Bilik Kanan -> Paru-paru -> Serambi Kiri", "Serambi Kanan -> Bilik Kanan -> Tubuh", "Serambi Kiri -> Bilik Kiri -> Paru-paru"], correct: 1, explanation: "Darah kotor dari Bilik Kanan dipompa ke Paru-paru, dan kembali sebagai darah bersih ke Serambi Kiri." },
                { q: "Pembuluh darah arteri umumnya membawa darah yang...", a: ["Kaya Karbon Dioksida", "Kaya Oksigen", "Tidak mengandung oksigen", "Beku"], correct: 1, explanation: "Fungsi utama arteri adalah mengedarkan darah bersih (kaya O2) dari jantung. Pengecualiannya adalah Arteri Pulmonalis." },
                { q: "Pembuluh Vena memiliki katup di sepanjang salurannya yang berfungsi untuk...", a: ["Mempercepat aliran darah", "Mencegah darah mengalir kembali ke bawah akibat gravitasi", "Menghangatkan darah", "Menyaring kotoran"], correct: 1, explanation: "Karena tekanan di vena rendah, katup ini penting untuk memastikan darah tetap mengalir menuju jantung, terutama dari kaki." },
                { q: "Keteraturan sistem peredaran darah adalah bukti dari sifat Allah yaitu...", a: ["Al-Khaliq (Maha Pencipta)", "Al-Mushawwir (Maha Pembentuk Rupa)", "Al-Bari' (Maha Mengadakan)", "Semua jawaban benar"], correct: 3, explanation: "Sistem yang teratur dan sempurna ini menunjukkan kekuasaan Allah dalam menciptakan, membentuk, dan mengadakannya." },
                { q: "Darah dalam arteri pulmonalis adalah darah yang...", a: ["Kaya oksigen menuju paru-paru", "Miskin oksigen menuju paru-paru", "Kaya oksigen dari paru-paru", "Miskin oksigen dari paru-paru"], correct: 1, explanation: "Arteri Pulmonalis adalah pengecualian, ia membawa darah miskin oksigen dari bilik kanan menuju paru-paru untuk dibersihkan." }
            ],
            quiz3: [
                { q: "Seseorang dengan golongan darah O disebut 'donor universal' karena...", a: ["Memiliki antigen A dan B", "Tidak memiliki antigen A maupun B", "Memiliki antibodi A dan B", "Darahnya paling langka"], correct: 1, explanation: "Karena tidak memiliki antigen di permukaan selnya, darah O tidak akan dianggap 'asing' oleh sistem imun resipien lain." },
                { q: "Golongan darah yang disebut 'resipien universal' adalah...", a: ["A", "B", "AB", "O"], correct: 2, explanation: "Golongan darah AB bisa menerima dari semua golongan karena tidak memiliki antibodi A maupun B di plasmanya." },
                { q: "Jika seseorang dengan golongan darah A menerima transfusi dari golongan darah B, apa yang akan terjadi?", a: ["Tidak terjadi apa-apa", "Akan terjadi penggumpalan darah (aglutinasi)", "Orang tersebut akan berubah golongan darah", "Darahnya menjadi lebih encer"], correct: 1, explanation: "Antibodi B di darah resipien A akan menyerang antigen B dari darah donor B, menyebabkan penggumpalan yang berbahaya." },
                { q: "Sistem Rhesus (Rh) pada darah ditentukan oleh...", a: ["Keberadaan antigen A", "Keberadaan antigen B", "Keberadaan antigen Rh", "Jumlah sel darah putih"], correct: 2, explanation: "Jika ada antigen Rh, maka rhesusnya positif (+). Jika tidak ada, maka negatif (-)." },
                { q: "Mendonorkan darah untuk menolong sesama adalah wujud pengamalan dari sifat...", a: ["`Ta'awun` (Tolong-menolong)", "`Ghadab` (Marah)", "`Hasad` (Dengki)", "`Kibr` (Sombong)"], correct: 0, explanation: "`Ta'awun` adalah saling menolong dalam kebaikan, dan donor darah adalah salah satu bentuknya yang mulia." },
                { q: "Manakah di bawah ini yang BUKAN cara menjaga kesehatan jantung?", a: ["Rutin berolahraga", "Makan makanan tinggi garam dan lemak jenuh", "Istirahat yang cukup", "Mengelola stres"], correct: 1, explanation: "Makanan tinggi garam dan lemak jenuh justru dapat menyebabkan hipertensi dan penyumbatan pembuluh darah." },
                { q: "Golongan darah A dapat mendonorkan darahnya kepada...", a: ["Hanya A", "Hanya AB", "A dan AB", "Semua golongan"], correct: 2, explanation: "Darah A bisa diterima oleh sesama A (karena antigennya sama) dan oleh AB (karena tidak punya antibodi A)." },
                { q: "Menjaga kesehatan tubuh yang dititipkan Allah adalah bentuk...", a: ["Amanah", "Riya'", "Israf", "Takdir"], correct: 0, explanation: "Tubuh kita adalah amanah dari Allah yang wajib kita jaga kesehatannya sebagai wujud rasa syukur." },
                { q: "Seorang resipien dengan golongan darah O hanya bisa menerima darah dari...", a: ["A", "B", "AB", "O"], correct: 3, explanation: "Karena darah O memiliki antibodi A dan B, ia akan menolak darah lain selain dari sesama O." },
                { q: "Apa manfaat kesehatan bagi pendonor darah secara rutin?", a: ["Membuat tubuh lebih gemuk", "Mengurangi risiko penyakit jantung dan kanker", "Menambah golongan darah", "Membuat kulit lebih putih"], correct: 1, explanation: "Donor darah secara rutin membantu menjaga kadar zat besi dalam tubuh tetap normal dan melancarkan aliran darah." }
            ],
            quiz4: [
                { q: "Kondisi kekurangan sel darah merah yang menyebabkan tubuh lemas dan pucat disebut...", a: ["Hipertensi", "Anemia", "Leukimia", "Stroke"], correct: 1, explanation: "Anemia secara harfiah berarti 'kekurangan darah', lebih tepatnya kekurangan sel darah merah atau hemoglobin." },
                { q: "Tekanan darah tinggi yang dapat merusak jantung dan pembuluh darah disebut...", a: ["Hipotensi", "Anemia", "Hipertensi", "Jantung Koroner"], correct: 2, explanation: "Hiper- berarti 'tinggi' atau 'berlebih', jadi Hipertensi adalah tekanan (tensi) yang tinggi." },
                { q: "Penyebab utama Penyakit Jantung Koroner adalah...", a: ["Infeksi virus", "Kekurangan sel darah putih", "Penyumbatan arteri koroner oleh plak lemak", "Kelainan katup jantung"], correct: 2, explanation: "Plak lemak (aterosklerosis) yang menumpuk akibat gaya hidup tidak sehat adalah penyebab utamanya." },
                { q: "Gangguan pasokan darah ke otak akibat penyumbatan atau pecahnya pembuluh darah disebut...", a: ["Serangan Jantung", "Stroke", "Anemia", "Varises"], correct: 1, explanation: "Stroke terjadi ketika sel-sel otak mulai mati karena tidak mendapat pasokan oksigen dari darah." },
                { q: "Menjaga pola makan dan gaya hidup sehat agar terhindar dari penyakit adalah bentuk...", a: ["Melawan takdir", "Ikhtiar dan menjaga amanah kesehatan", "Sikap sombong", "Sikap pesimis"], correct: 1, explanation: "Islam memerintahkan kita untuk berikhtiar (berusaha) semaksimal mungkin dalam menjaga kesehatan." },
                { q: "Manakah makanan yang harus dikurangi untuk mencegah hipertensi dan penyakit jantung?", a: ["Buah dan sayur", "Ikan dan biji-bijian", "Gorengan dan makanan cepat saji", "Air putih"], correct: 2, explanation: "Makanan tinggi garam dan lemak jenuh adalah pemicu utama hipertensi dan penumpukan plak di arteri." },
                { q: "Penyakit kanker darah dimana sumsum tulang memproduksi sel darah putih abnormal secara berlebihan disebut...", a: ["Anemia", "Talasemia", "Hemofilia", "Leukimia"], correct: 3, explanation: "Leukimia adalah kanker pada jaringan pembentuk darah, yang menyebabkan produksi leukosit abnormal." },
                { q: "Penyakit keturunan dimana darah sukar membeku disebut...", a: ["Anemia", "Hemofilia", "Hipertensi", "Leukimia"], correct: 1, explanation: "Hemofilia adalah kelainan genetik yang menyebabkan tubuh kekurangan faktor pembekuan darah." },
                { q: "Pelebaran pembuluh darah vena, biasanya di kaki, disebut...", a: ["Ambeien", "Varises", "Stroke", "Aterosklerosis"], correct: 1, explanation: "Varises terjadi karena katup pada vena melemah, sehingga darah berkumpul dan menyebabkan pembuluh melebar." },
                { q: "Menjerumuskan diri dalam kebinasaan (misalnya dengan gaya hidup yang merusak kesehatan) dilarang dalam Islam. Istilahnya adalah...", a: ["`Ta'awun`", "`Tahlikah`", "`Tadabbur`", "`Tawadhu`"], correct: 1, explanation: "`Tahlikah` berarti kebinasaan atau kehancuran, dan kita dilarang untuk menjatuhkan diri kita ke dalamnya." }
            ],
            'quiz-sumatif': [
                { q: "Komponen darah yang berfungsi melawan penyakit adalah...", a: ["Eritrosit", "Leukosit", "Trombosit", "Plasma"], correct: 1 },
                { q: "Ruang jantung yang memompa darah kaya oksigen ke seluruh tubuh adalah...", a: ["Serambi Kanan", "Bilik Kanan", "Serambi Kiri", "Bilik Kiri"], correct: 3 },
                { q: "Pembuluh darah yang membawa darah dari seluruh tubuh kembali ke jantung adalah...", a: ["Arteri", "Vena", "Kapiler", "Aorta"], correct: 1 },
                { q: "Peredaran darah kecil melibatkan organ...", a: ["Otak", "Ginjal", "Seluruh tubuh", "Paru-paru"], correct: 3 },
                { q: "Seseorang dengan golongan darah AB dapat menerima darah dari golongan...", a: ["Hanya AB", "Hanya O", "A, B, dan O", "Semua golongan (A, B, AB, O)"], correct: 3 },
                { q: "Kondisi tekanan darah tinggi disebut...", a: ["Anemia", "Hipertensi", "Hipotensi", "Leukimia"], correct: 1 },
                { q: "Penyumbatan arteri yang memberi makan otot jantung disebut...", a: ["Stroke", "Penyakit Jantung Koroner", "Varises", "Anemia"], correct: 1 },
                { q: "Menjaga kesehatan sebagai bentuk syukur atas nikmat Allah adalah wujud dari sikap...", a: ["Amanah", "Riya'", "Ujub", "Putus asa"], correct: 0 },
                { q: "'Donor universal' adalah sebutan untuk golongan darah...", a: ["A", "B", "AB", "O"], correct: 3 },
                { q: "Dinding bilik kiri lebih tebal karena...", a: ["Menerima darah dari paru-paru", "Memompa darah ke seluruh tubuh", "Memompa darah ke paru-paru", "Menampung darah paling banyak"], correct: 1 }
            ]
        };
        
        function createQuiz(quizId, quizData) {
            const quizContainer = document.getElementById(quizId);
            if(!quizContainer) return;
            quizContainer.innerHTML = '';
            let questionNumber = 0;
            
            quizData.forEach((item, index) => {
                questionNumber++;
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('mb-6');
                questionDiv.innerHTML = `<p class="font-semibold mb-3">${questionNumber}. ${item.q}</p>`;

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('space-y-2');

                item.a.forEach((option, optionIndex) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.classList.add('quiz-option', 'w-full', 'text-left', 'p-3', 'border-2', 'rounded-lg');
                    optionBtn.textContent = option;
                    optionBtn.dataset.index = optionIndex;
                    optionsDiv.appendChild(optionBtn);
                });
                
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('mt-2', 'p-3', 'rounded-lg', 'text-sm', 'hidden', 'bg-yellow-50', 'border', 'border-yellow-200');
                if(item.explanation) {
                    explanationDiv.innerHTML = `<strong>Penjelasan:</strong> ${item.explanation}`;
                }

                questionDiv.appendChild(optionsDiv);
                questionDiv.appendChild(explanationDiv);
                quizContainer.appendChild(questionDiv);
            });
        }
        
        Object.keys(quizzes).forEach(quizId => {
            createQuiz(quizId, quizzes[quizId]);
        });
        
        function handleQuizInteraction(containerId, quizData, isSumatif = false) {
            const quizContainer = document.getElementById(containerId);
             if(!quizContainer) return;
            let score = 0;
            
            quizContainer.addEventListener('click', function(e) {
                if (e.target.matches('.quiz-option')) {
                    const questionDiv = e.target.closest('.mb-6');
                    const options = questionDiv.querySelectorAll('.quiz-option');
                    const questionIndex = Array.from(quizContainer.children).indexOf(questionDiv);
                    if (!quizData[questionIndex]) return;
                    const questionData = quizData[questionIndex];
                    const selectedOptionIndex = parseInt(e.target.dataset.index);

                    if (e.target.disabled) return;
                    
                    options.forEach(opt => opt.disabled = true);

                    if (selectedOptionIndex === questionData.correct) {
                        e.target.classList.add('correct');
                        if(isSumatif) score++;
                    } else {
                        e.target.classList.add('incorrect');
                        options[questionData.correct].classList.add('correct');
                    }
                    
                    const explanation = questionDiv.querySelector('.bg-yellow-50');
                    if (questionData.explanation) {
                        explanation.classList.remove('hidden');
                    } else if (isSumatif) {
                        const correctText = questionData.a[questionData.correct];
                        explanation.innerHTML = `<strong>Jawaban Benar:</strong> ${correctText}`;
                        explanation.classList.remove('hidden');
                    }

                    if (isSumatif) {
                       const allQuestions = Array.from(quizContainer.children).filter(el => el.classList.contains('mb-6'));
                       let answeredCount = 0;
                       allQuestions.forEach(qDiv => {
                           if (qDiv.querySelector('.quiz-option:disabled')) {
                               answeredCount++;
                           }
                       });

                       if (answeredCount === allQuestions.length) {
                            showSumatifResult(score, quizData.length);
                       }
                    }
                }
            });
        }

        handleQuizInteraction('quiz1', quizzes.quiz1);
        handleQuizInteraction('quiz2', quizzes.quiz2);
        handleQuizInteraction('quiz3', quizzes.quiz3);
        handleQuizInteraction('quiz4', quizzes.quiz4);
        handleQuizInteraction('quiz-sumatif', quizzes['quiz-sumatif'], true);
        
        function showSumatifResult(score, total) {
            const resultEl = document.getElementById('sumatif-result');
            if(resultEl) {
                document.getElementById('sumatif-score').textContent = score;
                document.getElementById('sumatif-total').textContent = total;
                resultEl.classList.remove('hidden');
            }
        }

        const retryBtn = document.getElementById('sumatif-retry-btn');
        if(retryBtn){
            retryBtn.addEventListener('click', () => {
                createQuiz('quiz-sumatif', quizzes['quiz-sumatif']);
                document.getElementById('sumatif-result').classList.add('hidden');
            });
        }
        
        const tabButtons = document.querySelectorAll('.tab-btn');
        const contentSections = document.querySelectorAll('.content-section');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const target = button.dataset.target;
                
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                contentSections.forEach(section => {
                    if (section.id === target) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });
            });
        });
        
        // --- P1 Simulation ---
        const bloodComponents = document.getElementById('blood-components');
        if(bloodComponents) {
            bloodComponents.addEventListener('click', e => {
                if (e.target.matches('.blood-btn')) {
                    document.getElementById('blood-info').textContent = e.target.dataset.info;
                }
            });
        }

        // --- P2 Simulation ---
        const circulationSim = document.getElementById('circulation-sim');
        if (circulationSim) {
            circulationSim.addEventListener('click', e => {
                if (e.target.matches('.blood-vessel-btn')) {
                    document.getElementById('vessel-info').textContent = e.target.dataset.info;
                }
            });
        }
        
        // --- P3 Simulation ---
        const donorSelect = document.getElementById('donor-type');
        const recipientSelect = document.getElementById('recipient-type');
        const transfusionResult = document.getElementById('transfusion-result');
        function checkTransfusion() {
            if(!donorSelect) return;
            const donor = donorSelect.value;
            const recipient = recipientSelect.value;
            let compatible = false;
            let message = '';

            if (donor === 'O') {
                compatible = true;
            } else if (donor === 'A') {
                if (recipient === 'A' || recipient === 'AB') compatible = true;
            } else if (donor === 'B') {
                if (recipient === 'B' || recipient === 'AB') compatible = true;
            } else if (donor === 'AB') {
                if (recipient === 'AB') compatible = true;
            }

            if (compatible) {
                message = 'Bisa! Transfusi dapat dilakukan.';
                transfusionResult.className = 'mt-4 text-center h-12 p-2 bg-green-100 rounded-md font-bold text-lg text-green-700';
            } else {
                message = 'Bahaya! Transfusi tidak cocok dan akan menyebabkan penggumpalan.';
                transfusionResult.className = 'mt-4 text-center h-12 p-2 bg-red-100 rounded-md font-bold text-lg text-red-700';
            }
            transfusionResult.textContent = message;
        }
        if (donorSelect) donorSelect.addEventListener('change', checkTransfusion);
        if (recipientSelect) recipientSelect.addEventListener('change', checkTransfusion);
        if (transfusionResult) checkTransfusion();

        // --- P4 Simulation ---
        const riskFactors = document.getElementById('risk-factors');
        const riskResult = document.getElementById('risk-result');
        if (riskFactors) {
            riskFactors.addEventListener('change', () => {
                const checks = riskFactors.querySelectorAll('.risk-check:checked');
                const riskLevel = checks.length;
                let message = '';
                let className = '';

                if (riskLevel === 0) {
                    message = 'Risiko Rendah. Alhamdulillah, pertahankan!';
                    className = 'mt-4 text-center p-3 rounded-lg font-bold bg-green-100 text-green-700';
                } else if (riskLevel <= 2) {
                    message = 'Risiko Sedang. Hati-hati, mulailah perbaiki gaya hidup.';
                    className = 'mt-4 text-center p-3 rounded-lg font-bold bg-yellow-100 text-yellow-700';
                } else {
                    message = 'Risiko Tinggi! Segera lakukan perubahan gaya hidup.';
                    className = 'mt-4 text-center p-3 rounded-lg font-bold bg-red-100 text-red-700';
                }
                riskResult.textContent = message;
                riskResult.className = className;
            });
             riskFactors.dispatchEvent(new Event('change'));
        }
    });
    </script>
</body>
</html>

