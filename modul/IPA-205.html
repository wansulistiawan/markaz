<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPA-205: Sistem Pernapasan Manusia (RMP Lengkap)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0f766e; --secondary: #14b8a6; --accent: #f59e0b; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .arabic { font-family: 'Amiri', serif; font-size: 1.8rem; line-height: 2.8rem; text-align: right; color: var(--primary); }
        .tab-btn { transition: all 0.3s; border-bottom: 4px solid transparent; opacity: 0.6; }
        .tab-active { opacity: 1; color: var(--primary); border-bottom-color: var(--primary); font-weight: 800; }
        .teacher-note { background: #fffbeb; border-left: 6px solid #f59e0b; padding: 1.5rem; border-radius: 1rem; margin: 1.5rem 0; font-size: 0.95rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        .rmp-card { background: white; border-radius: 1.5rem; box-shadow: 0 4px 20px -2px rgba(0,0,0,0.05); padding: 2rem; margin-bottom: 2rem; }
        .section-header { border-left: 5px solid var(--primary); padding-left: 1rem; margin-bottom: 1.5rem; font-weight: 800; color: #0f172a; }
        .correct { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #166534; }
        .wrong { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b; }
        .image-container { margin: 1.5rem 0; text-align: center; }
        .source-text { font-size: 0.7rem; color: #94a3b8; display: block; margin-top: 0.5rem; }
        .alphabet-box { width: 24px; height: 24px; background: #f1f5f9; display: inline-flex; align-items: center; justify-content: center; border-radius: 4px; margin-right: 8px; font-weight: bold; font-size: 0.75rem; }
    </style>
</head>
<body>

<header class="bg-white border-b sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex flex-wrap items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-teal-700 p-2 rounded-lg text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
            </div>
            <div>
                <h1 class="text-xl font-extrabold text-slate-800">IPA-205 <span class="text-teal-600 font-medium">Sistem Pernapasan</span></h1>
                <p class="text-[10px] uppercase tracking-widest font-bold text-slate-400">Unit RMP Mandiri Terpadu</p>
            </div>
        </div>
        <nav class="flex overflow-x-auto gap-4 mt-2 sm:mt-0">
            <script>
                const sessions = ["Sesi 1", "Sesi 2", "Sesi 3", "Sesi 4", "Sesi 5", "Sesi 6", "Sesi 7", "Sesi 8", "Ujian Akhir"];
                sessions.forEach((s, i) => {
                    const id = i + 1;
                    document.write(`<button onclick="${id === 9 ? 'loadSumatif()' : 'loadRMP('+id+')'}" id="nav-${id}" class="tab-btn py-2 px-1 text-sm font-bold whitespace-nowrap">${s}</button>`);
                });
            </script>
        </nav>
    </div>
</header>

<main class="container mx-auto px-4 py-8 max-w-4xl">
    <div id="main-container" class="space-y-10">
        <!-- Content will be injected here -->
    </div>
</main>

<script>
    const alphabet = ['A', 'B', 'C', 'D'];
    const rmpData = {
        1: {
            title: "Gerbang Udara: Anatomi Hidung & Faring",
            A: ["Santri menjelaskan fungsi filtrasi, termoregulasi, dan humidifikasi.", "Mengidentifikasi struktur faring.", "Mengaitkan penyaringan dengan Ar-Raqib."],
            B: { teks: "Sistem filtrasi menunjukkan sifat Allah Ar-Raqib.", dalil_ar: "وَإِنَّ عَلَيْكُمْ لَحَافِظِينَ", dalil_id: "Sesungguhnya bagi kamu ada yang mengawasi. (QS. Al-Infitar: 10)" },
            C: `<p>Hidung memiliki Concha Nasalis yang berfungsi sebagai AC alami.</p>
                <div class="image-container">
                    <svg viewBox="0 0 200 100" class="w-full max-w-sm mx-auto bg-teal-50 rounded-xl border border-teal-100"><path d="M40,50 Q60,10 80,50 T120,50" fill="none" stroke="#0d9488" stroke-width="2" /></svg>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Anatomy_of_the_Nose_and_Pharynx.png/800px-Anatomy_of_the_Nose_and_Pharynx.png" class="mt-4 rounded-xl shadow-sm">
                </div>
                <div class="teacher-note">Diskusikan peran lendir saat flu.</div>`,
            D: `<h3 class="section-header">D. Penilaian Modul</h3><p class="text-sm">Sikap (20%), Pengetahuan (50%), Keterampilan (30%).</p>`,
            simulasi: [{ title: "Filtrasi Virtual", desc: "Tangkap debu di hidung." }, { title: "Termometer Hidung", desc: "Atur suhu udara." }],
            latihan: [
                { q: "Apa fungsi utama rambut hidung (silia) dalam sistem pernapasan?", o: ["Mendinginkan udara", "Menyaring partikel debu besar", "Mengikat oksigen", "Memproduksi lendir"], a: 1, e: "Rambut hidung berfungsi sebagai penyaring mekanis pertama untuk debu." },
                { q: "Bagian hidung yang berfungsi menghangatkan udara adalah...", o: ["Lendir", "Saraf pembau", "Concha nasalis", "Septum"], a: 2, e: "Concha yang kaya pembuluh darah berfungsi menghangatkan udara (termoregulasi)." },
                { q: "Manakah urutan jalur udara setelah melewati rongga hidung?", o: ["Laring-Faring", "Faring-Laring", "Trakea-Faring", "Bronkus-Laring"], a: 1, e: "Setelah hidung, udara masuk ke faring (tekak) baru ke laring (pangkal tenggorokan)." },
                { q: "Mengapa hidung disebut sebagai AC alami tubuh?", o: ["Karena warnanya", "Karena bisa menyaring dan mengatur suhu", "Karena letaknya di luar", "Karena terhubung ke otak"], a: 1, e: "Hidung melakukan filtrasi, humidifikasi, dan termoregulasi layaknya Air Conditioner." },
                { q: "Sifat Allah Ar-Raqib (Maha Mengawasi) tercermin pada hidung melalui...", o: ["Warna hidung", "Proses penyaringan yang ketat", "Bentuk hidung", "Kekuatan bernapas"], a: 1, e: "Filtrasi menunjukkan adanya pengawasan terhadap zat asing yang masuk ke tubuh." },
                { q: "Fungsi lendir (mukus) pada hidung adalah...", o: ["Membakar kuman", "Melembapkan udara dan menangkap bakteri", "Membantu bicara", "Menyerap oksigen"], a: 1, e: "Mukus berfungsi untuk humidifikasi dan menjebak partikel mikro." },
                { q: "Faring merupakan persimpangan antara saluran pernapasan dan...", o: ["Saluran pendengaran", "Saluran pencernaan", "Saluran kelenjar", "Saluran darah"], a: 1, e: "Faring menghubungkan rongga mulut ke kerongkongan dan rongga hidung ke tenggorokan." },
                { q: "Jika udara di sekitar sangat kering, apa yang dilakukan hidung?", o: ["Menutup", "Melembapkan (Humidifikasi)", "Mendinginkan", "Mengeluarkan darah"], a: 1, e: "Hidung akan menambah uap air ke udara agar paru-paru tidak kering." },
                { q: "Bagian hidung yang membagi lubang kanan dan kiri disebut...", o: ["Sinus", "Septum", "Silia", "Saraf"], a: 1, e: "Septum nasi adalah sekat pembatas antara dua lubang hidung." },
                { q: "Udara yang masuk ke hidung mengalami tiga perlakuan kecuali...", o: ["Disaring", "Diatur suhunya", "Dilembapkan", "Diubah menjadi karbon dioksida"], a: 3, e: "Pertukaran gas menjadi CO2 terjadi di paru-paru, bukan di hidung." }
            ]
        },
        2: {
            title: "Pipa Suara & Katup Kehidupan: Laring & Epiglotis",
            A: ["Menganalisis kerja epiglotis.", "Memahami produksi suara.", "Mengagumi karunia bicara."],
            B: { teks: "Allah mengajar manusia pandai berbicara.", dalil_ar: "عَلَّمَهُ الْبَيَانَ", dalil_id: "Mengajarnya pandai berbicara. (QS. Ar-Rahman: 4)" },
            C: `<p>Laring berisi pita suara. Epiglotis menjaga jalur napas.</p>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Larynx_anatomy_en.svg/600px-Larynx_anatomy_en.svg.png" class="mx-auto mt-4 rounded-xl">`,
            simulasi: [{ title: "Simulator Epiglotis", desc: "Makan vs Napas." }, { title: "Vocal Lab", desc: "Ubah nada suara." }],
            latihan: [
                { q: "Apa fungsi utama epiglotis saat kita menelan makanan?", o: ["Membantu pencernaan", "Menutup saluran pernapasan", "Membuka tenggorokan", "Menghasilkan suara"], a: 1, e: "Epiglotis menutup laring agar makanan tidak masuk ke jalur napas." },
                { q: "Pita suara terletak pada bagian...", o: ["Faring", "Trakea", "Laring", "Bronkus"], a: 2, e: "Laring sering disebut kotak suara karena terdapat pita suara di dalamnya." },
                { q: "Mengapa kita dilarang berbicara saat makan dalam perspektif biologi?", o: ["Agar suara tidak hilang", "Mencegah tersedak karena epiglotis terbuka", "Agar rasa makanan terjaga", "Mencegah haus"], a: 1, e: "Berbicara saat makan membuat epiglotis terbuka, sehingga makanan bisa masuk ke trakea." },
                { q: "Tersedak merupakan mekanisme tubuh untuk...", o: ["Mengeluarkan benda asing dari saluran napas", "Membantu menelan", "Menghasilkan suara keras", "Mendinginkan paru-paru"], a: 0, e: "Refleks batuk/tersedak membuang benda yang salah masuk ke jalur napas." },
                { q: "Karunia bicara (Al-Bayan) dalam QS Ar-Rahman berkaitan dengan organ...", o: ["Hidung", "Laring", "Paru-paru", "Hati"], a: 1, e: "Laring adalah alat fisik utama yang memproduksi gelombang suara manusia." },
                { q: "Adam's Apple (Jakun) pada laki-laki sebenarnya adalah...", o: ["Kelenjar ludah", "Tulang rawan tiroid", "Sisa makanan", "Pita suara"], a: 1, e: "Jakun adalah tonjolan tulang rawan tiroid yang melindungi laring." },
                { q: "Suara dihasilkan ketika pita suara mengalami...", o: ["Penyusutan", "Getaran", "Pembekuan", "Pencairan"], a: 1, e: "Udara yang keluar menggetarkan pita suara sehingga menghasilkan bunyi." },
                { q: "Bagian yang menghubungkan faring dengan trakea adalah...", o: ["Bronkus", "Alveolus", "Laring", "Hidung"], a: 2, e: "Laring berada di antara faring dan batang tenggorokan (trakea)." },
                { q: "Perbedaan nada suara (tinggi-rendah) dipengaruhi oleh...", o: ["Banyaknya oksigen", "Tegangan pita suara", "Panjang hidung", "Ukuran paru"], a: 1, e: "Otot laring mengatur tegangan pita suara untuk mengubah frekuensi suara." },
                { q: "Apa yang terjadi jika epiglotis gagal menutup?", o: ["Suara menjadi merdu", "Makanan masuk ke paru-paru", "Udara berhenti mengalir", "Pencernaan menjadi cepat"], a: 1, e: "Kegagalan epiglotis menyebabkan aspirasi atau masuknya benda asing ke jalur pernapasan." }
            ]
        },
        3: {
            title: "Jalur Utama: Trakea & Bronkus",
            A: ["Menjelaskan struktur cincin tulang rawan.", "Memahami peran silia.", "Mengaitkan kebersihan jalur napas dengan thaharah."],
            B: { teks: "Tubuh menjaga kebersihannya sendiri melalui silia, sebagaimana mukmin menjaga thaharah.", dalil_ar: "إِنَّ اللَّهَ يُحِبُّ التَّوَّابِينَ وَيُحِبُّ الْمُطَتَهِّرِينَ", dalil_id: "Sesungguhnya Allah menyukai orang yang bertaubat dan menyukai orang yang mensucikan diri. (QS. Al-Baqarah: 222)" },
            C: `
                <div class="space-y-6">
                    <p>Trakea adalah batang tenggorokan sepanjang 10-12 cm yang tersusun dari cincin tulang rawan berbentuk huruf 'C'. Mengapa tidak lingkaran penuh? Agar kerongkongan di belakangnya bisa mengembang saat menelan makanan.</p>
                    <div class="image-container">
                        <svg viewBox="0 0 200 100" class="w-full max-w-sm mx-auto bg-teal-50 rounded-xl">
                            <path d="M100,20 L100,80 M90,30 L110,30 M90,50 L110,50 M90,70 L110,70" stroke="#0f766e" stroke-width="4" fill="none" />
                        </svg>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Trachea_and_bronchi_labeled.png/800px-Trachea_and_bronchi_labeled.png" class="mt-4 rounded-xl">
                    </div>
                    <div class="teacher-note"><strong>Poin Diskusi:</strong> Mengapa perokok sering batuk? Karena asap merusak silia (rambut getar) di trakea yang bertugas menyapu kotoran keluar.</div>
                </div>
            `,
            simulasi: [{ title: "Penyapu Silia", desc: "Gunakan mikroskop virtual untuk melihat gerakan silia menyapu lendir." }, { title: "Eksplorasi Bronkus", desc: "Telusuri percabangan bronkus kanan dan kiri." }],
            latihan: [
                { q: "Mengapa tulang rawan pada trakea berbentuk huruf 'C'?", o: ["Agar mudah patah", "Memberi ruang kerongkongan mengembang", "Karena kekurangan kalsium", "Agar trakea bisa memanjang"], a: 1, e: "Cincin terbuka di belakang memudahkan bolus makanan lewat di kerongkongan." },
                { q: "Jaringan epitel yang melapisi trakea memiliki silia yang berfungsi...", o: ["Menyerap oksigen", "Menyapu kotoran ke arah luar", "Mendinginkan udara", "Membantu kontraksi"], a: 1, e: "Silia menyapu lendir yang berisi kotoran agar keluar dari sistem pernapasan." },
                { q: "Percabangan dua dari trakea yang menuju paru-paru kanan dan kiri disebut...", o: ["Bronkiolus", "Bronkus", "Alveolus", "Pleura"], a: 1, e: "Trakea bercabang menjadi bronkus primer kanan dan kiri." },
                { q: "Apa yang terjadi jika asap rokok melumpuhkan silia di trakea?", o: ["Pernapasan makin lancar", "Kotoran menumpuk di paru-paru", "Suara makin nyaring", "Hidung menjadi kering"], a: 1, e: "Lumpuhnya silia menyebabkan kotoran dan lendir sulit dibuang (penyebab batuk perokok)." },
                { q: "Cincin tulang rawan pada trakea berfungsi untuk...", o: ["Menjaga agar trakea tetap terbuka", "Membantu pencernaan", "Mengikat alveolus", "Tempat pita suara"], a: 0, e: "Cincin tulang rawan mencegah trakea kempis saat tekanan udara berubah." },
                { q: "Letak trakea berada di...", o: ["Belakang kerongkongan", "Depan kerongkongan", "Di dalam mulut", "Di samping lambung"], a: 1, e: "Secara anatomis trakea terletak di anterior (depan) dari esofagus." },
                { q: "Thaharah (kesucian) pada trakea dilakukan oleh...", o: ["Lendir dan silia", "Asam lambung", "Air liur", "Aliran darah"], a: 0, e: "Lendir menangkap kuman, silia menyapunya keluar (mekanisme pembersihan)." },
                { q: "Struktur kecil setelah bronkus yang tidak memiliki tulang rawan adalah...", o: ["Bronkus", "Bronkiolus", "Trakea", "Faring"], a: 1, e: "Bronkiolus adalah cabang lebih kecil yang dindingnya didominasi otot polos tanpa rawan." },
                { q: "Udara dari laring akan langsung menuju ke...", o: ["Bronkus", "Hidung", "Trakea", "Lambung"], a: 2, e: "Laring terhubung langsung ke batang tenggorokan (trakea)." },
                { q: "Panjang rata-rata trakea manusia dewasa adalah...", o: ["2 cm", "10-12 cm", "50 cm", "1 meter"], a: 1, e: "Trakea memiliki panjang sekitar 10 sampai 12 sentimeter." }
            ]
        },
        4: {
            title: "Pertukaran Agung: Paru-paru & Alveolus",
            A: ["Menganalisis difusi gas.", "Memahami struktur alveolus.", "Meresapi kebesaran Allah dalam luas permukaan paru."],
            B: { teks: "Luas alveolus yang mencapai puluhan meter persegi dalam ruang dada yang kecil adalah mukjizat desain Allah.", dalil_ar: "وَفِي أَنْفُسِكُمْ ۚ أَفَلَا تُبْصِرُونَ", dalil_id: "Dan pada dirimu sendiri. Maka apakah kamu tidak memperhatikan? (QS. Az-Zariyat: 21)" },
            C: `
                <div class="space-y-6">
                    <p>Alveolus adalah kantung udara tipis tempat bertemunya udara dan darah. Bayangkan alveolus seperti anggur yang dikelilingi jaring-jaring kabel (kapiler).</p>
                    <div class="image-container">
                         <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Alveolus_diagram.svg/800px-Alveolus_diagram.svg.png" class="max-w-xs mx-auto">
                    </div>
                    <h4 class="font-bold">Mekanisme Difusi</h4>
                    <p>Oksigen pindah ke darah karena tekanan parsial, sementara CO2 dibuang. Ini terjadi pada jutaan alveolus secara simultan.</p>
                </div>
            `,
            simulasi: [{ title: "Lab Difusi Gas", desc: "Lihat molekul O2 berpindah ke sel darah merah." }, { title: "Kapasitas Paru", desc: "Ukur volume udara saat napas biasa vs napas dalam." }],
            latihan: [
                { q: "Proses berpindahnya oksigen dari alveolus ke pembuluh darah disebut...", o: ["Osmosis", "Difusi", "Filtrasi", "Ekskresi"], a: 1, e: "Difusi adalah perpindahan gas dari konsentrasi tinggi ke rendah." },
                { q: "Mengapa dinding alveolus harus sangat tipis?", o: ["Agar mudah pecah", "Memudahkan pertukaran gas", "Mencegah air masuk", "Menghasilkan lendir"], a: 1, e: "Dinding tipis satu lapis sel memperpendek jarak difusi gas." },
                { q: "Selaput pembungkus paru-paru disebut...", o: ["Perikardium", "Pleura", "Meninges", "Peritoneum"], a: 1, e: "Pleura melindungi paru dan melumasinya saat mengembang-kempis." },
                { q: "Gas yang dibuang dari darah ke alveolus saat kita mengembuskan napas adalah...", o: ["O2", "CO2", "N2", "H2O saja"], a: 1, e: "Sisa metabolisme tubuh berupa Karbon Dioksida dibuang lewat pernapasan." },
                { q: "Berapa jumlah lobus pada paru-paru kanan manusia?", o: ["1", "2", "3", "4"], a: 2, e: "Paru kanan terdiri dari 3 lobus, sedangkan kiri 2 lobus (memberi ruang bagi jantung)." },
                { q: "Alveolus dikelilingi oleh banyak pembuluh darah kecil yang disebut...", o: ["Vena", "Arteri", "Kapiler", "Aorta"], a: 2, e: "Kapiler adalah tempat pertukaran zat antara darah dan jaringan/udara." },
                { q: "Ciri alveolus yang mendukung fungsinya adalah sebagai berikut, kecuali...", o: ["Dinding tipis", "Luas permukaan lebar", "Sangat lembap", "Memiliki tulang rawan"], a: 3, e: "Alveolus tidak memiliki tulang rawan; ia bersifat elastis dan sangat tipis." },
                { q: "Oksigen yang masuk ke darah di alveolus akan diikat oleh...", o: ["Leukosit", "Plasma darah", "Hemoglobin", "Trombosit"], a: 2, e: "Hemoglobin dalam sel darah merah adalah pengangkut utama oksigen." },
                { q: "Jika total luas alveolus dibentangkan, ukurannya bisa setara dengan...", o: ["Meja makan", "Lapangan tenis", "Buku tulis", "Ruang kelas"], a: 1, e: "Luas permukaan alveolus mencapai 70-100 meter persegi." },
                { q: "Pertukaran gas terjadi di alveolus karena perbedaan...", o: ["Suhu", "Tekanan parsial gas", "Kecepatan udara", "Warna darah"], a: 1, e: "Gas bergerak dari area tekanan parsial tinggi ke rendah." }
            ]
        },
        5: {
            title: "Mesin Napas: Mekanisme Dada & Perut",
            A: ["Membedakan inspirasi dan ekspirasi.", "Menjelaskan peran Diafragma.", "Mempraktikkan napas perut untuk ketenangan (Zikir)."],
            B: { teks: "Napas yang tenang membantu kekhusyukan ibadah.", dalil_ar: "أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقلوبُ", dalil_id: "Ingatlah, hanya dengan mengingati Allah-lah hati menjadi tenteram. (QS. Ar-Ra'd: 28)" },
            C: `
                <div class="space-y-6">
                    <p>Inspirasi terjadi saat diafragma berkontraksi (mendatar), menciptakan tekanan rendah yang menarik udara masuk. Ekspirasi adalah relaksasi.</p>
                    <div class="image-container">
                        <svg viewBox="0 0 200 100" class="w-full max-w-sm mx-auto bg-teal-50 rounded-xl">
                             <path d="M70,80 Q100,60 130,80" fill="none" stroke="#f59e0b" stroke-width="5" />
                             <text x="75" y="95" font-size="8">Diafragma (Relaksasi)</text>
                        </svg>
                    </div>
                    <div class="teacher-note"><strong>Poin Diskusi:</strong> Mengapa saat kaget atau takut napas kita menjadi pendek dan cepat? Hubungkan dengan sistem saraf simpatik.</div>
                </div>
            `,
            simulasi: [{ title: "Pompa Diafragma", desc: "Tarik otot diafragma ke bawah untuk mengembangkan paru-paru virtual." }, { title: "Ritme Napas", desc: "Sesuaikan kecepatan napas dan lihat detak jantung." }],
            latihan: [
                { q: "Pada pernapasan perut, otot yang paling berperan adalah...", o: ["Otot antar tulang rusuk", "Otot diafragma", "Otot punggung", "Otot leher"], a: 1, e: "Pernapasan perut didominasi oleh gerakan diafragma." },
                { q: "Apa yang terjadi pada volume rongga dada saat inspirasi?", o: ["Mengecil", "Membesar", "Tetap", "Hilang"], a: 1, e: "Volume membesar agar tekanan mengecil sehingga udara luar masuk." },
                { q: "Posisi diafragma saat kita membuang napas (ekspirasi) adalah...", o: ["Mendatar", "Melengkung ke atas", "Mengerut", "Pindah ke samping"], a: 1, e: "Saat ekspirasi, diafragma relaksasi dan melengkung kembali ke arah paru-paru." },
                { q: "Mekanisme pernapasan dada menggunakan kekuatan dari...", o: ["Diafragma", "Otot antar tulang rusuk", "Otot perut", "Paru-paru itu sendiri"], a: 1, e: "Pernapasan dada melibatkan kontraksi otot interkostal." },
                { q: "Hukum fisika yang menjelaskan udara masuk ke paru-paru adalah...", o: ["Udara mengalir dari tekanan tinggi ke rendah", "Udara selalu panas", "Cahaya merambat lurus", "Benda jatuh ke bawah"], a: 0, e: "Saat dada membesar, tekanan paru turun di bawah tekanan atmosfer." },
                { q: "Mengapa bernapas lewat perut dianggap lebih menenangkan?", o: ["Karena lebih cepat", "Karena oksigen masuk lebih maksimal", "Karena lebih berisik", "Karena tidak butuh energi"], a: 1, e: "Napas perut mengaktifkan saraf parasimpatik yang menurunkan stres." },
                { q: "Udara komplementer adalah...", o: ["Udara sisa yang tidak bisa keluar", "Udara yang bisa dihirup maksimal setelah napas biasa", "Udara napas biasa", "Udara saat bicara"], a: 1, e: "Udara cadangan inspirasi yang bisa ditarik sekuat mungkin." },
                { q: "Volume udara yang tetap tinggal di paru-paru setelah ekspirasi maksimal disebut...", o: ["Volume Tidal", "Volume Residu", "Kapasitas Vital", "Volume Cadangan"], a: 1, e: "Volume residu mencegah paru-paru kempis total." },
                { q: "Fungsi utama diafragma adalah...", o: ["Menyaring debu", "Membatasi rongga dada dan perut", "Tempat pertukaran O2", "Menghasilkan suara"], a: 1, e: "Secara anatomi ia adalah sekat, secara fisiologi ia adalah pompa napas." },
                { q: "Saat berlari, frekuensi pernapasan meningkat karena tubuh butuh...", o: ["Lebih banyak air", "Lebih banyak energi/O2", "Karbondioksida", "Suhu dingin"], a: 1, e: "Aktivitas berat meningkatkan oksidasi sel yang butuh suplai O2 cepat." }
            ]
        },
        6: {
            title: "Transportasi Oksigen: Darah & Energi",
            A: ["Menjelaskan peran Hemoglobin.", "Memahami oksidasi biologi.", "Bersyukur atas energi untuk beramal shaleh."],
            B: { teks: "Energi dari napas harus digunakan untuk ketaatan.", dalil_ar: "فَإِذَا فَرَغْتَ فَانْصَبْ", dalil_id: "Maka apabila kamu telah selesai (dari sesuatu urusan), kerjakanlah dengan sungguh-sungguh (urusan) yang lain. (QS. Asy-Syarh: 7)" },
            C: `<p>Oksigen diikat oleh Hemoglobin (Hb) menjadi Oksihemoglobin. Tanpa besi (Fe) dalam Hb, kita akan lemas (anemia).</p>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Hemoglobin.png/800px-Hemoglobin.png" class="max-w-xs mx-auto mt-4">`,
            simulasi: [{ title: "Kurir Hemoglobin", desc: "Bantu sel darah merah mengambil O2 di paru dan mengantar ke otot." }, { title: "Efek Karbon Monoksida", desc: "Lihat apa yang terjadi jika Hb mengikat asap kendaraan." }],
            latihan: [
                { q: "Zat dalam darah yang bertugas mengangkut oksigen adalah...", o: ["Plasma", "Keping darah", "Hemoglobin", "Sel darah putih"], a: 2, e: "Hemoglobin adalah pigmen pengikat O2 pada eritrosit." },
                { q: "Mineral penting yang dibutuhkan untuk pembentukan hemoglobin adalah...", o: ["Kalsium", "Zat Besi (Fe)", "Yodium", "Kalium"], a: 1, e: "Besi adalah inti dari molekul heme dalam hemoglobin." },
                { q: "Hasil akhir dari pembakaran (oksidasi) makanan di sel selain energi adalah...", o: ["O2 dan Gula", "CO2 dan Uap Air", "Protein", "Nitrogen"], a: 1, e: "C6H12O6 + 6O2 -> 6CO2 + 6H2O + Energi." },
                { q: "Apa nama senyawa saat hemoglobin mengikat oksigen?", o: ["Karbaminohemoglobin", "Oksihemoglobin", "Oksimioglobin", "Hemoglobin murni"], a: 1, e: "Hb + O2 -> HbO2 (Oksihemoglobin)." },
                { q: "Gas beracun yang lebih mudah diikat hemoglobin daripada oksigen adalah...", o: ["Karbon Dioksida", "Karbon Monoksida (CO)", "Nitrogen", "Argon"], a: 1, e: "CO memiliki afinitas jauh lebih tinggi sehingga sangat berbahaya." },
                { q: "Darah yang kaya karbon dioksida mengalir dari jaringan menuju ke...", o: ["Otak", "Paru-paru", "Ginjal", "Usus"], a: 1, e: "Darah kotor dibawa ke paru-paru untuk dibuang CO2-nya." },
                { q: "Proses respirasi sel terjadi di dalam organel sel yang disebut...", o: ["Ribosom", "Mitokondria", "Inti sel", "Badan golgi"], a: 1, e: "Mitokondria dikenal sebagai powerhouse karena tempat produksi energi." },
                { q: "Kekurangan sel darah merah atau hemoglobin menyebabkan kondisi...", o: ["Hipertensi", "Anemia", "Diabetes", "Stroke"], a: 1, e: "Anemia menyebabkan suplai O2 ke jaringan menurun." },
                { q: "Sebagian besar karbon dioksida diangkut dalam darah dalam bentuk...", o: ["Larut dalam plasma", "Ion bikarbonat (HCO3-)", "Kristal", "Gas bebas"], a: 1, e: "Sekitar 70% CO2 diangkut dalam bentuk ion bikarbonat." },
                { q: "Energi (ATP) yang dihasilkan dari pernapasan digunakan untuk...", o: ["Bergerak dan berpikir", "Ibadah", "Pertumbuhan", "Semua benar"], a: 3, e: "Energi adalah bahan bakar utama seluruh aktivitas kehidupan." }
            ]
        },
        7: {
            title: "Ujian Kekuatan: Gangguan & Penyakit",
            A: ["Mengidentifikasi gejala Asma, TBC, dan Pneumonia.", "Menganalisis bahaya rokok dan polusi.", "Menerapkan gaya hidup sehat Nabawi."],
            B: { teks: "Menjaga kesehatan paru adalah bagian dari menjaga amanah Allah.", dalil_ar: "لَا ضَرَرَ وَلَا ضِرَارَ", dalil_id: "Tidak boleh membahayakan diri sendiri dan tidak boleh membahayakan orang lain. (Hadits)" },
            C: `
                <div class="space-y-6">
                    <p>Penyakit pernapasan bisa disebabkan bakteri (TBC), virus (Flu), atau penyempitan saluran (Asma). Rokok mengandung tar yang menghitamkan alveolus.</p>
                    <div class="image-container">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Smoking_lung_comparison.jpg/800px-Smoking_lung_comparison.jpg" class="rounded-xl">
                        <span class="source-text">Perbandingan paru sehat dan paru perokok.</span>
                    </div>
                </div>
            `,
            simulasi: [{ title: "X-Ray Scanner", desc: "Diagnosa penyakit berdasarkan hasil rontgen paru virtual." }, { title: "Filter Polusi", desc: "Bandingkan udara desa vs kota pada paru-paru." }],
            latihan: [
                { q: "Penyakit penyempitan saluran pernapasan akibat alergi disebut...", o: ["TBC", "Asma", "Bronkitis", "Influenza"], a: 1, e: "Asma dipicu oleh hipersensitivitas saluran napas." },
                { q: "Penyakit TBC disebabkan oleh agen infeksi berupa...", o: ["Virus", "Bakteri", "Jamur", "Debu"], a: 1, e: "Mycobacterium tuberculosis adalah bakteri penyebab TBC." },
                { q: "Zat dalam rokok yang menyebabkan ketagihan (adiksi) adalah...", o: ["Tar", "Nikotin", "Karbon Monoksida", "Ammonia"], a: 1, e: "Nikotin menyerang saraf pusat dan menyebabkan ketergantungan." },
                { q: "Radang pada dinding alveolus yang menyebabkannya terisi cairan disebut...", o: ["Emfisema", "Pneumonia", "Sinusitis", "Laringitis"], a: 1, e: "Pneumonia sering disebut paru-paru basah." },
                { q: "Emfisema adalah gangguan pernapasan yang ditandai dengan...", o: ["Lendir berlebih", "Hilangnya elastisitas alveolus", "Batuk berdarah", "Hidung tersumbat"], a: 1, e: "Alveolus rusak dan pecah sehingga pertukaran gas tidak efektif." },
                { q: "Virus Influenza menyerang bagian...", o: ["Alveolus saja", "Saluran pernapasan atas", "Jantung", "Tulang rusuk"], a: 1, e: "Flu umumnya menyerang hidung, tenggorokan, dan paru-paru atas." },
                { q: "Bahaya utama asap rokok bagi perokok pasif adalah...", o: ["Tidak ada bahaya", "Risiko penyakit yang sama dengan perokok aktif", "Hanya bau baju", "Hanya batuk biasa"], a: 1, e: "Perokok pasif menghirup zat kimia yang sama berbahayanya." },
                { q: "Kanker paru-paru sebagian besar dipicu oleh kebiasaan...", o: ["Olah raga", "Merokok", "Minum air putih", "Tidur siang"], a: 1, e: "Zat karsinogenik dalam asap rokok memicu mutasi sel paru." },
                { q: "Untuk mencegah penularan penyakit pernapasan lewat udara, sebaiknya...", o: ["Menutup hidung saat bersin", "Menggunakan masker", "Menjaga jarak", "Semua benar"], a: 3, e: "Etika bersin dan alat pelindung diri sangat krusial." },
                { q: "Mengapa penderita TBC sering mengalami batuk berdarah?", o: ["Karena alergi debu", "Kerusakan jaringan paru akibat bakteri", "Karena kurang minum", "Karena terlalu banyak bicara"], a: 1, e: "Bakteri memakan jaringan paru dan merusak pembuluh darah di sana." }
            ]
        },
        8: {
            title: "Review & Integrasi: Napas Terakhir",
            A: ["Merangkum seluruh sistem.", "Merenungkan akhir kehidupan (Sakaratulmaut).", "Komitmen menjaga kesehatan."],
            B: { teks: "Setiap napas memiliki batas. Gunakan setiap hembusan untuk zikir.", dalil_ar: "كُلُّ نَفْسٍ ذَائِقَةُ الْمَوْتِ", dalil_id: "Tiap-tiap yang berjiwa akan merasakan mati. (QS. Ali Imran: 185)" },
            C: `<p>Sistem pernapasan adalah bukti keteraturan alam semesta. Dari hidung hingga sel, semuanya bekerja harmonis tanpa perintah sadar kita.</p>
                <div class="teacher-note">Review seluruh materi dan persiapkan untuk ujian akhir.</div>`,
            simulasi: [{ title: "Peta Konsep Interaktif", desc: "Hubungkan bagian-bagian sistem pernapasan." }, { title: "Refleksi Napas", desc: "Hitung total napas Anda sejak lahir (estimasi)." }],
            latihan: [
                { q: "Aliran oksigen berakhir di tingkat sel untuk proses...", o: ["Pencernaan", "Oksidasi/Respirasi Sel", "Ekskresi", "Reproduksi"], a: 1, e: "Tujuan akhir napas adalah menghasilkan energi di sel." },
                { q: "Udara cadangan ekspirasi disebut juga dengan udara...", o: ["Tidal", "Komplementer", "Suplementer", "Residu"], a: 2, e: "Udara suplementer adalah udara yang bisa diembuskan paksa." },
                { q: "Organ yang berfungsi menyaring udara sekaligus pengatur suhu adalah...", o: ["Mulut", "Hidung", "Paru-paru", "Faring"], a: 1, e: "Hidung memiliki filtrasi dan termoregulasi." },
                { q: "Jika kita menahan napas terlalu lama, gas yang menumpuk di darah adalah...", o: ["Oksigen", "Karbon Dioksida", "Nitrogen", "Helium"], a: 1, e: "Kadar CO2 akan naik dan memicu refleks napas otomatis." },
                { q: "Pusat kontrol pernapasan manusia terletak di...", o: ["Jantung", "Medulla Oblongata (Batak Otak)", "Hati", "Lambung"], a: 1, e: "Batang otak mengatur ritme napas tanpa kita sadari." },
                { q: "Bernapas secara sadar (mengatur ritme) dikontrol oleh...", o: ["Saraf otonom", "Korteks serebri (Otak besar)", "Sumsum tulang belakang", "Kulit"], a: 1, e: "Saat kita sengaja menarik napas dalam, otak besar mengambil alih." },
                { q: "Apa yang dimaksud dengan Kapasitas Vital paru-paru?", o: ["Volume Tidal + Cadangan Inspirasi + Cadangan Ekspirasi", "Hanya volume residu", "Jumlah seluruh udara di dunia", "Hanya oksigen"], a: 0, e: "Kapasitas vital adalah jumlah maksimal udara yang dapat digerakkan." },
                { q: "Bagaimana cara mensyukuri nikmat sistem pernapasan?", o: ["Merokok sesekali", "Berolahraga dan menjauhi polusi", "Begadang tiap malam", "Menahan napas"], a: 1, e: "Menjaga amanah kesehatan adalah bentuk syukur praktis." },
                { q: "Kapan sistem pernapasan manusia mulai bekerja?", o: ["Saat usia 10 tahun", "Sesaat setelah lahir (tangisan pertama)", "Saat mulai makan", "Saat mulai bicara"], a: 1, e: "Bayi mulai bernapas sendiri setelah tali pusat dipotong." },
                { q: "Respirasi adalah salah satu ciri makhluk hidup yang bertujuan...", o: ["Mendapatkan berat badan", "Menghasilkan energi", "Mendinginkan tubuh", "Mengeluarkan keringat"], a: 1, e: "Tanpa respirasi, energi untuk hidup tidak akan terbentuk." }
            ]
        }
    };

    function loadRMP(id) {
        const data = rmpData[id];
        const container = document.getElementById('main-container');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active'));
        document.getElementById(`nav-${id}`).classList.add('tab-active');

        if(!data) return;

        container.innerHTML = `
            <div class="rmp-card animate-in fade-in duration-500">
                <h2 class="text-3xl font-black text-slate-800 mb-8 border-b pb-4">Sesi ${id}: ${data.title}</h2>
                <section class="mb-10"><h3 class="section-header">A. Tujuan Pembelajaran</h3><ul class="list-disc ml-6 space-y-2 text-slate-700 font-medium">${data.A.map(item => `<li>${item}</li>`).join('')}</ul></section>
                <section class="mb-10 bg-teal-50 p-8 rounded-2xl border border-teal-100">
                    <h3 class="section-header">B. Keterkaitan Nilai Islam</h3>
                    <div class="arabic mb-4">${data.B.dalil_ar}</div><p class="italic text-teal-800 text-sm mb-4">"${data.B.dalil_id}"</p><p class="text-slate-700 leading-relaxed">${data.B.teks}</p>
                </section>
                <section class="mb-10"><h3 class="section-header">C. Skenario Pembelajaran</h3><div class="text-slate-700 leading-relaxed">${data.C}</div></section>
                ${data.D || ''}
            </div>
            <div class="space-y-6">
                <h3 class="text-xl font-black text-slate-800 ml-2">Konten Tambahan</h3>
                <div class="grid sm:grid-cols-2 gap-4">
                    ${data.simulasi.map((s, si) => `
                        <div class="bg-white p-6 rounded-2xl border hover:shadow-lg transition">
                            <h4 class="font-bold text-slate-800">${si+1}. ${s.title}</h4><p class="text-xs text-slate-500 mt-2">${s.desc}</p>
                            <button class="mt-4 text-xs font-bold text-teal-600">MULAI SIMULASI →</button>
                        </div>
                    `).join('')}
                </div>
                <div class="rmp-card border-t-8 border-teal-600">
                    <h4 class="text-xl font-black text-slate-800 mb-6">Latihan Formatif</h4>
                    <div class="space-y-8">${data.latihan.map((q, i) => `
                        <div class="space-y-4">
                            <p class="font-bold text-slate-800">${i+1}. ${q.q}</p>
                            <div class="grid sm:grid-cols-2 gap-3">${q.o.map((opt, oi) => `
                                <button onclick="checkAns(${id}, ${i}, ${oi}, ${q.a}, '${q.e.replace(/'/g, "\\'")}')" class="ans-btn-${id}-${i} text-left p-4 bg-slate-50 border rounded-xl text-sm font-semibold flex items-center">
                                    <span class="alphabet-box">${alphabet[oi]}</span><span>${opt}</span>
                                </button>
                            `).join('')}</div>
                            <div id="feedback-${id}-${i}" class="hidden p-4 rounded-xl text-xs font-bold border"></div>
                        </div>
                    `).join('')}</div>
                </div>
            </div>
        `;
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function checkAns(sid, qid, choice, correct, exp) {
        const btns = document.querySelectorAll(`.ans-btn-${sid}-${qid}`);
        const fb = document.getElementById(`feedback-${sid}-${qid}`);
        btns.forEach((b, i) => {
            b.disabled = true;
            if(i === correct) b.classList.add('correct');
            if(i === choice && i !== correct) b.classList.add('wrong');
        });
        fb.classList.remove('hidden');
        fb.className = choice === correct ? "p-4 rounded-xl text-xs font-bold bg-green-50 text-green-700 border-green-200 mt-2" : "p-4 rounded-xl text-xs font-bold bg-red-50 text-red-700 border-red-200 mt-2";
        fb.innerHTML = choice === correct ? `✅ BENAR! ${exp}` : `❌ SALAH. Jawaban Benar: ${alphabet[correct]}. ${exp}`;
    }

    function loadSumatif() {
        const container = document.getElementById('main-container');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active'));
        document.getElementById(`nav-9`).classList.add('tab-active');
        let allPool = [];
        Object.keys(rmpData).forEach(k => allPool = [...allPool, ...rmpData[k].latihan]);
        container.innerHTML = `
            <div class="rmp-card bg-slate-900 text-white text-center py-12"><h2 class="text-4xl font-black mb-4">Ujian Akhir (Sumatif)</h2><p class="opacity-60">Total: ${allPool.length} Soal</p></div>
            <div id="sumatif-list" class="space-y-6">${allPool.map((q, i) => `
                <div class="bg-white p-6 rounded-2xl border shadow-sm">
                    <p class="font-bold text-slate-800 mb-4">${i+1}. ${q.q}</p>
                    <div class="grid sm:grid-cols-2 gap-3">${q.o.map((opt, oi) => `
                        <button onclick="selectSum(${i}, ${oi}, ${q.a})" id="sum-btn-${i}-${oi}" class="sum-btn-${i} text-left p-4 border rounded-xl text-sm font-bold flex items-center">
                            <span class="alphabet-box">${alphabet[oi]}</span><span>${opt}</span>
                        </button>
                    `).join('')}</div>
                </div>
            `).join('')}</div>
            <div class="text-center py-10 space-x-4">
                <button onclick="submitSumatif(${allPool.length})" class="bg-teal-600 text-white px-12 py-4 rounded-2xl font-black">HITUNG SKOR</button>
                <button onclick="loadSumatif()" class="bg-slate-200 text-slate-700 px-12 py-4 rounded-2xl font-black">ULANGI TES</button>
            </div>
            <div id="modal-score" class="hidden fixed inset-0 bg-slate-900/80 z-[100] flex items-center justify-center p-4">
                <div class="bg-white p-10 rounded-3xl max-w-sm w-full text-center">
                    <div id="score-circle" class="w-32 h-32 rounded-full border-8 border-teal-500 flex items-center justify-center text-4xl font-black mx-auto mb-6">0</div>
                    <h3 class="text-2xl font-black">Skor Akhir</h3>
                    <button onclick="document.getElementById('modal-score').classList.add('hidden')" class="mt-8 w-full bg-slate-100 py-4 rounded-xl font-bold">Tutup</button>
                </div>
            </div>
        `;
        window.userSelections = new Array(allPool.length).fill(null);
    }

    function selectSum(qi, oi, ai) {
        window.userSelections[qi] = { choice: oi, correct: ai };
        document.querySelectorAll(`.sum-btn-${qi}`).forEach(b => {
            b.classList.remove('bg-teal-600', 'text-white', 'border-teal-600');
            b.classList.add('bg-white', 'text-slate-700', 'border-slate-200');
        });
        const active = document.getElementById(`sum-btn-${qi}-${oi}`);
        active.classList.remove('bg-white', 'text-slate-700', 'border-slate-200');
        active.classList.add('bg-teal-600', 'text-white', 'border-teal-600');
    }

    function submitSumatif(total) {
        let score = 0;
        window.userSelections.forEach(s => { if(s && s.choice === s.correct) score++; });
        document.getElementById('score-circle').innerText = Math.round((score / total) * 100);
        document.getElementById('modal-score').classList.remove('hidden');
    }

    window.onload = () => loadRMP(1);
</script>
</body>
</html>
